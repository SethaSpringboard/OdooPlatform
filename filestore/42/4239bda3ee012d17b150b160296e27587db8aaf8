
/* /website/static/src/js/editor/snippets.editor.js */
odoo.define('@website/js/editor/snippets.editor',['@web/core/l10n/translation','@web/core/dialog/dialog','@web/core/utils/hooks','@web_editor/js/editor/snippets.editor','@website/js/editor/snippets.options','@website/js/utils','@web_editor/js/editor/odoo-editor/src/utils/utils','@odoo/owl','@web/core/utils/timing','@website/js/text_processing'],function(require){'use strict';let __exports={};const{_t}=require("@web/core/l10n/translation");const{Dialog}=require("@web/core/dialog/dialog");const{useChildRef}=require("@web/core/utils/hooks");const weSnippetEditor=require("@web_editor/js/editor/snippets.editor")[Symbol.for("default")];const wSnippetOptions=require("@website/js/editor/snippets.options")[Symbol.for("default")];const wUtils=require("@website/js/utils")[Symbol.for("default")];const OdooEditorLib=require("@web_editor/js/editor/odoo-editor/src/utils/utils");const{Component,onMounted,useRef,useState}=require("@odoo/owl");const{throttleForAnimation}=require("@web/core/utils/timing");const{switchTextHighlight}=require("@website/js/text_processing");const getDeepRange=OdooEditorLib.getDeepRange;const getTraversedNodes=OdooEditorLib.getTraversedNodes;const FontFamilyPickerUserValueWidget=wSnippetOptions.FontFamilyPickerUserValueWidget;const wSnippetMenu=weSnippetEditor.SnippetsMenu.extend({events:Object.assign({},weSnippetEditor.SnippetsMenu.prototype.events,{'click .o_we_customize_theme_btn':'_onThemeTabClick','click .o_we_animate_text':'_onAnimateTextClick','click .o_we_highlight_animated_text':'_onHighlightAnimatedTextClick',"click .o_we_text_highlight":"_onTextHighlightClick",}),custom_events:Object.assign({},weSnippetEditor.SnippetsMenu.prototype.custom_events,{'gmap_api_request':'_onGMapAPIRequest','gmap_api_key_request':'_onGMapAPIKeyRequest','reload_bundles':'_onReloadBundles',}),tabs:Object.assign({},weSnippetEditor.SnippetsMenu.prototype.tabs,{THEME:'theme',}),optionsTabStructure:[['theme-colors',_t("Colors")],['website-settings',_t("Website")],['theme-paragraph',_t("Paragraph")],['theme-headings',_t("Headings")],['theme-button',_t("Button")],['theme-link',_t("Link")],['theme-input',_t("Input Fields")],['theme-advanced',_t("Advanced")],],init(){this._super(...arguments);this.notification=this.bindService("notification");this.dialog=this.bindService("dialog");},async start(){await this._super(...arguments);this.__onSelectionChange=ev=>{this._toggleTextOptionsButton(".o_we_animate_text");this._toggleTextOptionsButton(".o_we_text_highlight");};this.$body[0].ownerDocument.addEventListener('selectionchange',this.__onSelectionChange);this.__onDragStart=ev=>{if(ev.target.nodeName==="IMG"){ev.preventDefault();ev.stopPropagation();}};this.$body[0].addEventListener("dragstart",this.__onDragStart);this._hideBackendNavbarTimeout=setTimeout(()=>{this.el.ownerDocument.body.classList.add('editor_has_snippets_hide_backend_navbar');},500);this._adaptHighlightOnEdit=throttleForAnimation(this._adaptHighlightOnEdit.bind(this));this.textHighlightObserver=new MutationObserver(mutations=>{let isSVGMutation=false;let isNewContentMutation=false;const textHighlightEls=new Set();for(const mutation of mutations){for(const addedNode of mutation.addedNodes){const addedHighlightNode=addedNode.classlist?.contains("o_text_highlight")?addedNode:addedNode.querySelector?.(":scope .o_text_highlight");if(addedHighlightNode){textHighlightEls.add(addedHighlightNode);isNewContentMutation=true;}
if(addedNode.nodeName==="svg"){isSVGMutation=true;}}
const mutationTarget=mutation.target.parentElement?.closest(".o_text_highlight")||mutation.target.nodeType===Node.ELEMENT_NODE&&mutation.target.querySelector(":scope .o_text_highlight");if(mutationTarget){textHighlightEls.add(mutationTarget);}}
if(!isSVGMutation||isNewContentMutation){for(const targetEl of textHighlightEls){this._adaptHighlightOnEdit(targetEl);}}});this.textHighlightObserver.observe(this.options.editable[0],{attributes:false,childList:true,characterData:true,subtree:true,});},destroy(){this._super(...arguments);this.$body[0].ownerDocument.removeEventListener('selectionchange',this.__onSelectionChange);this.$body[0].removeEventListener("dragstart",this.__onDragStart);this.$body[0].classList.remove('o_animated_text_highlighted');clearTimeout(this._hideBackendNavbarTimeout);this.el.ownerDocument.body.classList.remove('editor_has_snippets_hide_backend_navbar');},_computeSnippetTemplates:function(html){const $html=$(html);const toFind=$html.find("we-fontfamilypicker[data-variable]").toArray();const fontVariables=toFind.map((el)=>el.dataset.variable);FontFamilyPickerUserValueWidget.prototype.fontVariables=fontVariables;return this._super(...arguments);},_patchForComputeSnippetTemplates($html){this._super(...arguments);const logoViewName='website.option_header_brand_logo';const logoButtonEl=$html.find(`[data-customize-website-views="${logoViewName}"]`)[0];if(logoButtonEl){logoButtonEl.dataset.customizeWebsiteViews=`|website.option_header_brand_name|${logoViewName}`;logoButtonEl.dataset.resetViewArch="true";}
const brandSelectorEl=$html.find('[data-name="option_header_brand_none"]')[0]?.closest("[data-selector]");if(brandSelectorEl){brandSelectorEl.dataset.selector=brandSelectorEl.dataset.selector.replace('.navbar-brand.logo','.navbar-brand');}
const hoverEffectSelectEl=$html.find('[data-set-img-shape-hover-effect]')[0];delete hoverEffectSelectEl.dataset.noPreview;const gridColumnsEl=$html.find('[data-js="GridColumns"]')[0];if(gridColumnsEl){gridColumnsEl.dataset.selector=".row:not(.s_col_no_resize) > div";}},async _configureGMapAPI({alwaysReconfigure,configureIfNecessary}){if(!alwaysReconfigure&&!configureIfNecessary){return false;}
const apiKey=await new Promise(resolve=>{this.getParent()._websiteRootEvent("gmap_api_key_request",{onSuccess:key=>resolve(key),});});const apiKeyValidation=apiKey?await this._validateGMapAPIKey(apiKey):{isValid:false,message:undefined,};if(!alwaysReconfigure&&configureIfNecessary&&apiKey&&apiKeyValidation.isValid){return false;}
let websiteId;this.trigger_up('context_get',{callback:ctx=>websiteId=ctx['website_id'],});function applyError(message){const $apiKeyInput=this.find('#api_key_input');const $apiKeyHelp=this.find('#api_key_help');$apiKeyInput.addClass('is-invalid');$apiKeyHelp.empty().text(message);}
const GoogleMapAPIKeyDialog=class extends Component{static template="website.s_google_map_modal";static components={Dialog};static props={onMounted:Function,close:Function,confirm:Function};setup(){this.modalRef=useChildRef();this.state=useState({apiKey:apiKey});this.apiKeyInput=useRef("apiKeyInput");onMounted(()=>this.props.onMounted(this.modalRef));}
onClickSave(){this.props.confirm(this.modalRef,this.state.apiKey);}};return new Promise(resolve=>{let invalidated=false;this.dialog.add(GoogleMapAPIKeyDialog,{onMounted:(modalRef)=>{if(!apiKeyValidation.isValid&&apiKeyValidation.message){applyError.call($(modalRef.el),apiKeyValidation.message);}},confirm:async(modalRef,valueAPIKey)=>{if(!valueAPIKey){applyError.call($(modalRef.el),_t("Enter an API Key"));return;}
const $button=$(modalRef.el).find("button");$button.prop('disabled',true);const res=await this._validateGMapAPIKey(valueAPIKey);if(res.isValid){await this.orm.write("website",[websiteId],{google_maps_api_key:valueAPIKey});invalidated=true;return true;}else{applyError.call($(modalRef.el),res.message);}
$button.prop("disabled",false);}},{onClose:()=>resolve(invalidated),});});},async _validateGMapAPIKey(key){try{const response=await fetch(`https://maps.googleapis.com/maps/api/staticmap?center=belgium&size=10x10&key=${encodeURIComponent(key)}`);const isValid=(response.status===200);return{isValid:isValid,message:!isValid&&_t("Invalid API Key. The following error was returned by Google:")+" "+(await response.text()),};}catch{return{isValid:false,message:_t("Check your connection and try again"),};}},_getDragAndDropOptions(options={}){const finalOptions=this._super(...arguments);if(!options.offsetElements||!options.offsetElements.$top){const $header=$('#top');if($header.length){finalOptions.offsetElements=finalOptions.offsetElements||{};finalOptions.offsetElements.$top=$header;}}
return finalOptions;},async _handleGMapRequest(ev,gmapRequestEventName){ev.stopPropagation();const reconfigured=await this._configureGMapAPI({alwaysReconfigure:ev.data.reconfigure,configureIfNecessary:ev.data.configureIfNecessary,});this.getParent()._websiteRootEvent(gmapRequestEventName,{refetch:reconfigured,editableMode:true,onSuccess:key=>ev.data.onSuccess(key),});},_updateRightPanelContent:function({content,tab}){this._super(...arguments);this.$('.o_we_customize_theme_btn').toggleClass('active',tab===this.tabs.THEME);},_getSelectedTextElement(selector){const editable=this.options.wysiwyg.$editable[0];const textOptionNode=getTraversedNodes(editable).find(n=>n.parentElement.closest(selector));return textOptionNode?textOptionNode.parentElement.closest(selector):false;},_getSelection(){return this.options.wysiwyg.odooEditor.document.getSelection();},_addToolbar(){this._super(...arguments);this.$('#o_we_editor_toolbar_container > we-title > span').after($(`
            <we-button class="fa fa-fw o_we_link o_we_highlight_animated_text d-none
                ${this.$body.hasClass('o_animated_text_highlighted') ? 'fa-eye text-success' : 'fa-eye-slash'}"
                title="${_t('Highlight Animated Text')}"
                aria-label="Highlight Animated Text">
            </we-button>
        `));this._toggleTextOptionsButton(".o_we_animate_text");this._toggleHighlightAnimatedTextButton();this._toggleTextOptionsButton(".o_we_text_highlight");this.options.wysiwyg.odooEditor.computeFontSizeSelectorValues();},_toggleTextOptionsButton(selector){if(!this._isValidSelection(this._getSelection())){return;}
const textOptionsButton=this.el.querySelector(selector);if(textOptionsButton){textOptionsButton.classList.toggle("active",!!this._getSelectedTextElement(textOptionsButton.dataset.textSelector));}},_toggleHighlightAnimatedTextButton(){const $animatedText=this.getEditableArea().find('.o_animated_text');this.$('#o_we_editor_toolbar_container .o_we_highlight_animated_text').toggleClass('d-none',!$animatedText.length);},_isValidSelection(sel){return sel.rangeCount&&[...this.getEditableArea()].some(el=>el.contains(sel.anchorNode));},_isMobile(){return wUtils.isMobile(this);},_handleTextOptions(targetEl,optionClassList,applyTextOption=()=>{}){const __handleTextOptionsPostActivate=this.__handleTextOptionsPostActivate;const classSelector=targetEl.dataset.textSelector;const sel=this._getSelection();if(!this._isValidSelection(sel)){return;}
const editable=this.options.wysiwyg.$editable[0];const range=getDeepRange(editable,{splitText:true,select:true,correctTripleClick:true});let selectedTextEl=this._getSelectedTextElement(classSelector);if(selectedTextEl){const restoreCursor=OdooEditorLib.preserveCursor(this.$body[0].ownerDocument);const selectedTextParent=selectedTextEl.parentNode;while(selectedTextEl.firstChild){const child=selectedTextEl.firstChild;if(child.nodeType===Node.ELEMENT_NODE&&child.className.includes("o_text_highlight_item")){child.after(...[...child.childNodes].filter((node)=>node.tagName!=="svg"));child.remove();}
selectedTextParent.insertBefore(selectedTextEl.firstChild,selectedTextEl);}
selectedTextParent.removeChild(selectedTextEl);this.options.wysiwyg.odooEditor.historyResetLatestComputedSelection();this._disableTextOptions(targetEl);this.options.wysiwyg.odooEditor.historyStep(true);restoreCursor();}else{if(sel.getRangeAt(0).collapsed){return;}
selectedTextEl=document.createElement("span");selectedTextEl.classList.add(...optionClassList);let $snippet=null;try{range.surroundContents(selectedTextEl);$snippet=$(selectedTextEl);}catch{if(range.commonAncestorContainer.textContent===range.toString()){const $commonAncestor=$(range.commonAncestorContainer);$commonAncestor.wrapInner(selectedTextEl);$snippet=$commonAncestor.find(classSelector);}}
if($snippet){$snippet[0].normalize();applyTextOption($snippet[0]);this.trigger_up('activate_snippet',{$snippet:$snippet,previewMode:false,onSuccess:()=>{if(__handleTextOptionsPostActivate){__handleTextOptionsPostActivate($snippet);}},});this.options.wysiwyg.odooEditor.historyStep();}else{this.notification.add(_t("Cannot apply this option on current text selection. Try clearing the format and try again."),{type:'danger',sticky:true});}}},_disableTextOptions(targetEl){if(targetEl.classList.contains('o_we_animate_text')){this._toggleHighlightAnimatedTextButton();}
targetEl.classList.remove('active');},_adaptHighlightOnEdit(target,highlightID){return switchTextHighlight(target,highlightID);},_getOptionTextClass(buttonEl){return buttonEl.dataset.textSelector.slice(1);},_allowParentsEditors($snippet){return this._super(...arguments)&&!$snippet[0].classList.contains("s_popup");},_onGMapAPIRequest(ev){this._handleGMapRequest(ev,'gmap_api_request');},_onGMapAPIKeyRequest(ev){this._handleGMapRequest(ev,'gmap_api_key_request');},async _onThemeTabClick(ev){let releaseLoader;try{const promise=new Promise(resolve=>releaseLoader=resolve);this._execWithLoadingEffect(()=>promise,false,0);await new Promise(resolve=>requestAnimationFrame(()=>requestAnimationFrame(resolve)));if(!this.topFakeOptionEl){let el;for(const[elementName,title]of this.optionsTabStructure){const newEl=document.createElement(elementName);newEl.dataset.name=title;if(el){el.appendChild(newEl);}else{this.topFakeOptionEl=newEl;}
el=newEl;}
this.bottomFakeOptionEl=el;this.$body[0].appendChild(this.topFakeOptionEl);}
this.topFakeOptionEl.classList.remove('d-none');const editorPromise=this._activateSnippet($(this.bottomFakeOptionEl));releaseLoader();releaseLoader=undefined;const editor=await editorPromise;this.topFakeOptionEl.classList.add('d-none');editor.toggleOverlay(false);this._updateRightPanelContent({tab:this.tabs.THEME,});}catch(e){if(releaseLoader){releaseLoader();}
throw e;}},_onOptionsTabClick(ev){if(!ev.currentTarget.classList.contains('active')){this._activateSnippet(false);this._mutex.exec(async()=>{const switchableViews=await new Promise((resolve,reject)=>{this.trigger_up('get_switchable_related_views',{onSuccess:resolve,onFailure:reject,});});if(switchableViews.length){this._activateSnippet(this.$body.find('#wrapwrap > main'));return;}
let $pageOptionsTarget=$();let i=0;const pageOptions=this.templateOptions.filter(template=>template.data.pageOptions);while(!$pageOptionsTarget.length&&i<pageOptions.length){$pageOptionsTarget=pageOptions[i].selector.all();i++;}
if($pageOptionsTarget.length){this._activateSnippet($pageOptionsTarget);}else{this._activateEmptyOptionsTab();}});}},_onAnimateTextClick(ev){const target=ev.currentTarget;this._handleTextOptions(target,[this._getOptionTextClass(target),"o_animate","o_animate_preview","o_anim_fade_in"]);},_onHighlightAnimatedTextClick(ev){this.$body.toggleClass('o_animated_text_highlighted');$(ev.target).toggleClass('fa-eye fa-eye-slash').toggleClass('text-success');},_onTextHighlightClick(ev){ev.stopPropagation();this._closeWidgets();const target=ev.currentTarget;this.__handleTextOptionsPostActivate=($snippet)=>{$snippet.data("snippet-editor")?.trigger_up("option_update",{optionName:"TextHighlight",name:"new_text_highlight",});};this._handleTextOptions(target,[this._getOptionTextClass(target),"o_text_highlight_underline"],);delete this.__handleTextOptionsPostActivate;},_onReloadBundles(ev){const excludeSelector=this.optionsTabStructure.map(element=>element[0]).join(', ');for(const editor of this.snippetEditors){if(!editor.$target[0].matches(excludeSelector)){if(this._currentTab===this.tabs.THEME){this._mutex.exec(()=>{editor.destroy();});}else{this._mutex.exec(async()=>{await editor.updateOptionsUI(true);});}}}},});weSnippetEditor.SnippetEditor.include({layoutElementsSelector:[weSnippetEditor.SnippetEditor.prototype.layoutElementsSelector,'.s_parallax_bg','.o_bg_video_container',].join(','),getName(){if(this.$target[0].closest('[data-oe-field=logo]')){return _t("Logo");}
return this._super(...arguments);},async updateOptionsUIVisibility(){await this._super(...arguments);if(!this.$optionsSection[0].querySelector(":scope > we-customizeblock-option")){this.$optionsSection[0].classList.add("d-none");}},_prepareDrag(){const restore=this._super(...arguments);const wrapwrapEl=this.$body[0].ownerDocument.defaultView.document.body.querySelector('#wrapwrap');const hasFooterScrollEffect=wrapwrapEl&&wrapwrapEl.classList.contains('o_footer_effect_enable');if(hasFooterScrollEffect){wrapwrapEl.classList.remove('o_footer_effect_enable');return()=>{wrapwrapEl.classList.add('o_footer_effect_enable');restore();};}
return restore;},_highlightResizeObserve(){this.observerLock=true;this.editorResizeObserver.observe(this.$target[0]);},_adaptOnOptionResize(){[...this.$target[0].querySelectorAll(".o_text_highlight")].forEach(textEl=>{switchTextHighlight(textEl);});},});wSnippetMenu.include({init:function(){this._super(...arguments);this._notActivableElementsSelector+=', .o_mega_menu_toggle';},start(){const _super=this._super(...arguments);if(this.options.enableTranslation){return _super;}
if(this.$body[0].ownerDocument!==this.ownerDocument){this.$body.on('click.snippets_menu','*',this._onClick);}
return _super;},destroy(){if(this.$body[0].ownerDocument!==this.ownerDocument){this.$body.off('.snippets_menu');}
return this._super(...arguments);},async cleanForSave(){this.textHighlightObserver.disconnect();const getFromEditable=selector=>this.options.editable[0].querySelectorAll(selector);return this._super(...arguments).then(()=>{for(const el of getFromEditable('.o_translation_without_style')){el.classList.remove('o_translation_without_style');if(el.dataset.oeTranslationSaveSha){el.dataset.oeTranslationInitialSha=el.dataset.oeTranslationSaveSha;delete el.dataset.oeTranslationSaveSha;}}
for(const optionsEl of getFromEditable('.o_translation_select')){const selectEl=optionsEl.nextElementSibling;const translatedOptions=optionsEl.children;const selectOptions=selectEl.tagName==='SELECT'?[...selectEl.options]:[];if(selectOptions.length===translatedOptions.length){selectOptions.map((option,i)=>{option.text=translatedOptions[i].textContent;});}
optionsEl.remove();}});},_insertDropzone:function($hook){var $hookParent=$hook.parent();var $dropzone=this._super(...arguments);$dropzone.attr('data-editor-message-default',$hookParent.attr('data-editor-message-default'));$dropzone.attr('data-editor-message',$hookParent.attr('data-editor-message'));$dropzone.attr('data-editor-sub-message',$hookParent.attr('data-editor-sub-message'));return $dropzone;},});__exports[Symbol.for("default")]={SnippetsMenu:wSnippetMenu,};return __exports;});;

/* /website/static/src/js/editor/snippets.options.js */
odoo.define('@website/js/editor/snippets.options',['@web/core/assets','@web/core/confirmation_dialog/confirmation_dialog','@web/core/dialog/dialog','@web/core/utils/hooks','@web_editor/js/common/utils','@web_editor/js/editor/snippets.options','@website/js/widgets/link_popover_widget','@website/js/utils','@web_editor/js/editor/image_processing','@website/snippets/s_popup/options','@web/core/utils/numbers','@web/core/l10n/translation','@web/core/domain','@web/core/utils/colors','@web/core/utils/render','@web/core/browser/browser','@website/js/text_processing','@odoo/owl'],function(require){'use strict';let __exports={};const{loadCSS}=require("@web/core/assets");const{ConfirmationDialog}=require("@web/core/confirmation_dialog/confirmation_dialog");const{Dialog}=require("@web/core/dialog/dialog");const{useChildRef}=require("@web/core/utils/hooks");const weUtils=require("@web_editor/js/common/utils")[Symbol.for("default")];const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];const{NavbarLinkPopoverWidget}=require("@website/js/widgets/link_popover_widget");const wUtils=require("@website/js/utils")[Symbol.for("default")];const{isImageCorsProtected,isImageSupportedForStyle}=require("@web_editor/js/editor/image_processing");require("@website/snippets/s_popup/options");const{range}=require("@web/core/utils/numbers");const{_t}=require("@web/core/l10n/translation");const{Domain}=require("@web/core/domain");const{isCSSColor,convertCSSColorToRgba,convertRgbaToCSSColor,convertRgbToHsl,convertHslToRgb,}=require('@web/core/utils/colors');const{renderToElement,renderToFragment}=require("@web/core/utils/render");const{browser}=require("@web/core/browser/browser");const{removeTextHighlight,drawTextHighlightSVG,}=require("@website/js/text_processing");const{Component,markup,useRef,useState}=require("@odoo/owl");const InputUserValueWidget=options.userValueWidgetsRegistry['we-input'];const SelectUserValueWidget=options.userValueWidgetsRegistry['we-select'];const Many2oneUserValueWidget=options.userValueWidgetsRegistry['we-many2one'];options.UserValueWidget.include({loadMethodsData(){this._super(...arguments);const indexVariable=this._methodsNames.indexOf('customizeWebsiteVariable');if(indexVariable>=0){const indexView=this._methodsNames.indexOf('customizeWebsiteViews');if(indexView>=0){this._methodsNames[indexVariable]='customizeWebsiteViews';this._methodsNames[indexView]='customizeWebsiteVariable';}}},});Many2oneUserValueWidget.include({init(){this._super(...arguments);this.fields=this.bindService("field");},async _getSearchDomain(){const websiteIdField=await this.fields.loadFields(this.options.model,{fieldNames:["website_id"],});const modelHasWebsiteId=!!websiteIdField["website_id"];if(modelHasWebsiteId&&!this.options.domain.find(arr=>arr[0]==="website_id")){this.options.domain=Domain.and([this.options.domain,wUtils.websiteDomain(this)]).toList();}
return this.options.domain;},});const UrlPickerUserValueWidget=InputUserValueWidget.extend({events:Object.assign({},InputUserValueWidget.prototype.events||{},{'click .o_we_redirect_to':'_onRedirectTo',}),init(){this._super(...arguments);this.rpc=this.bindService("rpc");},start:async function(){await this._super(...arguments);const linkButton=document.createElement('we-button');const icon=document.createElement('i');icon.classList.add('fa','fa-fw','fa-external-link');linkButton.classList.add('o_we_redirect_to','o_we_link','ms-1');linkButton.title=_t("Preview this URL in a new tab");linkButton.appendChild(icon);this.containerEl.after(linkButton);this.el.classList.add('o_we_large');this.inputEl.classList.add('text-start');const options={classes:{"ui-autocomplete":'o_website_ui_autocomplete'},body:this.getParent().$target[0].ownerDocument.body,urlChosen:this._onWebsiteURLChosen.bind(this),};this.unmountAutocompleteWithPages=wUtils.autocompleteWithPages(this.inputEl,options);},open(){this._super(...arguments);document.querySelector(".o_website_ui_autocomplete")?.classList?.remove("d-none");},close(){this._super(...arguments);document.querySelector(".o_website_ui_autocomplete")?.classList?.add("d-none");},_onWebsiteURLChosen:function(ev){this._value=this.inputEl.value;this._onUserValueChange(ev);},_onRedirectTo:function(){if(this._value){window.open(this._value,'_blank');}},destroy(){this.unmountAutocompleteWithPages?.();this.unmountAutocompleteWithPages=null;this._super(...arguments);}});const FontFamilyPickerUserValueWidget=SelectUserValueWidget.extend({events:Object.assign({},SelectUserValueWidget.prototype.events||{},{'click .o_we_add_google_font_btn':'_onAddGoogleFontClick','click .o_we_delete_google_font_btn':'_onDeleteGoogleFontClick',}),fontVariables:[],init(){this.dialog=this.bindService("dialog");return this._super(...arguments);},start:async function(){const style=window.getComputedStyle(this.$target[0].ownerDocument.documentElement);const nbFonts=parseInt(weUtils.getCSSVariableValue('number-of-fonts',style));const googleFontsProperty=weUtils.getCSSVariableValue('google-fonts',style);this.googleFonts=googleFontsProperty?googleFontsProperty.split(/\s*,\s*/g):[];this.googleFonts=this.googleFonts.map(font=>font.substring(1,font.length-1));const googleLocalFontsProperty=weUtils.getCSSVariableValue('google-local-fonts',style);this.googleLocalFonts=googleLocalFontsProperty?googleLocalFontsProperty.slice(1,-1).split(/\s*,\s*/g):[];this.googleFonts=this.googleFonts.filter(font=>{const localFonts=this.googleLocalFonts.map(localFont=>localFont.split(":")[0]);return localFonts.indexOf(`'${font}'`)===-1;});this.allFonts=[];await this._super(...arguments);const fontsToLoad=[];for(const font of this.googleFonts){const fontURL=`https://fonts.googleapis.com/css?family=${encodeURIComponent(font).replace(/%20/g, '+')}`;fontsToLoad.push(fontURL);}
for(const font of this.googleLocalFonts){const attachmentId=font.split(/\s*:\s*/)[1];const fontURL=`/web/content/${encodeURIComponent(attachmentId)}`;fontsToLoad.push(fontURL);}
const proms=fontsToLoad.map(async fontURL=>loadCSS(fontURL));const fontsLoadingProm=Promise.all(proms);const fontEls=[];const methodName=this.el.dataset.methodName||'customizeWebsiteVariable';const variable=this.el.dataset.variable;const themeFontsNb=nbFonts-(this.googleLocalFonts.length+this.googleFonts.length);for(let fontNb=0;fontNb<nbFonts;fontNb++){const realFontNb=fontNb+1;const fontKey=weUtils.getCSSVariableValue(`font-number-${realFontNb}`,style);this.allFonts.push(fontKey);let fontName=fontKey.slice(1,-1);let fontFamily=fontName;const isSystemFonts=fontName==="SYSTEM_FONTS";if(isSystemFonts){fontName=_t("System Fonts");fontFamily='var(--o-system-fonts)';}
const fontEl=document.createElement('we-button');fontEl.setAttribute('string',fontName);fontEl.dataset.variable=variable;fontEl.dataset[methodName]=fontKey;fontEl.dataset.fontFamily=fontFamily;if((realFontNb<=themeFontsNb)&&!isSystemFonts){fontEl.appendChild(Object.assign(document.createElement('i'),{role:'button',className:'text-info me-2 fa fa-cloud',title:_t("This font is hosted and served to your visitors by Google servers"),}));}
fontEls.push(fontEl);this.menuEl.appendChild(fontEl);}
if(this.googleLocalFonts.length){const googleLocalFontsEls=fontEls.splice(-this.googleLocalFonts.length);googleLocalFontsEls.forEach((el,index)=>{$(el).append(renderToFragment('website.delete_google_font_btn',{index:index,local:"true",}));});}
if(this.googleFonts.length){const googleFontsEls=fontEls.splice(-this.googleFonts.length);googleFontsEls.forEach((el,index)=>{$(el).append(renderToFragment('website.delete_google_font_btn',{index:index,}));});}
$(this.menuEl).append($(renderToElement('website.add_google_font_btn',{variable:variable,})));return fontsLoadingProm;},async setValue(){await this._super(...arguments);this.menuTogglerEl.style.fontFamily='';const activeWidget=this._userValueWidgets.find(widget=>!widget.isPreviewed()&&widget.isActive());if(activeWidget){this.menuTogglerEl.style.fontFamily=activeWidget.el.dataset.fontFamily;}},_onAddGoogleFontClick:function(ev){const addGoogleFontDialog=class extends Component{static template="website.dialog.addGoogleFont";static components={Dialog};static props={close:Function,title:String,onClickSave:Function};title=_t("Add a Google Font");state=useState({valid:true,loading:false,googleServe:true});fontInput=useRef("fontInput");async onClickSave(){if(this.state.loading){return;}
this.state.loading=true;const shouldClose=await this.props.onClickSave(this.state,this.fontInput.el);if(shouldClose){this.props.close();return;}
this.state.loading=false;}
onClickCancel(){this.props.close();}};const variable=$(ev.currentTarget).data('variable');this.dialog.add(addGoogleFontDialog,{title:_t("Add a Google Font"),onClickSave:async(state,inputEl)=>{let m=inputEl.value.match(/\bspecimen\/([\w+]+)/);if(!m){m=inputEl.value.match(/\bfamily=([\w+]+)/);if(!m){inputEl.classList.add('is-invalid');return;}}
let isValidFamily=false;try{const result=await fetch("https://fonts.googleapis.com/css?family="+m[1]+':300,300i,400,400i,700,700i',{method:'HEAD'});if(result.ok){isValidFamily=true;}}catch(error){console.error(error);}
if(!isValidFamily){inputEl.classList.add('is-invalid');return;}
const font=m[1].replace(/\+/g,' ');const googleFontServe=state.googleServe;const fontName=`'${font}'`;const fontExistsLocally=this.googleLocalFonts.some(localFont=>localFont.split(':')[0]===fontName);const fontExistsOnServer=this.allFonts.includes(fontName);const preventFontAddition=fontExistsLocally||(fontExistsOnServer&&googleFontServe);if(preventFontAddition){inputEl.classList.add('is-invalid');inputEl.setCustomValidity(_t("This font already exists, you can only add it as a local font to replace the server version."));inputEl.reportValidity();return;}
if(googleFontServe){this.googleFonts.push(font);}else{this.googleLocalFonts.push(`'${font}': ''`);}
this.trigger_up('google_fonts_custo_request',{values:{[variable]:`'${font}'`},googleFonts:this.googleFonts,googleLocalFonts:this.googleLocalFonts,});return true;},});},_onDeleteGoogleFontClick:async function(ev){ev.preventDefault();const values={};const save=await new Promise(resolve=>{this.dialog.add(ConfirmationDialog,{body:_t("Deleting a font requires a reload of the page. This will save all your changes and reload the page, are you sure you want to proceed?"),confirm:()=>resolve(true),cancel:()=>resolve(false),});});if(!save){return;}
const googleFontIndex=parseInt(ev.target.dataset.fontIndex);const isLocalFont=ev.target.dataset.localFont;let googleFontName;if(isLocalFont){const googleFont=this.googleLocalFonts[googleFontIndex].split(':');googleFontName=googleFont[0].substring(1,googleFont[0].length-1);values['delete-font-attachment-id']=googleFont[1];this.googleLocalFonts.splice(googleFontIndex,1);}else{googleFontName=this.googleFonts[googleFontIndex];this.googleFonts.splice(googleFontIndex,1);}
const style=window.getComputedStyle(this.$target[0].ownerDocument.documentElement);FontFamilyPickerUserValueWidget.prototype.fontVariables.forEach((variable)=>{const value=weUtils.getCSSVariableValue(variable,style);if(value.substring(1,value.length-1)===googleFontName){values[variable]='null';}});this.trigger_up('google_fonts_custo_request',{values:values,googleFonts:this.googleFonts,googleLocalFonts:this.googleLocalFonts,});},});const GPSPicker=InputUserValueWidget.extend({events:{},init(){this._super(...arguments);this._gmapCacheGPSToPlace={};this.contentWindow=this.$target[0].ownerDocument.defaultView;this.notification=this.bindService("notification");},async willStart(){await this._super(...arguments);this._gmapLoaded=await new Promise(resolve=>{this.trigger_up('gmap_api_request',{editableMode:true,configureIfNecessary:true,onSuccess:key=>{if(!key){resolve(false);return;}
this._nearbySearch('(50.854975,4.3753899)',!!key).then(place=>resolve(!!place));},});});if(!this._gmapLoaded&&!this._gmapErrorNotified){this.trigger_up('user_value_widget_critical');return;}},async start(){await this._super(...arguments);this.el.classList.add('o_we_large');if(!this._gmapLoaded){return;}
this._gmapAutocomplete=new this.contentWindow.google.maps.places.Autocomplete(this.inputEl,{types:['geocode']});this.contentWindow.google.maps.event.addListener(this._gmapAutocomplete,'place_changed',this._onPlaceChanged.bind(this));},destroy(){this._super(...arguments);for(const el of document.body.querySelectorAll('.pac-container')){el.remove();}},getMethodsParams:function(methodName){return Object.assign({gmapPlace:this._gmapPlace||{}},this._super(...arguments));},async setValue(){await this._super(...arguments);if(!this._gmapLoaded){return;}
this._gmapPlace=await this._nearbySearch(this._value);if(this._gmapPlace){this.inputEl.value=this._gmapPlace.formatted_address;}},async _nearbySearch(gps,notify=true){if(this._gmapCacheGPSToPlace[gps]){return this._gmapCacheGPSToPlace[gps];}
const p=gps.substring(1).slice(0,-1).split(',');const location=new this.contentWindow.google.maps.LatLng(p[0]||0,p[1]||0);return new Promise(resolve=>{const service=new this.contentWindow.google.maps.places.PlacesService(document.createElement('div'));service.nearbySearch({location:location,radius:1,},(results,status)=>{const GMAP_CRITICAL_ERRORS=[this.contentWindow.google.maps.places.PlacesServiceStatus.REQUEST_DENIED,this.contentWindow.google.maps.places.PlacesServiceStatus.UNKNOWN_ERROR];if(status===this.contentWindow.google.maps.places.PlacesServiceStatus.OK){service.getDetails({placeId:results[0].place_id,fields:['geometry','formatted_address'],},(place,status)=>{if(status===this.contentWindow.google.maps.places.PlacesServiceStatus.OK){this._gmapCacheGPSToPlace[gps]=place;resolve(place);}else if(GMAP_CRITICAL_ERRORS.includes(status)){if(notify){this._notifyGMapError();}
resolve();}});}else if(GMAP_CRITICAL_ERRORS.includes(status)){if(notify){this._notifyGMapError();}
resolve();}else{resolve();}});});},_notifyGMapError(){if(this._gmapErrorNotified){return;}
this._gmapErrorNotified=true;this.notification.add(_t("A Google Map error occurred. Make sure to read the key configuration popup carefully."),{type:'danger',sticky:true});this.trigger_up('gmap_api_request',{editableMode:true,reconfigure:true,onSuccess:()=>{this._gmapErrorNotified=false;},});setTimeout(()=>this.trigger_up('user_value_widget_critical'));},_onPlaceChanged(ev){const gmapPlace=this._gmapAutocomplete.getPlace();if(gmapPlace&&gmapPlace.geometry){this._gmapPlace=gmapPlace;const location=this._gmapPlace.geometry.location;const oldValue=this._value;this._value=`(${location.lat()},${location.lng()})`;this._gmapCacheGPSToPlace[this._value]=gmapPlace;if(oldValue!==this._value){this._onUserValueChange(ev);}}},});options.userValueWidgetsRegistry['we-urlpicker']=UrlPickerUserValueWidget;options.userValueWidgetsRegistry['we-fontfamilypicker']=FontFamilyPickerUserValueWidget;options.userValueWidgetsRegistry['we-gpspicker']=GPSPicker;options.Class.include({custom_events:Object.assign({},options.Class.prototype.custom_events||{},{'google_fonts_custo_request':'_onGoogleFontsCustoRequest','request_save':'_onSaveRequest',}),specialCheckAndReloadMethodsNames:['customizeWebsiteViews','customizeWebsiteVariable','customizeWebsiteColor'],init(){this._super(...arguments);this.$bsTarget=this.ownerDocument.defaultView.$(this.$target[0]);this.rpc=this.bindService("rpc");this.orm=this.bindService("orm");},customizeWebsiteViews:async function(previewMode,widgetValue,params){await this._customizeWebsite(previewMode,widgetValue,params,'views');},customizeWebsiteVariable:async function(previewMode,widgetValue,params){await this._customizeWebsite(previewMode,widgetValue,params,'variable');},customizeWebsiteVariables:async function(previewMode,widgetValue,params){await this._customizeWebsite(previewMode,widgetValue,params,'variables');},customizeWebsiteColor:async function(previewMode,widgetValue,params){await this._customizeWebsite(previewMode,widgetValue,params,'color');},async customizeWebsiteAssets(previewMode,widgetValue,params){await this._customizeWebsite(previewMode,widgetValue,params,'assets');},async _checkIfWidgetsUpdateNeedReload(widgets){const needReload=await this._super(...arguments);if(needReload){return needReload;}
for(const widget of widgets){const methodsNames=widget.getMethodsNames();const methodNamesToCheck=this.data.pageOptions?methodsNames:methodsNames.filter(m=>this.specialCheckAndReloadMethodsNames.includes(m));if(methodNamesToCheck.some(m=>widget.getMethodsParams(m).reload)){return true;}}
return false;},_computeWidgetState:async function(methodName,params){switch(methodName){case'customizeWebsiteViews':{return this._getEnabledCustomizeValues(params.possibleValues,true);}
case'customizeWebsiteVariable':{const ownerDocument=this.$target[0].ownerDocument;const style=ownerDocument.defaultView.getComputedStyle(ownerDocument.documentElement);let finalValue=weUtils.getCSSVariableValue(params.variable,style);if(!params.colorNames){return finalValue;}
let tempValue=finalValue;while(tempValue){finalValue=tempValue;tempValue=weUtils.getCSSVariableValue(tempValue.replaceAll("'",''),style);}
return finalValue;}
case'customizeWebsiteColor':{const ownerDocument=this.$target[0].ownerDocument;const style=ownerDocument.defaultView.getComputedStyle(ownerDocument.documentElement);return weUtils.getCSSVariableValue(params.color,style);}
case'customizeWebsiteAssets':{return this._getEnabledCustomizeValues(params.possibleValues,false);}}
return this._super(...arguments);},_customizeWebsite:async function(previewMode,widgetValue,params,type){if(previewMode){return;}
switch(type){case'views':await this._customizeWebsiteData(widgetValue,params,true);break;case'variable':await this._customizeWebsiteVariable(widgetValue,params);break;case"variables":const defaultVariables=params.defaultVariables?Object.fromEntries(params.defaultVariables.split(",").map((variable)=>variable.split(":").map(v=>v.trim()))):{};const overriddenVariables=Object.fromEntries(widgetValue.split(",").map((variable)=>variable.split(":").map(v=>v.trim())));const variables=Object.assign(defaultVariables,overriddenVariables);await this._customizeWebsiteVariables(variables,params.nullValue);break;case'color':await this._customizeWebsiteColor(widgetValue,params);break;case'assets':await this._customizeWebsiteData(widgetValue,params,false);break;default:if(params.customCustomization){await params.customCustomization.call(this,widgetValue,params);}}
if(params.reload||params.noBundleReload){return;}
await this._refreshBundles();},async _refreshBundles(){await this._reloadBundles();await new Promise((resolve,reject)=>{this.trigger_up('widgets_start_request',{editableMode:true,onSuccess:()=>resolve(),onFailure:()=>reject(),});});},async _customizeWebsiteColor(color,params){await this._customizeWebsiteColors({[params.color]:color},params);},async _customizeWebsiteColors(colors,params){colors=colors||{};const baseURL='/website/static/src/scss/options/colors/';const colorType=params.colorType?(params.colorType+'_'):'';const url=`${baseURL}user_${colorType}color_palette.scss`;const finalColors={};for(const[colorName,color]of Object.entries(colors)){finalColors[colorName]=color;if(color){if(weUtils.isColorCombinationName(color)){finalColors[colorName]=parseInt(color);}else if(!isCSSColor(color)){finalColors[colorName]=`'${color}'`;}}}
return this._makeSCSSCusto(url,finalColors,params.nullValue);},_customizeWebsiteVariable:async function(value,params){return this._makeSCSSCusto('/website/static/src/scss/options/user_values.scss',{[params.variable]:value,},params.nullValue);},_customizeWebsiteVariables:async function(values,nullValue){await this._makeSCSSCusto('/website/static/src/scss/options/user_values.scss',values,nullValue);await this._refreshBundles();},async _customizeWebsiteData(value,params,isViewData){const allDataKeys=this._getDataKeysFromPossibleValues(params.possibleValues);const enableDataKeys=value.split(/\s*,\s*/);const disableDataKeys=allDataKeys.filter(value=>!enableDataKeys.includes(value));const resetViewArch=!!params.resetViewArch;return this.rpc('/website/theme_customize_data',{'is_view_data':isViewData,'enable':enableDataKeys,'disable':disableDataKeys,'reset_view_arch':resetViewArch,});},_getDataKeysFromPossibleValues(possibleValues){const allDataKeys=[];for(const dataKeysStr of possibleValues){allDataKeys.push(...dataKeysStr.split(/\s*,\s*/));}
return allDataKeys.filter((v,i,arr)=>arr.indexOf(v)===i);},async _getEnabledCustomizeValues(possibleValues,isViewData){const allDataKeys=this._getDataKeysFromPossibleValues(possibleValues);const enabledValues=await this.rpc('/website/theme_customize_data_get',{'keys':allDataKeys,'is_view_data':isViewData,});let mostValuesStr='';let mostValuesNb=0;for(const valuesStr of possibleValues){const enableValues=valuesStr.split(/\s*,\s*/);if(enableValues.length>mostValuesNb&&enableValues.every(value=>enabledValues.includes(value))){mostValuesStr=valuesStr;mostValuesNb=enableValues.length;}}
return mostValuesStr;},_makeSCSSCusto:async function(url,values,defaultValue='null'){Object.keys(values).forEach((key)=>{values[key]=values[key]||defaultValue;});return this.orm.call("web_editor.assets","make_scss_customization",[url,values]);},_refreshPublicWidgets:async function($el){return new Promise((resolve,reject)=>{this.trigger_up('widgets_start_request',{editableMode:true,$target:$el||this.$target,onSuccess:resolve,onFailure:reject,});});},_reloadBundles:async function(){return new Promise((resolve,reject)=>{this.trigger_up('reload_bundles',{onSuccess:()=>resolve(),onFailure:()=>reject(),});});},_select:async function(previewMode,widget){await this._super(...arguments);const targetNoRefreshSelector=".s_instagram_page";if(this.options.isWebsite&&!widget.$el.closest('[data-no-widget-refresh="true"]').length&&!this.$target[0].matches(targetNoRefreshSelector)){await this._refreshPublicWidgets();}},_onGoogleFontsCustoRequest:function(ev){const values=ev.data.values?Object.assign({},ev.data.values):{};const googleFonts=ev.data.googleFonts;const googleLocalFonts=ev.data.googleLocalFonts;if(googleFonts.length){values['google-fonts']="('"+googleFonts.join("', '")+"')";}else{values['google-fonts']='null';}
if(googleLocalFonts.length){values['google-local-fonts']="("+googleLocalFonts.join(", ")+")";}else{values['google-local-fonts']='null';}
this.trigger_up('snippet_edition_request',{exec:async()=>{return this._makeSCSSCusto('/website/static/src/scss/options/user_values.scss',values);}});this.trigger_up('request_save',{reloadEditor:true,});},_onSaveRequest(ev){if(this.__willReload){ev.stopPropagation();return;}}});function _getLastPreFilterLayerElement($el){const $bgVideo=$el.find('> .o_bg_video_container');if($bgVideo.length){return $bgVideo[0];}
const $parallaxEl=$el.find('> .s_parallax_bg');if($parallaxEl.length){return $parallaxEl[0];}
return null;}
options.registry.BackgroundToggler.include({toggleBgVideo(previewMode,widgetValue,params){if(!widgetValue){this.$target.find('> .o_we_bg_filter').remove();const[bgVideoWidget]=this._requestUserValueWidgets('bg_video_opt');const bgVideoOpt=bgVideoWidget.getParent();return bgVideoOpt._setBgVideo(false,'');}else{this._requestUserValueWidgets('bg_video_opt')[0].el.click();}},_computeWidgetState(methodName,params){if(methodName==='toggleBgVideo'){return this.$target[0].classList.contains('o_background_video');}
return this._super(...arguments);},_getLastPreFilterLayerElement(){const el=_getLastPreFilterLayerElement(this.$target);if(el){return el;}
return this._super(...arguments);},});options.registry.BackgroundShape.include({_getLastPreShapeLayerElement(){const el=this._super(...arguments);if(el){return el;}
return _getLastPreFilterLayerElement(this.$target);},_removeShapeEl(shapeEl){this.trigger_up('widgets_stop_request',{$target:$(shapeEl),});return this._super(...arguments);},});options.registry.ReplaceMedia.include({setAnchor(previewMode,widgetValue,params){const linkEl=this.$target[0].parentElement;let url=linkEl.getAttribute('href');url=url.split('#')[0];linkEl.setAttribute('href',url+widgetValue);},_computeWidgetState(methodName,params){if(methodName==='setAnchor'){const parentEl=this.$target[0].parentElement;if(parentEl.tagName==='A'){const href=parentEl.getAttribute('href')||'';return href?`#${href.split('#')[1]}`:'';}
return'';}
return this._super(...arguments);},async _computeWidgetVisibility(widgetName,params){if(widgetName==='media_link_anchor_opt'){const parentEl=this.$target[0].parentElement;const linkEl=parentEl.tagName==='A'?parentEl:null;const href=linkEl?linkEl.getAttribute('href'):false;return href&&href.startsWith('/');}
return this._super(...arguments);},async _renderCustomXML(uiFragment){if(!this.options.isWebsite){return this._super(...arguments);}
await this._super(...arguments);const oldURLWidgetEl=uiFragment.querySelector('[data-name="media_url_opt"]');const URLWidgetEl=document.createElement('we-urlpicker');for(const{name,value}of oldURLWidgetEl.attributes){URLWidgetEl.setAttribute(name,value);}
URLWidgetEl.title=_t("Hint: Type '/' to search an existing page and '#' to link to an anchor.");oldURLWidgetEl.replaceWith(URLWidgetEl);const hrefValue=this.$target[0].parentElement.getAttribute('href');if(!hrefValue||!hrefValue.startsWith('/')){return;}
const urlWithoutAnchor=hrefValue.split('#')[0];const selectEl=document.createElement('we-select');selectEl.dataset.name='media_link_anchor_opt';selectEl.dataset.dependencies='media_url_opt';selectEl.dataset.noPreview='true';selectEl.classList.add('o_we_sublevel_1');selectEl.setAttribute('string',_t("Page Anchor"));const anchors=await wUtils.loadAnchors(urlWithoutAnchor);for(const anchor of anchors){const weButtonEl=document.createElement('we-button');weButtonEl.dataset.setAnchor=anchor;weButtonEl.textContent=anchor;selectEl.append(weButtonEl);}
URLWidgetEl.after(selectEl);},});options.registry.BackgroundVideo=options.Class.extend({background:function(previewMode,widgetValue,params){if(previewMode==='reset'&&this.videoSrc){return this._setBgVideo(false,this.videoSrc);}
return this._setBgVideo(previewMode,widgetValue);},_computeWidgetState:function(methodName,params){if(methodName==='background'){if(this.$target[0].classList.contains('o_background_video')){return this.$('> .o_bg_video_container iframe').attr('src');}
return'';}
return this._super(...arguments);},_setBgVideo:async function(previewMode,value){this.$('> .o_bg_video_container').toggleClass('d-none',previewMode===true);if(previewMode!==false){return;}
this.videoSrc=value;var target=this.$target[0];target.classList.toggle('o_background_video',!!(value&&value.length));if(value&&value.length){target.dataset.bgVideoSrc=value;}else{delete target.dataset.bgVideoSrc;}
await this._refreshPublicWidgets();},});options.registry.OptionsTab=options.Class.extend({GRAY_PARAMS:{EXTRA_SATURATION:"gray-extra-saturation",HUE:"gray-hue"},init(){this._super(...arguments);this.grayParams={};this.grays={};this.orm=this.bindService("orm");},async updateUI(){const ownerDocument=this.$target[0].ownerDocument;const style=ownerDocument.defaultView.getComputedStyle(ownerDocument.documentElement);const grayPreviewEls=this.$el.find(".o_we_gray_preview span");for(const e of grayPreviewEls){const bgValue=weUtils.getCSSVariableValue(e.getAttribute('variable'),style);e.style.setProperty("background-color",bgValue,"important");}
const hues=[];const saturationDiffs=[];let oneHasNoSaturation=false;const baseStyle=getComputedStyle(document.documentElement);for(let id=100;id<=900;id+=100){const gray=weUtils.getCSSVariableValue(`${id}`,style);const grayRGB=convertCSSColorToRgba(gray);const grayHSL=convertRgbToHsl(grayRGB.red,grayRGB.green,grayRGB.blue);const baseGray=weUtils.getCSSVariableValue(`base-${id}`,baseStyle);const baseGrayRGB=convertCSSColorToRgba(baseGray);const baseGrayHSL=convertRgbToHsl(baseGrayRGB.red,baseGrayRGB.green,baseGrayRGB.blue);if(grayHSL.saturation>0.01){if(grayHSL.lightness>0.01&&grayHSL.lightness<99.99){hues.push(grayHSL.hue);}
if(grayHSL.saturation<99.99){saturationDiffs.push(grayHSL.saturation-baseGrayHSL.saturation);}}else{oneHasNoSaturation=true;}}
this.grayHueIsDefined=!!hues.length;this.grayParams[this.GRAY_PARAMS.HUE]=(!hues.length)?0:Math.round((Math.atan2(hues.map(hue=>Math.sin(hue*Math.PI/180)).reduce((memo,value)=>memo+value,0)/hues.length,hues.map(hue=>Math.cos(hue*Math.PI/180)).reduce((memo,value)=>memo+value,0)/hues.length)*180/Math.PI)+360)%360;this.grayParams[this.GRAY_PARAMS.EXTRA_SATURATION]=saturationDiffs.length?saturationDiffs.reduce((memo,value)=>memo+value,0)/saturationDiffs.length:(oneHasNoSaturation?-100:100);await this._super(...arguments);},async customizeGray(previewMode,widgetValue,params){this.grayParams[params.param]=parseInt(widgetValue);for(let i=1;i<10;i++){const key=(100*i).toString();this.grays[key]=this._buildGray(key);}
this.$el.find(".o_we_gray_preview").each((_,e)=>{e.style.setProperty("background-color",this.grays[e.getAttribute('variable')],"important");});await this._customizeWebsite(previewMode,undefined,Object.assign({},params,{customCustomization:()=>{return this._customizeWebsiteColors(this.grays,Object.assign({},params,{colorType:'gray',}));},}));},async configureApiKey(previewMode,widgetValue,params){return new Promise(resolve=>{this.trigger_up('gmap_api_key_request',{editableMode:true,reconfigure:true,onSuccess:()=>resolve(),});});},async customizeBodyBgType(previewMode,widgetValue,params){if(widgetValue==='NONE'){this.bodyImageType='image';return this.customizeBodyBg(previewMode,'',params);}
this.bodyImageType=widgetValue;const widget=this._requestUserValueWidgets(params.imagepicker)[0];widget.enable();},async customizeBodyBg(previewMode,widgetValue,params){await this._customizeWebsiteVariables({'body-image-type':this.bodyImageType,'body-image':widgetValue?`'${widgetValue}'`:'',},params.nullValue);},async openCustomCodeDialog(previewMode,widgetValue,params){return new Promise(resolve=>{this.trigger_up('open_edit_head_body_dialog',{onSuccess:resolve,});});},async switchTheme(previewMode,widgetValue,params){const save=await new Promise(resolve=>{this.dialog.add(ConfirmationDialog,{body:_t("Changing theme requires to leave the editor. This will save all your changes, are you sure you want to proceed? Be careful that changing the theme will reset all your color customizations."),confirm:()=>resolve(true),cancel:()=>resolve(false),});});if(!save){return;}
this.trigger_up('request_save',{reload:false,action:'website.theme_install_kanban_action',});},async addLanguage(previewMode,widgetValue,params){const websiteId=this.options.context.website_id;const save=await new Promise((resolve)=>{this.dialog.add(ConfirmationDialog,{body:_t("Adding a language requires to leave the editor. This will save all your changes, are you sure you want to proceed?"),confirm:()=>resolve(true),cancel:()=>resolve(false),});});if(!save){return;}
this.trigger_up("request_save",{reload:false,action:"base.action_view_base_language_install",options:{additionalContext:{params:{website_id:websiteId,url_return:"[lang]",}},}});},async customizeButtonStyle(previewMode,widgetValue,params){await this._customizeWebsiteVariables({[`btn-${params.button}-outline`]:widgetValue==='outline',[`btn-${params.button}-flat`]:widgetValue==='flat',},params.nullValue);},_buildGray(id){const gray=weUtils.getCSSVariableValue(`base-${id}`,getComputedStyle(document.documentElement));const grayRGB=convertCSSColorToRgba(gray);const hsl=convertRgbToHsl(grayRGB.red,grayRGB.green,grayRGB.blue);const adjustedGrayRGB=convertHslToRgb(this.grayParams[this.GRAY_PARAMS.HUE],Math.min(Math.max(hsl.saturation+this.grayParams[this.GRAY_PARAMS.EXTRA_SATURATION],0),100),hsl.lightness);return convertRgbaToCSSColor(adjustedGrayRGB.red,adjustedGrayRGB.green,adjustedGrayRGB.blue);},async _renderCustomXML(uiFragment){await this._super(...arguments);const extraSaturationRangeEl=uiFragment.querySelector(`we-range[data-param=${this.GRAY_PARAMS.EXTRA_SATURATION}]`);if(extraSaturationRangeEl){const baseGrays=range(100,1000,100).map(id=>{const gray=weUtils.getCSSVariableValue(`base-${id}`);const grayRGB=convertCSSColorToRgba(gray);const hsl=convertRgbToHsl(grayRGB.red,grayRGB.green,grayRGB.blue);return{id:id,hsl:hsl};});const first=baseGrays[0];const maxValue=baseGrays.reduce((gray,value)=>{return gray.hsl.saturation>value.hsl.saturation?gray:value;},first);const minValue=baseGrays.reduce((gray,value)=>{return gray.hsl.saturation<value.hsl.saturation?gray:value;},first);extraSaturationRangeEl.dataset.max=100-minValue.hsl.saturation;extraSaturationRangeEl.dataset.min=-maxValue.hsl.saturation;}},async _checkIfWidgetsUpdateNeedWarning(widgets){const warningMessage=await this._super(...arguments);if(warningMessage){return warningMessage;}
for(const widget of widgets){if(widget.getMethodsNames().includes('customizeWebsiteVariable')&&widget.getMethodsParams('customizeWebsiteVariable').variable==='color-palettes-name'){const hasCustomizedColors=weUtils.getCSSVariableValue('has-customized-colors');if(hasCustomizedColors&&hasCustomizedColors!=='false'){return _t("Changing the color palette will reset all your color customizations, are you sure you want to proceed?");}}}
return'';},async _computeWidgetState(methodName,params){if(methodName==='customizeBodyBgType'){const bgImage=getComputedStyle(this.ownerDocument.querySelector('#wrapwrap'))['background-image'];if(bgImage==='none'){return"NONE";}
return weUtils.getCSSVariableValue('body-image-type');}
if(methodName==='customizeGray'){return this.grayParams[params.param];}
if(methodName==='customizeButtonStyle'){const isOutline=weUtils.getCSSVariableValue(`btn-${params.button}-outline`);const isFlat=weUtils.getCSSVariableValue(`btn-${params.button}-flat`);return isFlat==="'True'"?'flat':isOutline==="'True'"?'outline':'fill';}
return this._super(...arguments);},async _computeWidgetVisibility(widgetName,params){if(widgetName==='body_bg_image_opt'){return false;}
if(params.param===this.GRAY_PARAMS.HUE){return this.grayHueIsDefined;}
if(params.removeFont){const font=await this._computeWidgetState('customizeWebsiteVariable',{variable:params.removeFont,});return!!font;}
return this._super(...arguments);},});options.registry.ThemeColors=options.registry.OptionsTab.extend({async start(){const style=window.getComputedStyle(this.$target[0].ownerDocument.documentElement);const supportOldColorSystem=weUtils.getCSSVariableValue('support-13-0-color-system',style)==='true';const hasCustomizedOldColorSystem=weUtils.getCSSVariableValue('has-customized-13-0-color-system',style)==='true';this._showOldColorSystemWarning=supportOldColorSystem&&hasCustomizedOldColorSystem;return this._super(...arguments);},async updateUIVisibility(){await this._super(...arguments);const oldColorSystemEl=this.el.querySelector('.o_old_color_system_warning');oldColorSystemEl.classList.toggle('d-none',!this._showOldColorSystemWarning);},async _renderCustomXML(uiFragment){const paletteSelectorEl=uiFragment.querySelector('[data-variable="color-palettes-name"]');const style=window.getComputedStyle(document.documentElement);const allPaletteNames=weUtils.getCSSVariableValue('palette-names',style).split(', ').map((name)=>{return name.replace(/'/g,"");});for(const paletteName of allPaletteNames){const btnEl=document.createElement('we-button');btnEl.classList.add('o_palette_color_preview_button');btnEl.dataset.customizeWebsiteVariable=`'${paletteName}'`;[1,3,2].forEach(c=>{const colorPreviewEl=document.createElement('span');colorPreviewEl.classList.add('o_palette_color_preview');const color=weUtils.getCSSVariableValue(`o-palette-${paletteName}-o-color-${c}`,style);colorPreviewEl.style.backgroundColor=color;btnEl.appendChild(colorPreviewEl);});paletteSelectorEl.appendChild(btnEl);}
const presetCollapseEl=uiFragment.querySelector('we-collapse.o_we_theme_presets_collapse');let ccPreviewEls=[];for(let i=1;i<=5;i++){const collapseEl=document.createElement('we-collapse');const ccPreviewEl=$(renderToElement('web_editor.color.combination.preview.legacy'))[0];ccPreviewEl.classList.add('text-center',`o_cc${i}`,'o_colored_level','o_we_collapse_toggler');collapseEl.appendChild(ccPreviewEl);collapseEl.appendChild(renderToFragment('website.color_combination_edition',{number:i}));ccPreviewEls.push(ccPreviewEl);presetCollapseEl.appendChild(collapseEl);}
await this._super(...arguments);},});options.registry.menu_data=options.Class.extend({init(){this._super(...arguments);this.user=this.bindService("user");this.orm=this.bindService("orm");this.notification=this.bindService("notification");},start:function(){const wysiwyg=$(this.ownerDocument.getElementById('wrapwrap')).data('wysiwyg');const popoverContainer=this.ownerDocument.getElementById('oe_manipulators');NavbarLinkPopoverWidget.createFor({target:this.$target[0],wysiwyg,container:popoverContainer,notify:this.notification.add,checkIsWebsiteDesigner:()=>this.user.hasGroup("website.group_website_designer"),onEditLinkClick:(widget)=>{var $menu=widget.$target.find('[data-oe-id]');this.trigger_up('menu_dialog',{name:$menu.text(),url:$menu.parent().attr('href'),save:(name,url)=>{let websiteId;this.trigger_up('context_get',{callback:ctx=>websiteId=ctx['website_id'],});const data={id:$menu.data('oe-id'),name,url,};return this.orm.call("website.menu","save",[websiteId,{'data':[data]}]).then(function(){widget.wysiwyg.odooEditor.observerUnactive();widget.$target.attr('href',url);$menu.text(name);widget.wysiwyg.odooEditor.observerActive();});},});widget.popover.hide();},onEditMenuClick:(widget)=>{const contentMenu=widget.target.closest('[data-content_menu_id]');const rootID=contentMenu?parseInt(contentMenu.dataset.content_menu_id,10):undefined;this.trigger_up('action_demand',{actionName:'edit_menu',params:[rootID],});},});return this._super(...arguments);},onBlur:function(){this.$target.popover('hide');},});options.registry.Carousel=options.registry.CarouselHandler.extend({start:function(){this.$bsTarget.carousel('pause');this.$indicators=this.$target.find('.carousel-indicators');this.$controls=this.$target.find('.carousel-control-prev, .carousel-control-next, .carousel-indicators');this.$controls.addClass('o_we_no_overlay');let _slideTimestamp;this.$bsTarget.on('slide.bs.carousel.carousel_option',()=>{_slideTimestamp=window.performance.now();setTimeout(()=>this.trigger_up('hide_overlay'));});this.$bsTarget.on('slid.bs.carousel.carousel_option',()=>{const _slideDuration=(window.performance.now()-_slideTimestamp);setTimeout(()=>{this.trigger_up('activate_snippet',{$snippet:this.$target.find('.carousel-item.active'),ifInactiveOptions:true,});this.$bsTarget.trigger('active_slide_targeted');},0.2*_slideDuration);});return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);this.$bsTarget.off('.carousel_option');},onBuilt:function(){this._assignUniqueID();},onClone:function(){this._assignUniqueID();},cleanForSave:function(){const $items=this.$target.find('.carousel-item');$items.removeClass('next prev left right active').first().addClass('active');this.$indicators.find('li').removeClass('active').empty().first().addClass('active');},notify:function(name,data){this._super(...arguments);if(name==='add_slide'){this._addSlide();}},addSlide(previewMode,widgetValue,params){this._addSlide();},_assignUniqueID:function(){const id='myCarousel'+Date.now();this.$target.attr('id',id);this.$target.find('[data-bs-target]').attr('data-bs-target','#'+id);this.$target.find('[data-bs-slide], [data-bs-slide-to]').toArray().forEach((el)=>{var $el=$(el);if($el.attr('data-bs-target')){$el.attr('data-bs-target','#'+id);}else if($el.attr('href')){$el.attr('href','#'+id);}});},_addSlide(){const $items=this.$target.find('.carousel-item');this.$controls.removeClass('d-none');const $active=$items.filter('.active');this.$indicators.append($('<li>',{'data-bs-target':'#'+this.$target.attr('id'),'data-bs-slide-to':$items.length,}));this.$indicators.append(' ');$active.clone(false).removeClass('active').insertAfter($active);this.$bsTarget.carousel('next');},_getItemsGallery(){return Array.from(this.$target[0].querySelectorAll(".carousel-item"));},_reorderItems(itemsEls,newItemPosition){const carouselInnerEl=this.$target[0].querySelector(".carousel-inner");carouselInnerEl.replaceChildren();for(const itemsEl of itemsEls){carouselInnerEl.append(itemsEl);}
this._updateIndicatorAndActivateSnippet(newItemPosition);},});options.registry.CarouselItem=options.Class.extend({isTopOption:true,forceNoDeleteButton:true,start:function(){this.$carousel=this.$bsTarget.closest('.carousel');this.$indicators=this.$carousel.find('.carousel-indicators');this.$controls=this.$carousel.find('.carousel-control-prev, .carousel-control-next, .carousel-indicators');var leftPanelEl=this.$overlay.data('$optionsSection')[0];var titleTextEl=leftPanelEl.querySelector('we-title > span');this.counterEl=document.createElement('span');titleTextEl.appendChild(this.counterEl);return this._super(...arguments);},destroy:function(){this._super(...arguments);this.$carousel.off('.carousel_item_option');},updateUI:async function(){await this._super(...arguments);const $items=this.$carousel.find('.carousel-item');const $activeSlide=$items.filter('.active');const updatedText=` (${$activeSlide.index() + 1}/${$items.length})`;this.counterEl.textContent=updatedText;},addSlideItem(previewMode,widgetValue,params){this.trigger_up('option_update',{optionName:'Carousel',name:'add_slide',});},removeSlide:function(previewMode){const $items=this.$carousel.find('.carousel-item');const newLength=$items.length-1;if(!this.removing&&newLength>0){const $toDelete=$items.filter('.active').add(this.$indicators.find('.active'));this.$carousel.one('active_slide_targeted.carousel_item_option',()=>{$toDelete.remove();const indicatorsEls=this.$indicators[0].querySelectorAll('li');for(let i=0;i<indicatorsEls.length;i++){indicatorsEls[i].setAttribute('data-bs-slide-to',i);}
this.$controls.toggleClass('d-none',newLength===1);this.$carousel.trigger('content_changed');this.removing=false;});this.removing=true;this.$carousel.carousel('prev');}},switchToSlide:function(previewMode,widgetValue,params){switch(widgetValue){case'left':this.$controls.filter('.carousel-control-prev')[0].click();break;case'right':this.$controls.filter('.carousel-control-next')[0].click();break;}},});options.registry.Parallax=options.Class.extend({async start(){this.parallaxEl=this.$target.find('> .s_parallax_bg')[0]||null;this._updateBackgroundOptions();this.$target.on('content_changed.ParallaxOption',this._onExternalUpdate.bind(this));return this._super(...arguments);},onFocus(){if(this.parallaxEl){this._refreshPublicWidgets();}},onMove(){this._refreshPublicWidgets();},destroy(){this._super(...arguments);this.$target.off('.ParallaxOption');},async selectDataAttribute(previewMode,widgetValue,params){await this._super(...arguments);if(params.attributeName!=='scrollBackgroundRatio'){return;}
const isParallax=(widgetValue!=='0');this.$target.toggleClass('parallax',isParallax);this.$target.toggleClass('s_parallax_is_fixed',widgetValue==='1');this.$target.toggleClass('s_parallax_no_overflow_hidden',(widgetValue==='0'||widgetValue==='1'));if(isParallax){if(!this.parallaxEl){this.parallaxEl=document.createElement('span');this.parallaxEl.classList.add('s_parallax_bg');this.$target.prepend(this.parallaxEl);}}else{if(this.parallaxEl){this.parallaxEl.remove();this.parallaxEl=null;}}
this._updateBackgroundOptions();},async _computeVisibility(widgetName){return!this.$target.hasClass('o_background_video');},async _computeWidgetState(methodName,params){if(methodName==='selectDataAttribute'&&params.parallaxTypeOpt){const attrName=params.attributeName;const attrValue=(this.$target[0].dataset[attrName]||params.attributeDefaultValue).trim();switch(attrValue){case'0':case'1':{return attrValue;}
default:{return(attrValue.startsWith('-')?'-1.5':'1.5');}}}
return this._super(...arguments);},_updateBackgroundOptions(){this.trigger_up('option_update',{optionNames:['BackgroundImage','BackgroundPosition','BackgroundOptimize'],name:'target',data:this.parallaxEl?$(this.parallaxEl):this.$target,});},_onExternalUpdate(ev){if(!this.parallaxEl){return;}
const bgImage=this.parallaxEl.style.backgroundImage;if(!bgImage||bgImage==='none'||this.$target.hasClass('o_background_video')){const widget=this._requestUserValueWidgets('parallax_none_opt')[0];widget.enable();widget.getParent().close();}},});options.registry.collapse=options.Class.extend({start:function(){var self=this;this.$bsTarget.on('shown.bs.collapse hidden.bs.collapse','[role="tabpanel"]',function(){self.trigger_up('cover_update');self.$target.trigger('content_changed');});return this._super.apply(this,arguments);},onBuilt:function(){this._createIDs();},onClone:function(){this._createIDs();},onMove:function(){this._createIDs();var $panel=this.$bsTarget.find('.collapse').removeData('bs.collapse');if($panel.attr('aria-expanded')==='true'){$panel.closest('.accordion').find('.collapse[aria-expanded="true"]').filter((i,el)=>(el!==$panel[0])).collapse('hide').one('hidden.bs.collapse',function(){$panel.trigger('shown.bs.collapse');});}},_createIDs:function(){let time=new Date().getTime();const $tablist=this.$target.closest('[role="tablist"]');const $tab=this.$target.find('[role="tab"]');const $panel=this.$target.find('[role="tabpanel"]');const $body=this.$target.closest('body');const setUniqueId=($elem,label)=>{let elemId=$elem.attr('id');if(!elemId||$body.find('[id="'+elemId+'"]').length>1){do{time++;elemId=label+time;}while($body.find('#'+elemId).length);$elem.attr('id',elemId);}
return elemId;};const tablistId=setUniqueId($tablist,'myCollapse');$panel.attr('data-bs-parent','#'+tablistId);$panel.data('bs-parent','#'+tablistId);const panelId=setUniqueId($panel,'myCollapseTab');$tab.attr('data-bs-target','#'+panelId);$tab.data('bs-target','#'+panelId);$tab[0].setAttribute("aria-controls",panelId);},});options.registry.WebsiteLevelColor=options.Class.extend({specialCheckAndReloadMethodsNames:options.Class.prototype.specialCheckAndReloadMethodsNames.concat(['customizeWebsiteLayer2Color']),init(){this._super(...arguments);this._rpc=options.serviceCached(this.bindService("rpc"));},async customizeWebsiteLayer2Color(previewMode,widgetValue,params){if(previewMode){return;}
params.color=params.layerColor;params.variable=params.layerGradient;let color=undefined;let gradient=undefined;if(weUtils.isColorGradient(widgetValue)){color='';gradient=widgetValue;}else{color=widgetValue;gradient='';}
await this.customizeWebsiteVariable(previewMode,gradient,params);params.noBundleReload=false;return this.customizeWebsiteColor(previewMode,color,params);},async _computeWidgetState(methodName,params){if(methodName==='customizeWebsiteLayer2Color'){params.variable=params.layerGradient;const gradient=await this._computeWidgetState('customizeWebsiteVariable',params);if(gradient){return gradient.substring(1,gradient.length-1);}
params.color=params.layerColor;return this._computeWidgetState('customizeWebsiteColor',params);}
return this._super(...arguments);},async _computeWidgetVisibility(widgetName,params){const _super=this._super.bind(this);if(["footer_language_selector_label_opt","footer_language_selector_opt",].includes(widgetName)){this._languages=await this._rpc.call("/website/get_languages");if(this._languages.length===1){return false;}}
return _super(...arguments);},});options.registry.HeaderLayout=options.registry.WebsiteLevelColor.extend({});options.registry.HeaderElements=options.Class.extend({init(){this._super(...arguments);this._rpc=options.serviceCached(this.bindService("rpc"));},async _computeWidgetVisibility(widgetName,params){const _super=this._super.bind(this);switch(widgetName){case"header_language_selector_opt":this._languages=await this._rpc.call("/website/get_languages");if(this._languages.length===1){return false;}
break;}
return _super(...arguments);},});options.registry.HeaderNavbar=options.Class.extend({init(){this._super(...arguments);this.setTarget(this.$target.closest('#wrapwrap > header'));},async _computeWidgetVisibility(widgetName,params){switch(widgetName){case'option_logo_height_scrolled':{return!!this.$('.navbar-brand').length;}}
return this._super(...arguments);},});const VisibilityPageOptionUpdate=options.Class.extend({pageOptionName:undefined,showOptionWidgetName:undefined,shownValue:'',async onTargetShow(){if(await this._isShown()){return;}
const widget=this._requestUserValueWidgets(this.showOptionWidgetName)[0];widget.enable();},async visibility(previewMode,widgetValue,params){const show=(widgetValue!=='hidden');await new Promise((resolve,reject)=>{this.trigger_up('action_demand',{actionName:'toggle_page_option',params:[{name:this.pageOptionName,value:show}],onSuccess:()=>resolve(),onFailure:reject,});});this.trigger_up('snippet_option_visibility_update',{show:show});},async _computeWidgetState(methodName,params){if(methodName==='visibility'){const shown=await this._isShown();return shown?this.shownValue:'hidden';}
return this._super(...arguments);},async _isShown(){return new Promise((resolve,reject)=>{this.trigger_up('action_demand',{actionName:'get_page_option',params:[this.pageOptionName],onSuccess:v=>resolve(!!v),onFailure:reject,});});},});options.registry.TopMenuVisibility=VisibilityPageOptionUpdate.extend({pageOptionName:'header_visible',showOptionWidgetName:'regular_header_visibility_opt',async visibility(previewMode,widgetValue,params){await this._super(...arguments);await this._changeVisibility(widgetValue);const targetWindow=this.$target[0].ownerDocument.defaultView;targetWindow.dispatchEvent(new targetWindow.Event('resize'));},async _changeVisibility(widgetValue){const show=(widgetValue!=='hidden');if(!show){return;}
const transparent=(widgetValue==='transparent');await new Promise((resolve,reject)=>{this.trigger_up('action_demand',{actionName:'toggle_page_option',params:[{name:'header_overlay',value:transparent}],onSuccess:()=>resolve(),onFailure:reject,});});if(!transparent){return;}
await new Promise((resolve,reject)=>{this.trigger_up('action_demand',{actionName:'toggle_page_option',params:[{name:'header_color',value:''}],onSuccess:()=>resolve(),onFailure:reject,});});await new Promise(resolve=>{this.trigger_up('action_demand',{actionName:'toggle_page_option',params:[{name:'header_text_color',value:''}],onSuccess:()=>resolve(),});});},async _computeWidgetState(methodName,params){const _super=this._super.bind(this);if(methodName==='visibility'){this.shownValue=await new Promise((resolve,reject)=>{this.trigger_up('action_demand',{actionName:'get_page_option',params:['header_overlay'],onSuccess:v=>resolve(v?'transparent':'regular'),onFailure:reject,});});}
return _super(...arguments);},});options.registry.topMenuColor=options.Class.extend({async selectStyle(previewMode,widgetValue,params){await this._super(...arguments);if(widgetValue&&!isCSSColor(widgetValue)){widgetValue=params.colorPrefix+widgetValue;}
await new Promise((resolve,reject)=>{this.trigger_up('action_demand',{actionName:'toggle_page_option',params:[{name:params.pageOptionName,value:widgetValue}],onSuccess:resolve,onFailure:reject,});});},_computeVisibility:async function(){const show=await this._super(...arguments);if(!show){return false;}
return new Promise((resolve,reject)=>{this.trigger_up('action_demand',{actionName:'get_page_option',params:['header_overlay'],onSuccess:value=>resolve(!!value),onFailure:reject,});});},});options.registry.DeviceVisibility=options.Class.extend({async toggleDeviceVisibility(previewMode,widgetValue,params){this.$target[0].classList.remove('d-none','d-md-none','d-lg-none','o_snippet_mobile_invisible','o_snippet_desktop_invisible','o_snippet_override_invisible',);const style=getComputedStyle(this.$target[0]);this.$target[0].classList.remove(`d-md-${style['display']}`,`d-lg-${style['display']}`);if(widgetValue==='no_desktop'){this.$target[0].classList.add('d-lg-none','o_snippet_desktop_invisible');}else if(widgetValue==='no_mobile'){this.$target[0].classList.add(`d-lg-${style['display']}`,'d-none','o_snippet_mobile_invisible');}
const isMobile=wUtils.isMobile(this);this.trigger_up('snippet_option_visibility_update',{show:widgetValue!==(isMobile?'no_mobile':'no_desktop')});},async onTargetHide(){this.$target[0].classList.remove('o_snippet_override_invisible');},async onTargetShow(){const isMobilePreview=weUtils.isMobileView(this.$target[0]);const isMobileHidden=this.$target[0].classList.contains("o_snippet_mobile_invisible");if((this.$target[0].classList.contains('o_snippet_mobile_invisible')||this.$target[0].classList.contains('o_snippet_desktop_invisible'))&&isMobilePreview===isMobileHidden){this.$target[0].classList.add('o_snippet_override_invisible');}},cleanForSave(){this.$target[0].classList.remove('o_snippet_override_invisible');},async _computeWidgetState(methodName,params){if(methodName==='toggleDeviceVisibility'){const classList=[...this.$target[0].classList];if(classList.includes('d-none')&&classList.some(className=>className.match(/^d-(md|lg)-/))){return'no_mobile';}
if(classList.some(className=>className.match(/d-(md|lg)-none/))){return'no_desktop';}
return'';}
return await this._super(...arguments);},_computeWidgetVisibility(widgetName,params){if(this.$target[0].classList.contains('s_table_of_content_main')){return false;}
return this._super(...arguments);}});options.registry.HideFooter=VisibilityPageOptionUpdate.extend({pageOptionName:'footer_visible',showOptionWidgetName:'hide_footer_page_opt',shownValue:'shown',});options.registry.anchor=options.Class.extend({isTopOption:true,init(){this._super(...arguments);this.notification=this.bindService("notification");},start(){const buttonEl=this.el.querySelector("we-button");this.isModal=this.$target[0].classList.contains("modal");if(buttonEl&&!this.isModal){this._buildClipboard(buttonEl);}
return this._super(...arguments);},onClone:function(){this.$target.removeAttr('data-anchor');this.$target.filter(':not(.carousel)').removeAttr('id');},notify(name,data){this._super(...arguments);if(name==="modalAnchor"){this._buildClipboard(data.buttonEl);}},_buildClipboard(buttonEl){buttonEl.addEventListener("click",async(ev)=>{const anchorLink=this._getAnchorLink();await browser.navigator.clipboard.writeText(anchorLink);const message=markup(_t("Anchor copied to clipboard<br>Link: %s",anchorLink));this.notification.add(message,{type:"success",buttons:[{name:_t("Edit"),onClick:()=>this._openAnchorDialog(buttonEl),primary:true}],});});},_openAnchorDialog(buttonEl){const anchorDialog=class extends Component{static template="website.dialog.anchorName";static props={close:Function,confirm:Function,delete:Function,currentAnchor:String};static components={Dialog};title=_t("Link Anchor");modalRef=useChildRef();onClickConfirm(){const shouldClose=this.props.confirm(this.modalRef);if(shouldClose){this.props.close();}}
onClickDelete(){this.props.delete();this.props.close();}
onClickDiscard(){this.props.close();}};const props={confirm:(modalRef)=>{const inputEl=modalRef.el.querySelector(".o_input_anchor_name");const anchorName=this._text2Anchor(inputEl.value);if(this.$target[0].id===anchorName){return true;}
const alreadyExists=!!this.ownerDocument.getElementById(anchorName);modalRef.el.querySelector('.o_anchor_already_exists').classList.toggle('d-none',!alreadyExists);inputEl.classList.toggle('is-invalid',alreadyExists);if(!alreadyExists){this._setAnchorName(anchorName);buttonEl.click();return true;}},currentAnchor:decodeURIComponent(this.$target.attr('id')),};if(this.$target.attr('id')){props["delete"]=()=>{this._setAnchorName();};}
this.dialog.add(anchorDialog,props);},_setAnchorName:function(value){if(value){this.$target[0].id=value;if(!this.isModal){this.$target[0].dataset.anchor=true;}}else{this.$target.removeAttr('id data-anchor');}
this.$target.trigger('content_changed');},_getAnchorLink:function(){if(!this.$target[0].id){const $titles=this.$target.find('h1, h2, h3, h4, h5, h6');const title=$titles.length>0?$titles[0].innerText:this.data.snippetName;const anchorName=this._text2Anchor(title);let n='';while(this.ownerDocument.getElementById(anchorName+n)){n=(n||1)+1;}
this._setAnchorName(anchorName+n);}
const pathName=this.isModal?"":this.ownerDocument.location.pathname;return`${pathName}#${this.$target[0].id}`;},_text2Anchor:function(text){return encodeURIComponent(text.trim().replace(/\s+/g,'-'));},});options.registry.HeaderBox=options.registry.Box.extend({async selectStyle(previewMode,widgetValue,params){if((params.variable||params.color)&&['border-width','border-style','border-color','border-radius','box-shadow'].includes(params.cssProperty)){if(previewMode){return;}
if(params.cssProperty==='border-color'){return this.customizeWebsiteColor(previewMode,widgetValue,params);}
return this.customizeWebsiteVariable(previewMode,widgetValue,params);}
return this._super(...arguments);},async setShadow(previewMode,widgetValue,params){if(params.variable){if(previewMode){return;}
const defaultShadow=this._getDefaultShadow(widgetValue,params.shadowClass);return this.customizeWebsiteVariable(previewMode,defaultShadow,params);}
return this._super(...arguments);},async _computeWidgetState(methodName,params){const value=await this._super(...arguments);if(methodName==="selectStyle"&&params.cssProperty==="border-width"){return value.replace(/(^|\s)0px/gi,"").trim()||value;}
return value;},});options.registry.CookiesBar=options.registry.SnippetPopup.extend({selectLayout:function(previewMode,widgetValue,params){let websiteId;this.trigger_up('context_get',{callback:function(ctx){websiteId=ctx['website_id'];},});const $template=$(renderToElement(`website.cookies_bar.${widgetValue}`,{websiteId:websiteId,}));const $content=this.$target.find('.modal-content');const selectorsToKeep=['.o_cookies_bar_text_button','.o_cookies_bar_text_button_essential','.o_cookies_bar_text_title','.o_cookies_bar_text_primary','.o_cookies_bar_text_secondary','.o_cookies_bar_text_policy'];if(this.$savedSelectors===undefined){this.$savedSelectors=[];}
for(const selector of selectorsToKeep){const $currentLayoutEls=$content.find(selector).contents();const $newLayoutEl=$template.find(selector);if($currentLayoutEls.length){this.$savedSelectors[selector]=$currentLayoutEls;}
const $savedSelector=this.$savedSelectors[selector];if($newLayoutEl.length&&$savedSelector&&$savedSelector.length){$newLayoutEl.empty().append($savedSelector);}}
$content.empty().append($template);},});options.registry.CoverProperties=options.Class.extend({init:function(){this._super.apply(this,arguments);this.$image=this.$target.find('.o_record_cover_image');this.$filter=this.$target.find('.o_record_cover_filter');},start:function(){this.$filterValueOpts=this.$el.find('[data-filter-value]');return this._super.apply(this,arguments);},background:async function(previewMode,widgetValue,params){if(widgetValue===''){this.$image.css('background-image','');this.$target.removeClass('o_record_has_cover');}else{this.$image.css('background-image',`url('${widgetValue}')`);this.$target.addClass('o_record_has_cover');const $defaultSizeBtn=this.$el.find('.o_record_cover_opt_size_default');$defaultSizeBtn.click();$defaultSizeBtn.closest('we-select').click();}
if(!previewMode){this._updateSavingDataset();}},filterValue:function(previewMode,widgetValue,params){this.$filter.css('opacity',widgetValue||0);this.$filter.toggleClass('oe_black',parseFloat(widgetValue)!==0);if(!previewMode){this._updateSavingDataset();}},selectStyle:async function(previewMode,widgetValue,params){await this._super(...arguments);if(!previewMode){this._updateSavingDataset(widgetValue);}},selectClass:async function(previewMode,widgetValue,params){await this._super(...arguments);if(!previewMode){this._updateSavingDataset();}},_computeWidgetState:function(methodName,params){switch(methodName){case'filterValue':{return parseFloat(this.$filter.css('opacity')).toFixed(1);}
case'background':{const background=this.$image.css('background-image');if(background&&background!=='none'){return background.match(/^url\(["']?(.+?)["']?\)$/)[1];}
return'';}}
return this._super(...arguments);},_computeWidgetVisibility:function(widgetName,params){if(params.coverOptName){return this.$target.data(`use_${params.coverOptName}`)==='True';}
return this._super(...arguments);},_updateColorDataset(bgColorStyle='',bgColorClass=''){this.$target[0].dataset.bgColorStyle=bgColorStyle;this.$target[0].dataset.bgColorClass=bgColorClass;},_updateSavingDataset(colorValue){const[colorPickerWidget,sizeWidget,textAlignWidget]=this._requestUserValueWidgets('bg_color_opt','size_opt','text_align_opt');const sizeOptValues=sizeWidget.getMethodsParams('selectClass').possibleValues;let coverClass=[...this.$target[0].classList].filter(value=>sizeOptValues.includes(value)).join(' ');const bg=this.$image.css('background-image');if(bg&&bg!=='none'){coverClass+=" o_record_has_cover";}
const textAlignOptValues=textAlignWidget.getMethodsParams('selectClass').possibleValues;const textAlignClass=[...this.$target[0].classList].filter(value=>textAlignOptValues.includes(value)).join(' ');const filterEl=this.$target[0].querySelector('.o_record_cover_filter');const filterValue=filterEl&&filterEl.style.opacity;this.$target[0].dataset.coverClass=coverClass;this.$target[0].dataset.textAlignClass=textAlignClass;this.$target[0].dataset.filterValue=filterValue||0.0;const ccValue=colorPickerWidget._ccValue;const colorOrGradient=colorPickerWidget._value;const isGradient=weUtils.isColorGradient(colorOrGradient);const valueIsCSSColor=!isGradient&&isCSSColor(colorOrGradient);const colorNames=[];if(ccValue){colorNames.push(ccValue);}
if(colorOrGradient&&!isGradient&&!valueIsCSSColor){colorNames.push(colorOrGradient);}
const bgColorClass=weUtils.computeColorClasses(colorNames).join(' ');const bgColorStyle=valueIsCSSColor?`background-color: ${colorOrGradient};`:isGradient?`background-color: rgba(0, 0, 0, 0); background-image: ${colorOrGradient};`:'';this._updateColorDataset(bgColorStyle,bgColorClass);},});options.registry.ScrollButton=options.Class.extend({start:async function(){await this._super(...arguments);this.$button=this.$('.o_scroll_button');},async showScrollButton(previewMode,widgetValue,params){if(widgetValue){this.$button.show();}else{if(previewMode){this.$button.hide();}else{this.$button.detach();}}},toggleButton:function(previewMode,widgetValue,params){if(widgetValue){if(!this.$button.length){const anchor=document.createElement('a');anchor.classList.add('o_scroll_button','mb-3','rounded-circle','align-items-center','justify-content-center','mx-auto','bg-primary','o_not_editable',);anchor.href='#';anchor.contentEditable="false";anchor.title=_t("Scroll down to next section");const arrow=document.createElement('i');arrow.classList.add('fa','fa-angle-down','fa-3x');anchor.appendChild(arrow);this.$button=$(anchor);}
this.$target.append(this.$button);}else{this.$button.detach();}},async selectClass(previewMode,widgetValue,params){await this._super(...arguments);if(params.possibleValues.includes("o_half_screen_height")){if(widgetValue){this.$target[0].classList.replace("d-lg-block","d-lg-flex");}else if(this.$target[0].classList.contains("d-lg-flex")){this.$target[0].classList.remove("d-lg-flex");const sectionStyle=window.getComputedStyle(this.$target[0]);const hasDisplayFlex=sectionStyle.getPropertyValue("display")==="flex";this.$target[0].classList.add(hasDisplayFlex?"d-lg-flex":"d-lg-block");}}},_renderCustomXML(uiFragment){if(this.$target[0].dataset.snippet==='s_image_gallery'){const minHeightEl=uiFragment.querySelector('[data-name="minheight_auto_opt"]');minHeightEl.parentElement.setAttribute('string',_t("Min-Height"));}},_computeWidgetState:function(methodName,params){switch(methodName){case'toggleButton':return!!this.$button.parent().length;}
return this._super(...arguments);},_computeWidgetVisibility(widgetName,params){if(widgetName==='fixed_height_opt'){return(this.$target[0].dataset.snippet==='s_image_gallery');}
return this._super(...arguments);},});options.registry.ConditionalVisibility=options.registry.DeviceVisibility.extend({init(){this._super(...arguments);this.optionsAttributes=[];},async start(){await this._super(...arguments);for(const widget of this._userValueWidgets){const params=widget.getMethodsParams();if(params.saveAttribute){this.optionsAttributes.push({saveAttribute:params.saveAttribute,attributeName:params.attributeName,callWith:params.callWith||'value',});}}},async onTargetHide(){await this._super(...arguments);if(this.$target[0].classList.contains('o_snippet_invisible')){this.$target[0].classList.add('o_conditional_hidden');}},async onTargetShow(){await this._super(...arguments);this.$target[0].classList.remove('o_conditional_hidden');},cleanForSave(){},selectRecord(previewMode,widgetValue,params){const recordsData=JSON.parse(widgetValue);if(recordsData.length){this.$target[0].dataset[params.saveAttribute]=widgetValue;}else{delete this.$target[0].dataset[params.saveAttribute];}
this._updateCSSSelectors();},selectValue(previewMode,widgetValue,params){if(widgetValue){const widgetValueIndex=params.possibleValues.indexOf(widgetValue);const value=[{value:widgetValue,id:widgetValueIndex}];this.$target[0].dataset[params.saveAttribute]=JSON.stringify(value);}else{delete this.$target[0].dataset[params.saveAttribute];}
this._updateCSSSelectors();},async selectDataAttribute(previewMode,widgetValue,params){await this._super(...arguments);if(params.attributeName==='visibility'){const targetEl=this.$target[0];if(widgetValue==='conditional'){const collapseEl=this.$el.children('we-collapse')[0];this._toggleCollapseEl(collapseEl);}else{delete targetEl.dataset.visibility;for(const attribute of this.optionsAttributes){delete targetEl.dataset[attribute.saveAttribute];delete targetEl.dataset[`${attribute.saveAttribute}Rule`];}}
this.trigger_up('snippet_option_visibility_update',{show:true});}else if(!params.isVisibilityCondition){return;}
this._updateCSSSelectors();},async _computeWidgetState(methodName,params){if(methodName==='selectRecord'){return this.$target[0].dataset[params.saveAttribute]||'[]';}
if(methodName==='selectValue'){const selectedValue=this.$target[0].dataset[params.saveAttribute];return selectedValue?JSON.parse(selectedValue)[0].value:params.attributeDefaultValue;}
return this._super(...arguments);},_updateCSSSelectors(){const visibilityIDParts=[];const onlyAttributes=[];const hideAttributes=[];const target=this.$target[0];for(const attribute of this.optionsAttributes){if(target.dataset[attribute.saveAttribute]){let records=JSON.parse(target.dataset[attribute.saveAttribute]).map(record=>{return{id:record.id,value:record[attribute.callWith]};});if(attribute.saveAttribute==='visibilityValueLang'){records=records.map(lang=>{lang.value=lang.value.replace(/_/g,'-');return lang;});}
const hideFor=target.dataset[`${attribute.saveAttribute}Rule`]==='hide';if(hideFor){hideAttributes.push({name:attribute.attributeName,records:records});}else{onlyAttributes.push({name:attribute.attributeName,records:records});}
const type=attribute.attributeName.replace('data-','');const valueIDs=records.map(record=>record.id).sort();visibilityIDParts.push(`${type}_${hideFor ? 'h' : 'o'}_${valueIDs.join('_')}`);}}
const visibilityId=visibilityIDParts.join('_');let selectors='';for(const attribute of onlyAttributes){const selector=attribute.records.reduce((acc,record)=>{return acc+=`:not([${attribute.name}="${record.value}"])`;},'html')+` body:not(.editor_enable) [data-visibility-id="${visibilityId}"]`;selectors+=selector+', ';}
for(const attribute of hideAttributes){const selector=attribute.records.reduce((acc,record,i,a)=>{acc+=`html[${attribute.name}="${record.value}"] body:not(.editor_enable) [data-visibility-id="${visibilityId}"]`;return acc+(i!==a.length-1?',':'');},'');selectors+=selector+', ';}
selectors=selectors.slice(0,-2);if(selectors){this.$target[0].dataset.visibilitySelectors=selectors;}else{delete this.$target[0].dataset.visibilitySelectors;}
if(visibilityId){this.$target[0].dataset.visibilityId=visibilityId;}else{delete this.$target[0].dataset.visibilityId;}},});options.registry.WebsiteAnimate=options.Class.extend({async start(){await this._super(...arguments);this.limitedAnimations=['o_anim_flash','o_anim_pulse','o_anim_shake','o_anim_tada','o_anim_flip_in_x','o_anim_flip_in_y'];this.isAnimatedText=this.$target.hasClass('o_animated_text');this.$optionsSection=this.$overlay.data('$optionsSection');this.$scrollingElement=$().getScrollingElement(this.ownerDocument);this.$overlay[0].querySelector(".o_handles").classList.toggle("pe-none",this.isAnimatedText);},async onBuilt(){this.$target[0].classList.toggle('o_animate_preview',this.$target[0].classList.contains('o_animate'));},onFocus(){if(this.isAnimatedText){this.options.wysiwyg.toolbarEl.append(this.$el[0]);this.$optionsSection.addClass('d-none');}},onBlur(){if(this.isAnimatedText){this.$optionsSection.append(this.$el);}},cleanForSave(){if(this.$target[0].closest('.o_animate')){this._toggleImagesLazyLoading(false);}},async selectClass(previewMode,widgetValue,params){await this._super(...arguments);if(params.forceAnimation&&params.name!=='o_anim_no_effect_opt'&&previewMode!=='reset'){this._forceAnimation();}
if(params.isAnimationTypeSelection){this.$target[0].classList.toggle("o_animate_preview",this.$target[0].classList.contains("o_animate"));}},async selectDataAttribute(previewMode,widgetValue,params){await this._super(...arguments);if(params.forceAnimation){this._forceAnimation();}},animationMode(previewMode,widgetValue,params){const targetClassList=this.$target[0].classList;this.$scrollingElement[0].classList.remove('o_wanim_overflow_xy_hidden');targetClassList.remove('o_animating','o_animate_both_scroll','o_visible','o_animated','o_animate_out');this.$target[0].style.animationDelay='';this.$target[0].style.animationPlayState='';this.$target[0].style.animationName='';this.$target[0].style.visibility='';if(widgetValue==='onScroll'){this.$target[0].dataset.scrollZoneStart=0;this.$target[0].dataset.scrollZoneEnd=100;}else{delete this.$target[0].dataset.scrollZoneStart;delete this.$target[0].dataset.scrollZoneEnd;}
if(params.activeValue==="o_animate_on_hover"){this.trigger_up("option_update",{optionName:"ImageTools",name:"disable_hover_effect",});}
if((!params.activeValue||params.activeValue==="o_animate_on_hover")&&widgetValue&&widgetValue!=="onHover"){targetClassList.add('o_anim_fade_in');this._toggleImagesLazyLoading(false);}
if(!widgetValue||widgetValue==="onHover"){const possibleEffects=this._requestUserValueWidgets('animation_effect_opt')[0].getMethodsParams('selectClass').possibleValues;const possibleDirections=this._requestUserValueWidgets('animation_direction_opt')[0].getMethodsParams('selectClass').possibleValues;const possibleEffectsAndDirections=possibleEffects.concat(possibleDirections);for(const targetClass of targetClassList.value.split(/\s+/g)){if(possibleEffectsAndDirections.indexOf(targetClass)>=0){targetClassList.remove(targetClass);}}
this.$target[0].style.setProperty('--wanim-intensity','');this.$target[0].style.animationDuration='';this._toggleImagesLazyLoading(true);}
if(widgetValue==="onHover"){this.options.wysiwyg.odooEditor.historyPauseSteps();this.trigger_up("option_update",{optionName:"ImageTools",name:"enable_hover_effect",});}},animationIntensity(previewMode,widgetValue,params){this.$target[0].style.setProperty('--wanim-intensity',widgetValue);this._forceAnimation();},async _forceAnimation(){this.$target.css('animation-name','dummy');if(this.$target[0].classList.contains('o_animate_on_scroll')){void this.$target[0].offsetWidth;this.$target.css('animation-name','');this.ownerDocument.defaultView.dispatchEvent(new Event('resize'));}else{await new Promise(resolve=>setTimeout(resolve));this.$target.addClass('o_animating');this.trigger_up('cover_update',{overlayVisible:true,});this.$scrollingElement[0].classList.add('o_wanim_overflow_xy_hidden');this.$target.css('animation-name','');this.$target.one('webkitAnimationEnd oanimationend msAnimationEnd animationend',()=>{this.$scrollingElement[0].classList.remove('o_wanim_overflow_xy_hidden');this.$target.removeClass('o_animating');});}},async _computeWidgetVisibility(widgetName,params){const hasAnimateClass=this.$target[0].classList.contains("o_animate");switch(widgetName){case'no_animation_opt':{return!this.isAnimatedText;}
case'animation_effect_opt':{return hasAnimateClass;}
case'animation_trigger_opt':{return!this.$target[0].closest('.dropdown');}
case'animation_on_scroll_opt':case'animation_direction_opt':{if(widgetName==="animation_direction_opt"&&!hasAnimateClass){return false;}
return!this.limitedAnimations.some(className=>this.$target[0].classList.contains(className));}
case'animation_intensity_opt':{if(!hasAnimateClass){return false;}
const possibleDirections=this._requestUserValueWidgets('animation_direction_opt')[0].getMethodsParams('selectClass').possibleValues;if(this.$target[0].classList.contains('o_anim_fade_in')){for(const targetClass of this.$target[0].classList){if(possibleDirections.indexOf(targetClass)>=0){return true;}}
return false;}
return true;}
case'animation_on_hover_opt':{const[hoverEffectOverlayWidget]=this._requestUserValueWidgets("hover_effect_overlay_opt");if(hoverEffectOverlayWidget){const hoverEffectWidget=hoverEffectOverlayWidget.getParent();const imageToolsOpt=hoverEffectWidget.getParent();return(imageToolsOpt._canHaveHoverEffect()&&imageToolsOpt._isImageSupportedForShapes()&&!await isImageCorsProtected(this.$target[0]));}
return false;}}
return this._super(...arguments);},_computeVisibility(methodName,params){if(this.$target[0].matches('img')){return isImageSupportedForStyle(this.$target[0]);}
return this._super(...arguments);},_computeWidgetState(methodName,params){if(methodName==='animationIntensity'){return window.getComputedStyle(this.$target[0]).getPropertyValue('--wanim-intensity');}
return this._super(...arguments);},_toggleImagesLazyLoading(lazy){const imgEls=this.$target[0].matches('img')?[this.$target[0]]:this.$target[0].querySelectorAll('img');for(const imgEl of imgEls){if(lazy){imgEl.removeAttribute('loading');}else{imgEl.loading='eager';}}},});options.registry.TextHighlight=options.Class.extend({custom_events:Object.assign({},options.Class.prototype.custom_events,{"user_value_widget_opening":"_onWidgetOpening",}),async start(){await this._super(...arguments);this.leftPanelEl=this.$overlay.data("$optionsSection")[0];this.$overlay[0].style.opacity="0.25";this.$overlay[0].querySelector(".o_handles").classList.add("pe-none");},onFocus(){this.options.wysiwyg.toolbarEl.append(this.$el[0]);},onBlur(){this.leftPanelEl.appendChild(this.el);},notify(name,data){if(name==="new_text_highlight"){this._autoAdaptHighlights();this._requestUserValueWidgets("text_highlight_opt")[0]?.enable();}
this._super(...arguments);},async setTextHighlight(previewMode,widgetValue,params){return widgetValue?this._addTextHighlight(widgetValue):removeTextHighlight(this.$target[0]);},_addTextHighlight(highlightID){const highlightEls=[...this.$target[0].querySelectorAll(".o_text_highlight_item svg")];if(highlightEls.length){highlightEls.forEach(svg=>{svg.after(drawTextHighlightSVG(svg.parentElement,highlightID));svg.remove();});}else{this._autoAdaptHighlights();}},_autoAdaptHighlights(){this.trigger_up("snippet_edition_request",{exec:async()=>await this._refreshPublicWidgets($(this.options.wysiwyg.odooEditor.editable))});},_onWidgetOpening(ev){const target=ev.target;if(target.getName()==="text_highlight_opt"&&!target.el.querySelector("svg")){const weToggler=target.el.querySelector("we-toggler");weToggler.classList.add("active");[...target.el.querySelectorAll("we-button[data-set-text-highlight] div")].forEach(weBtnEl=>{weBtnEl.textContent="Text";weBtnEl.append(drawTextHighlightSVG(weBtnEl,weBtnEl.parentElement.dataset.setTextHighlight));});}},});options.registry.MegaMenuLayout=options.registry.SelectTemplate.extend({init(){this._super(...arguments);this.selectTemplateWidgetName='mega_menu_template_opt';},notify(name,data){if(name==='reset_template'){const xmlid=this._getCurrentTemplateXMLID();this._getTemplate(xmlid).then(template=>{this.containerEl.insertAdjacentHTML('beforeend',template);data.onSuccess();});}else{this._super(...arguments);}},_computeWidgetState:function(methodName,params){if(methodName==='selectTemplate'){return this._getCurrentTemplateXMLID();}
return this._super(...arguments);},_getCurrentTemplateXMLID:function(){const templateDefiningClass=this.containerEl.querySelector('section').classList.value.split(' ').filter(cl=>cl.startsWith('s_mega_menu'))[0];return`website.${templateDefiningClass}`;},});options.registry.MegaMenuNoDelete=options.Class.extend({forceNoDeleteButton:true,async onRemove(){await new Promise(resolve=>{this.trigger_up('option_update',{optionName:'MegaMenuLayout',name:'reset_template',data:{onSuccess:()=>resolve(),}});});},});options.registry.sizing.include({start(){const defs=this._super(...arguments);const self=this;this.$handles.on('mousedown',function(ev){const $body=$(this.ownerDocument.body);if(!self.divEl){self.divEl=document.createElement('div');self.divEl.style.position='absolute';self.divEl.style.height='100%';self.divEl.style.width='100%';self.divEl.setAttribute('id','iframeEventOverlay');$body.append(self.divEl);}
const documentMouseUp=()=>{if(self.divEl){self.divEl.remove();self.divEl=undefined;}
$body.off('mouseup',documentMouseUp);};$body.on('mouseup',documentMouseUp);});return defs;},async updateUIVisibility(){await this._super(...arguments);const nonDraggableClasses=['s_table_of_content_navbar_wrap','s_table_of_content_main',];if(nonDraggableClasses.some(c=>this.$target[0].classList.contains(c))){const moveHandleEl=this.$overlay[0].querySelector('.o_move_handle');moveHandleEl.classList.add('d-none');}},});options.registry.SwitchableViews=options.Class.extend({async willStart(){const _super=this._super.bind(this);this.switchableRelatedViews=await new Promise((resolve,reject)=>{this.trigger_up('get_switchable_related_views',{onSuccess:resolve,onFailure:reject,});});return _super(...arguments);},_renderCustomXML(uiFragment){for(const view of this.switchableRelatedViews){const weCheckboxEl=document.createElement('we-checkbox');weCheckboxEl.setAttribute('string',view.name);weCheckboxEl.setAttribute('data-customize-website-views',view.key);weCheckboxEl.setAttribute('data-no-preview','true');weCheckboxEl.setAttribute('data-reload','/');uiFragment.appendChild(weCheckboxEl);}},_computeVisibility(){return!!this.switchableRelatedViews.length;},_checkIfWidgetsUpdateNeedReload(){return true;}});options.registry.GridImage=options.Class.extend({changeGridImageMode(previewMode,widgetValue,params){const imageGridItemEl=this._getImageGridItem();if(imageGridItemEl){imageGridItemEl.classList.toggle('o_grid_item_image_contain',widgetValue==='contain');}},_getImageGridItem(){return this.$target[0].closest(".o_grid_item_image");},_computeVisibility(){const hasSquareShape=this.$target[0].dataset.shape==="web_editor/geometric/geo_square";const effectAllowsOption=!["dolly_zoom","outline","image_mirror_blur"].includes(this.$target[0].dataset.hoverEffect);return this._super(...arguments)&&!!this._getImageGridItem()&&(!('shape'in this.$target[0].dataset)||hasSquareShape&&effectAllowsOption);},_computeWidgetState(methodName,params){if(methodName==='changeGridImageMode'){const imageGridItemEl=this._getImageGridItem();return imageGridItemEl&&imageGridItemEl.classList.contains('o_grid_item_image_contain')?'contain':'cover';}
return this._super(...arguments);},});options.registry.GalleryElement=options.Class.extend({position(previewMode,widgetValue,params){const optionName=this.$target[0].classList.contains("carousel-item")?"Carousel":"GalleryImageList";const itemEl=this.$target[0];this.trigger_up("option_update",{optionName:optionName,name:"reorder_items",data:{itemEl:itemEl,position:widgetValue,},});},});options.registry.Button=options.Class.extend({init(){this._super(...arguments);const isUnremovableButton=this.$target[0].classList.contains("oe_unremovable");this.forceDuplicateButton=!isUnremovableButton;this.forceNoDeleteButton=isUnremovableButton;},onBuilt(options){if(options.isCurrent){this._adaptButtons();}},onClone(options){if(options.isCurrent){this._adaptButtons(false);}},_adaptButtons(adaptAppearance=true){const previousSiblingEl=this.$target[0].previousElementSibling;const nextSiblingEl=this.$target[0].nextElementSibling;let siblingButtonEl=null;if(nextSiblingEl?.matches(".btn")){nextSiblingEl.classList.add("mb-2");this.$target[0].after(' ');siblingButtonEl=nextSiblingEl;}
if(previousSiblingEl?.matches(".btn")){previousSiblingEl.classList.add("mb-2");this.$target[0].before(' ');siblingButtonEl=previousSiblingEl;}
if(siblingButtonEl){this.$target[0].classList.add("mb-2");}
if(adaptAppearance){if(siblingButtonEl&&!this.$target[0].matches(".s_custom_button")){if(siblingButtonEl.classList.contains("btn-secondary")){this.$target[0].classList.remove("btn-primary");this.$target[0].classList.add("btn-secondary");}
if(siblingButtonEl.classList.contains("btn-sm")){this.$target[0].classList.add("btn-sm");}else if(siblingButtonEl.classList.contains("btn-lg")){this.$target[0].classList.add("btn-lg");}}else{const btnContainerEl=this.$target[0].closest("p");if(!btnContainerEl){const paragraphEl=document.createElement("p");this.$target[0].parentNode.insertBefore(paragraphEl,this.$target[0]);paragraphEl.appendChild(this.$target[0]);}}
this.$target[0].classList.remove("s_custom_button");}},});options.registry.layout_column.include({_isMobile(){return wUtils.isMobile(this);},});options.registry.SnippetMove.include({_isMobile(){return wUtils.isMobile(this);},});__exports[Symbol.for("default")]={UrlPickerUserValueWidget:UrlPickerUserValueWidget,FontFamilyPickerUserValueWidget:FontFamilyPickerUserValueWidget,};return __exports;});;

/* /website/static/src/snippets/s_facebook_page/options.js */
odoo.define('@website/snippets/s_facebook_page/options',['@web/core/utils/objects','@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const{pick}=require("@web/core/utils/objects");const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];options.registry.facebookPage=options.Class.extend({init(){this._super(...arguments);this.orm=this.bindService("orm");},willStart:function(){var defs=[this._super.apply(this,arguments)];var defaults={href:'',id:'',height:215,width:350,tabs:'',small_header:true,hide_cover:true,};this.fbData=Object.assign({},defaults,pick(this.$target[0].dataset,Object.keys(defaults)),defaults);if(!this.fbData.href){var self=this;defs.push(this.orm.searchRead("website",[],["social_facebook"],{limit:1,}).then(function(res){if(res){self.fbData.href=res[0].social_facebook||'';}}));}
return Promise.all(defs).then(()=>this._markFbElement()).then(()=>this._refreshPublicWidgets());},onBuilt(){this.$target[0].querySelector('.o_facebook_page_preview')?.remove();},toggleOption:function(previewMode,widgetValue,params){let optionName=params.optionName;if(optionName.startsWith('tab.')){optionName=optionName.replace('tab.','');if(widgetValue){this.fbData.tabs=this.fbData.tabs.split(',').filter(t=>t!=='').concat([optionName]).join(',');}else{this.fbData.tabs=this.fbData.tabs.split(',').filter(t=>t!==optionName).join(',');}}else{if(optionName==='show_cover'){this.fbData.hide_cover=!widgetValue;}else{this.fbData[optionName]=widgetValue;}}
return this._markFbElement();},pageUrl:function(previewMode,widgetValue,params){this.fbData.href=widgetValue;return this._markFbElement();},_markFbElement:function(){return this._checkURL().then(()=>{if(this.fbData.tabs){this.fbData.height=this.fbData.tabs==='events'?300:500;}else if(this.fbData.small_header){this.fbData.height=70;}else{this.fbData.height=150;}
for(const[key,value]of Object.entries(this.fbData)){this.$target[0].dataset[key]=value;}});},_computeWidgetState:function(methodName,params){const optionName=params.optionName;switch(methodName){case'toggleOption':{if(optionName.startsWith('tab.')){return this.fbData.tabs.split(',').includes(optionName.replace(/^tab./,''));}else{if(optionName==='show_cover'){return!this.fbData.hide_cover;}
return this.fbData[optionName];}}
case'pageUrl':{return this._checkURL().then(()=>this.fbData.href);}}
return this._super(...arguments);},_checkURL:function(){const defaultURL='https://www.facebook.com/Odoo';const match=this.fbData.href.match(/^(https?:\/\/)?((www\.)?(fb|facebook)|(m\.)?facebook)\.com\/(((profile\.php\?id=|people\/[^/?#]+\/|(p\/)?[^/?#]+-)(?<id>[0-9]{15,16}))|(?<nameid>[\w.]+))($|[/?# ])/);if(match){const pageId=match.groups.nameid||match.groups.id;return fetch(`https://graph.facebook.com/${pageId}/picture`).then((res)=>{if(res.ok){this.fbData.id=pageId;}else{this.fbData.id="";this.fbData.href=defaultURL;}});}
this.fbData.id="";this.fbData.href=defaultURL;return Promise.resolve();},});return __exports;});;

/* /website/static/src/snippets/s_image_gallery/options.js */
odoo.define('@website/snippets/s_image_gallery/options',['@web_editor/components/media_dialog/media_dialog','@web_editor/js/editor/snippets.options','@website/js/utils','@web/core/l10n/translation','@web/core/utils/render'],function(require){'use strict';let __exports={};const{MediaDialog}=require("@web_editor/components/media_dialog/media_dialog");const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];const wUtils=require('@website/js/utils')[Symbol.for("default")];const{_t}=require("@web/core/l10n/translation");const{renderToElement}=require("@web/core/utils/render");options.registry.GalleryLayout=options.registry.CarouselHandler.extend({_getMode(){var mode='slideshow';if(this.$target.hasClass('o_masonry')){mode='masonry';}
if(this.$target.hasClass('o_grid')){mode='grid';}
if(this.$target.hasClass('o_nomode')){mode='nomode';}
return mode;},_grid(){const imgs=this._getImgHolderEls();var $row=$('<div/>',{class:'row s_nb_column_fixed'});var columns=this._getColumns();var colClass='col-lg-'+(12/columns);var $container=this._replaceContent($row);imgs.forEach((img,index)=>{const $img=$(img.cloneNode(true));var $col=$('<div/>',{class:colClass});$col.append($img).appendTo($row);if((index+1)%columns===0){$row=$('<div/>',{class:'row s_nb_column_fixed'});$row.appendTo($container);}});this.$target.css('height','');},_masonry(){const imgs=this._getImgHolderEls();var columns=this._getColumns();var colClass='col-lg-'+(12/columns);var cols=[];var $row=$('<div/>',{class:'row s_nb_column_fixed'});this._replaceContent($row);for(var c=0;c<columns;c++){var $col=$('<div/>',{class:'o_masonry_col o_snippet_not_selectable '+colClass});$row.append($col);cols.push($col[0]);}
return new Promise(async resolve=>{for(const imgEl of imgs){let min=Infinity;let smallestColEl;for(const colEl of cols){const imgEls=colEl.querySelectorAll("img");const lastImgRect=imgEls.length&&imgEls[imgEls.length-1].getBoundingClientRect();const height=lastImgRect?Math.round(lastImgRect.top+lastImgRect.height):0;if(height<min){min=height;smallestColEl=colEl;}}
smallestColEl.append(imgEl.cloneNode(true));await wUtils.onceAllImagesLoaded(this.$target);}
resolve();});},async _setMode(modeName){modeName=modeName||'slideshow';this.$target.css('height','');this.$target.removeClass('o_nomode o_masonry o_grid o_slideshow').addClass('o_'+modeName);if(this.options.wysiwyg){this.options.wysiwyg.odooEditor.unbreakableStepUnactive();}
await this[`_${modeName}`]();this.trigger_up('cover_update');await this._refreshPublicWidgets();},_nomode(){var $row=$('<div/>',{class:'row s_nb_column_fixed'});const imgs=this._getItemsGallery();const imgHolderEls=this._getImgHolderEls();this._replaceContent($row);imgs.forEach((img,index)=>{var wrapClass='col-lg-3';if(img.width>=img.height*2||img.width>600){wrapClass='col-lg-6';}
var $wrap=$('<div/>',{class:wrapClass}).append(imgHolderEls[index]);$row.append($wrap);});},_slideshow(){const imageEls=this._getItemsGallery();const imgHolderEls=this._getImgHolderEls();const images=Array.from(imageEls).map((img)=>({src:img.getAttribute('src'),alt:img.getAttribute('alt'),}));var currentInterval=this.$target.find('.carousel:first').attr('data-bs-interval');var params={images:images,index:0,title:"",interval:currentInterval||0,id:'slideshow_'+new Date().getTime(),attrClass:imageEls.length>0?imageEls[0].className:'',attrStyle:imageEls.length>0?imageEls[0].style.cssText:'',},$slideshow=$(renderToElement('website.gallery.slideshow',params));const imgSlideshowEls=$slideshow[0].querySelectorAll("img[data-o-main-image]");imgSlideshowEls.forEach((imgSlideshowEl,index)=>{imgSlideshowEl.after(imgHolderEls[index]);imgSlideshowEl.remove();});this._replaceContent($slideshow);this.$("img").toArray().forEach((img,index)=>{$(img).attr({contenteditable:true,'data-index':index});});this.$target.css('height',Math.round(window.innerHeight*0.7));this.$target.off('slide.bs.carousel').off('slid.bs.carousel');this.$('li.fa').off('click');},_getItemsGallery(){const imgs=this.$('img').get();imgs.sort((a,b)=>this._getIndex(a)-this._getIndex(b));return imgs;},_getImgHolderEls:function(){const imgEls=this._getItemsGallery();return imgEls.map(imgEl=>imgEl.closest("a")||imgEl);},_getIndex:function(img){return img.dataset.index||0;},_getColumns:function(){return parseInt(this.$target.attr('data-columns'))||3;},_reorderItems(itemsEls,newItemPosition){itemsEls.forEach((img,index)=>{img.dataset.index=index;});this.trigger_up('snippet_edition_request',{exec:async()=>{await this._relayout();if(this._getMode()==="slideshow"){this._updateIndicatorAndActivateSnippet(newItemPosition);}else{const imageEl=this.$target[0].querySelector(`[data-index='${newItemPosition}']`);this.trigger_up("activate_snippet",{$snippet:$(imageEl),ifInactiveOptions:true,});}}});},_replaceContent:function($content){var $container=this.$('> .container, > .container-fluid, > .o_container_small');$container.empty().append($content);return $container;},_relayout(){return this._setMode(this._getMode());},});options.registry.gallery=options.registry.GalleryLayout.extend({start(){const _super=this._super.bind(this);let layoutPromise;const containerEl=this.$target[0].querySelector(":scope > .container, :scope > .container-fluid, :scope > .o_container_small");if(containerEl.querySelector(":scope > *:not(div)")){layoutPromise=this._relayout();}else{layoutPromise=Promise.resolve();}
return layoutPromise.then(()=>_super.apply(this,arguments));},cleanForSave(){if(this.$target.hasClass('slideshow')){this.$target.removeAttr('style');}},columns(previewMode,widgetValue,params){const nbColumns=parseInt(widgetValue||'1');this.$target.attr('data-columns',nbColumns);return this._relayout();},mode(previewMode,widgetValue,params){return this._setMode(widgetValue);},_computeWidgetState(methodName,params){switch(methodName){case'mode':{let activeModeName='slideshow';for(const modeName of params.possibleValues){if(this.$target.hasClass(`o_${modeName}`)){activeModeName=modeName;break;}}
this.activeMode=activeModeName;return activeModeName;}
case'columns':{return`${this._getColumns()}`;}}
return this._super(...arguments);},async _computeWidgetVisibility(widgetName,params){if(widgetName==='slideshow_mode_opt'){return false;}
return this._super(...arguments);},});options.registry.GalleryImageList=options.registry.GalleryLayout.extend({start(){this.$target.on('image_changed.gallery','img',ev=>{const $img=$(ev.currentTarget);const index=this.$target.find('.carousel-item.active').index();this.$('.carousel:first li[data-bs-target]:eq('+index+')').css('background-image','url('+$img.attr('src')+')');});this.$target.on('click.gallery','.o_add_images',ev=>{ev.stopImmediatePropagation();this.addImages(false);});this.$target.on('dropped.gallery','img',ev=>{this._relayout();if(!ev.target.height){$(ev.target).one('load',()=>{setTimeout(()=>{this.trigger_up('cover_update');});});}});return this._super.apply(this,arguments);},async onBuilt(){await this._super(...arguments);if(this.$target.find('.o_add_images').length){await this.addImages(false);}
this._adaptNavigationIDs();},onClone(){this._adaptNavigationIDs();},destroy(){this._super(...arguments);this.$target.off('.gallery');},addImages(previewMode){const $images=this.$('img');const $container=this.$('> .container, > .container-fluid, > .o_container_small');const lastImage=this._getItemsGallery().at(-1);let index=lastImage?this._getIndex(lastImage):-1;return new Promise(resolve=>{let savedPromise=Promise.resolve();const props={multiImages:true,onlyImages:true,save:images=>{for(const image of images){$('<img/>',{class:$images.length>0?$images[0].className:'img img-fluid d-block ',src:image.src,'data-index':++index,alt:image.alt||'','data-name':_t('Image'),style:$images.length>0?$images[0].style.cssText:'',}).appendTo($container);}
if(images.length>0){savedPromise=this._relayout();this.trigger_up('cover_update');}},};this.call("dialog","add",MediaDialog,props,{onClose:()=>{savedPromise.then(resolve);},});});},removeAllImages(previewMode){const $addImg=$('<div>',{class:'alert alert-info css_non_editable_mode_hidden text-center',});const $text=$('<span>',{class:'o_add_images',style:'cursor: pointer;',text:_t(" Add Images"),});const $icon=$('<i>',{class:' fa fa-plus-circle',});this._replaceContent($addImg.append($icon).append($text));},notify(name,data){this._super(...arguments);if(name==='image_removed'){data.$image.remove();this.trigger_up('snippet_edition_request',{exec:()=>{return this._relayout();}});}},_adaptNavigationIDs(){const uuid=new Date().getTime();this.$target.find('.carousel').attr('id','slideshow_'+uuid);this.$target.find('[data-bs-slide], [data-bs-slide-to]').toArray().forEach((el)=>{const $el=$(el);if($el.attr('data-bs-target')){$el.attr('data-bs-target','#slideshow_'+uuid);}else if($el.attr('href')){$el.attr('href','#slideshow_'+uuid);}});},});options.registry.gallery_img=options.Class.extend({onRemove:function(){this.trigger_up('option_update',{optionName:'GalleryImageList',name:'image_removed',data:{$image:this.$target,},});},});return __exports;});;

/* /website/static/src/snippets/s_instagram_page/options.js */
odoo.define('@website/snippets/s_instagram_page/options',['@web/core/l10n/translation','@web_editor/js/editor/snippets.options','@website/snippets/s_social_media/options'],function(require){'use strict';let __exports={};const{_t}=require("@web/core/l10n/translation");const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];const SocialMediaOption=require("@website/snippets/s_social_media/options")[Symbol.for("default")];options.registry.InstagramPage=options.Class.extend({init(){this._super(...arguments);this.orm=this.bindService("orm");this.notification=this.bindService("notification");this.instagramUrlStr="instagram.com/";},async onBuilt(){const dbSocialValuesCache=SocialMediaOption.getDbSocialValuesCache();let socialInstagram=dbSocialValuesCache&&dbSocialValuesCache["social_instagram"];if(!socialInstagram){let websiteId;this.trigger_up("context_get",{callback:function(ctx){websiteId=ctx["website_id"];},});const values=await this.orm.read("website",[websiteId],["social_instagram"]);socialInstagram=values[0]["social_instagram"];}
if(socialInstagram){const pageName=this._getInstagramPageNameFromUrl(socialInstagram);if(pageName){this.$target[0].dataset.instagramPage=pageName;}}},async setInstagramPage(previewMode,widgetValue,params){if(widgetValue.includes(this.instagramUrlStr)){widgetValue=this._getInstagramPageNameFromUrl(widgetValue);}
if(!widgetValue){this.notification.add(_t("The Instagram page name is not valid"),{type:"warning",});}
this.$target[0].dataset.instagramPage=widgetValue||"";await this.trigger_up("widgets_start_request",{$target:this.$target,editableMode:true,});},_computeWidgetState(widgetName,params){if(widgetName==="setInstagramPage"){return this.$target[0].dataset.instagramPage;}
return this._super(...arguments);},_getInstagramPageNameFromUrl(url){const pageName=url.split(this.instagramUrlStr)[1];if(!pageName||pageName.includes("?")||pageName.includes("#")||(pageName.includes("/")&&pageName.split("/")[1].length>0)){return;}
return pageName.split("/")[0];},});__exports[Symbol.for("default")]={InstagramPage:options.registry.InstagramPage,};return __exports;});;

/* /website/static/src/snippets/s_countdown/options.js */
odoo.define('@website/snippets/s_countdown/options',['@web/core/utils/render','@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const{renderToElement}=require("@web/core/utils/render");const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];options.registry.countdown=options.Class.extend({events:Object.assign({},options.Class.prototype.events||{},{'click .toggle-edit-message':'_onToggleEndMessageClick',}),cleanForSave:async function(){this.$target.find('.s_countdown_canvas_wrapper').removeClass("s_countdown_none");this.$target.find('.s_countdown_end_message').removeClass("s_countdown_enable_preview");},endAction:function(previewMode,widgetValue,params){this.$target[0].dataset.endAction=widgetValue;if(widgetValue==='message'||widgetValue==='message_no_countdown'){if(!this.$target.find('.s_countdown_end_message').length){const message=this.endMessage||renderToElement('website.s_countdown.end_message');this.$target.append(message);}
this.$target.toggleClass('hide-countdown',widgetValue==='message_no_countdown');}else{const $message=this.$target.find('.s_countdown_end_message').detach();if(this.showEndMessage){this._onToggleEndMessageClick();}
if($message.length){this.endMessage=$message[0].outerHTML;}}},layout:function(previewMode,widgetValue,params){switch(widgetValue){case'circle':this.$target[0].dataset.progressBarStyle='disappear';this.$target[0].dataset.progressBarWeight='thin';this.$target[0].dataset.layoutBackground='none';break;case'boxes':this.$target[0].dataset.progressBarStyle='none';this.$target[0].dataset.layoutBackground='plain';break;case'clean':this.$target[0].dataset.progressBarStyle='none';this.$target[0].dataset.layoutBackground='none';break;case'text':this.$target[0].dataset.progressBarStyle='none';this.$target[0].dataset.layoutBackground='none';break;}
this.$target[0].dataset.layout=widgetValue;},updateUIVisibility:async function(){await this._super(...arguments);const dataset=this.$target[0].dataset;this.$el.find('.toggle-edit-message').toggleClass('d-none',dataset.endAction==='nothing'||dataset.endAction==='redirect');this.updateUIEndMessage();},updateUIEndMessage:function(){this.$target.find('.s_countdown_canvas_wrapper').toggleClass("s_countdown_none",this.showEndMessage===true&&this.$target.hasClass("hide-countdown"));this.$target.find('.s_countdown_end_message').toggleClass("s_countdown_enable_preview",this.showEndMessage===true);},_computeWidgetState:function(methodName,params){switch(methodName){case'endAction':case'layout':return this.$target[0].dataset[methodName];case'selectDataAttribute':{if(params.colorNames){params.attributeDefaultValue='rgba(0, 0, 0, 255)';}
break;}}
return this._super(...arguments);},_onToggleEndMessageClick:function(){this.showEndMessage=!this.showEndMessage;this.$el.find(".toggle-edit-message").toggleClass('text-primary',this.showEndMessage);this.updateUIEndMessage();this.trigger_up('cover_update');},});return __exports;});;

/* /website/static/src/snippets/s_masonry_block/options.js */
odoo.define('@website/snippets/s_masonry_block/options',['@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const options=require('@web_editor/js/editor/snippets.options')[Symbol.for("default")];options.registry.MasonryLayout=options.registry.SelectTemplate.extend({init(){this._super(...arguments);this.containerSelector='> .container, > .container-fluid, > .o_container_small';this.selectTemplateWidgetName='masonry_template_opt';},});return __exports;});;

/* /website/static/src/snippets/s_popup/options.js */
odoo.define('@website/snippets/s_popup/options',['@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];options.registry.SnippetPopup=options.Class.extend({start:function(){this.$bsTarget.on('click.SnippetPopup','.js_close_popup:not(a, .btn)',ev=>{ev.stopPropagation();this.onTargetHide();this.trigger_up('snippet_option_visibility_update',{show:false});});this.$bsTarget.on('shown.bs.modal.SnippetPopup',()=>{this.trigger_up('snippet_option_visibility_update',{show:true});this.$target[0].querySelectorAll('.media_iframe_video').forEach(media=>{const iframe=media.querySelector('iframe');iframe.src=media.dataset.oeExpression||media.dataset.src;});});this.$bsTarget.on('hide.bs.modal.SnippetPopup',()=>{this.trigger_up('snippet_option_visibility_update',{show:false});this._removeIframeSrc();});this._removeIframeSrc();if(!this.$target[0].parentElement.matches("#website_cookies_bar")){this.trigger_up("option_update",{optionName:"anchor",name:"modalAnchor",data:{buttonEl:this._requestUserValueWidgets("onclick_opt")[0].el,},});}
return this._super(...arguments);},destroy:function(){this._super(...arguments);this._removeIframeSrc();this.$bsTarget.off('.SnippetPopup');},onBuilt:function(){this._assignUniqueID();const popup=this.$target.closest('.s_popup_middle');if(popup&&popup.attr('data-focus')){popup.attr('data-bs-focus',popup.attr('data-focus'));popup[0].removeAttribute('data-focus');}},onClone:function(){this._assignUniqueID();},onTargetShow:async function(){this.$bsTarget.modal('show');$(this.$target[0].ownerDocument.body).children('.modal-backdrop:last').addClass('d-none');},onTargetHide:async function(){return new Promise(resolve=>{const timeoutID=setTimeout(()=>{this.$bsTarget.off('hidden.bs.modal.popup_on_target_hide');resolve();},500);this.$bsTarget.one('hidden.bs.modal.popup_on_target_hide',()=>{clearTimeout(timeoutID);resolve();});this.$target[0].closest('.s_popup').classList.add('d-none');this.$bsTarget.modal('hide');});},moveBlock:function(previewMode,widgetValue,params){const selector=widgetValue==='allPages'?'#o_shared_blocks':'main .oe_structure:o_editable';const whereEl=$(this.$target[0].ownerDocument).find(selector)[0];const popupEl=this.$target[0].closest('.s_popup');whereEl.prepend(popupEl);},setBackdrop(previewMode,widgetValue,params){const color=widgetValue?'var(--black-50)':'';this.$target[0].style.setProperty('background-color',color,'important');},_assignUniqueID:function(){this.$target.closest('.s_popup').attr('id','sPopup'+Date.now());},_computeWidgetState:function(methodName,params){switch(methodName){case'moveBlock':return this.$target[0].closest('#o_shared_blocks')?'allPages':'currentPage';}
return this._super(...arguments);},_removeIframeSrc(){this.$target.find('.media_iframe_video iframe').each((i,iframe)=>{iframe.src='';});},});return __exports;});;

/* /website/static/src/snippets/s_product_catalog/options.js */
odoo.define('@website/snippets/s_product_catalog/options',['@web/core/l10n/translation','@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const{_t}=require("@web/core/l10n/translation");const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];options.registry.ProductCatalog=options.Class.extend({toggleDescription:function(previewMode,widgetValue,params){const $dishes=this.$('.s_product_catalog_dish');const $name=$dishes.find('.s_product_catalog_dish_name');$name.toggleClass('s_product_catalog_dish_dot_leaders',!widgetValue);if(widgetValue){$dishes.toArray().forEach((el)=>{const $description=$(el).find('.s_product_catalog_dish_description');if($description.length){$description.removeClass('d-none');}else{const descriptionEl=document.createElement('p');descriptionEl.classList.add('s_product_catalog_dish_description','border-top','text-muted','pt-1','o_default_snippet_text');const iEl=document.createElement('i');iEl.textContent=_t("Add a description here");descriptionEl.appendChild(iEl);el.appendChild(descriptionEl);}});}else{$dishes.toArray().forEach((el)=>{const $description=$(el).find('.s_product_catalog_dish_description');if($description.hasClass('o_default_snippet_text')||$description.find('.o_default_snippet_text').length){$description.remove();}else{$description.addClass('d-none');}});}},_computeWidgetState:function(methodName,params){if(methodName==='toggleDescription'){const $description=this.$('.s_product_catalog_dish_description');return $description.length&&!$description.hasClass('d-none');}
return this._super(...arguments);},});return __exports;});;

/* /website/static/src/snippets/s_chart/options.js */
odoo.define('@website/snippets/s_chart/options',['@web/core/l10n/translation','@web_editor/js/editor/snippets.options','@web_editor/js/common/utils','@web/core/utils/colors'],function(require){'use strict';let __exports={};const{_t}=require("@web/core/l10n/translation");const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];const weUtils=require("@web_editor/js/common/utils")[Symbol.for("default")];const{isCSSColor}=require('@web/core/utils/colors');options.registry.InnerChart=options.Class.extend({custom_events:Object.assign({},options.Class.prototype.custom_events,{'get_custom_colors':'_onGetCustomColors',}),events:Object.assign({},options.Class.prototype.events,{'click we-button.add_column':'_onAddColumnClick','click we-button.add_row':'_onAddRowClick','click we-button.o_we_matrix_remove_col':'_onRemoveColumnClick','click we-button.o_we_matrix_remove_row':'_onRemoveRowClick','input we-matrix input':'_onMatrixInputInput','focus we-matrix input':'_onMatrixInputFocus',}),init:function(){this._super.apply(this,arguments);this.themeArray=['o-color-1','o-color-2','o-color-3','o-color-4','o-color-5'];this.style=window.getComputedStyle(this.$target[0].ownerDocument.documentElement);},start:function(){this.backSelectEl=this.el.querySelector('[data-name="chart_bg_color_opt"]');this.borderSelectEl=this.el.querySelector('[data-name="chart_border_color_opt"]');this.tableEl=this.el.querySelector('we-matrix table');const data=JSON.parse(this.$target[0].dataset.data);data.labels.forEach(el=>{this._addRow(el);});data.datasets.forEach((el,i)=>{if(this._isPieChart()){const headerBackgroundColor=this.themeArray[i]||this._randomColor();const headerBorderColor=this.themeArray[i]||this._randomColor();this._addColumn(el.label,el.data,headerBackgroundColor,headerBorderColor,el.backgroundColor,el.borderColor);}else{this._addColumn(el.label,el.data,el.backgroundColor,el.borderColor);}});this._displayRemoveColButton();this._displayRemoveRowButton();this._setDefaultSelectedInput();return this._super(...arguments);},updateUI:async function(){if(!this.lastEditableSelectedInput.closest('table')||this.colorPaletteSelectedInput&&!this.colorPaletteSelectedInput.closest('table')){this._setDefaultSelectedInput();}
await this._super(...arguments);this.backSelectEl.querySelector('we-title').textContent=this._isPieChart()?_t("Data Color"):_t("Dataset Color");this.borderSelectEl.querySelector('we-title').textContent=this._isPieChart()?_t("Data Border"):_t("Dataset Border");this.tableEl.querySelectorAll('input').forEach(el=>el.style.border='');const selector=this._isPieChart()?'td input':'tr:first-child input';this.tableEl.querySelectorAll(selector).forEach(el=>{const color=el.dataset.backgroundColor||el.dataset.borderColor;if(color){el.style.border='2px solid';el.style.borderColor=isCSSColor(color)?color:weUtils.getCSSVariableValue(color,this.style);}});},colorChange:async function(previewMode,widgetValue,params){if(widgetValue){this.colorPaletteSelectedInput.dataset[params.attributeName]=widgetValue;}else{delete this.colorPaletteSelectedInput.dataset[params.attributeName];}
await this._reloadGraph();await new Promise(resolve=>setTimeout(()=>{this.lastEditableSelectedInput.focus();resolve();}));},selectDataAttribute:async function(previewMode,widgetValue,params){await this._super(...arguments);if(params.attributeName==='type'){this._setDefaultSelectedInput();await this._reloadGraph();}
if(params.attributeName==='minValue'||params.attributeName==='maxValue'){this._computeTicksMinMaxValue();}},_computeWidgetState:function(methodName,params){if(methodName==='colorChange'){return this.colorPaletteSelectedInput&&this.colorPaletteSelectedInput.dataset[params.attributeName]||'';}
return this._super(...arguments);},_computeWidgetVisibility:function(widgetName,params){switch(widgetName){case'stacked_chart_opt':{return this._getColumnCount()>1;}
case'chart_bg_color_opt':case'chart_border_color_opt':{return!!this.colorPaletteSelectedInput;}}
return this._super(...arguments);},_computeTicksMinMaxValue(){const dataset=this.$target[0].dataset;let minValue=parseInt(dataset.minValue);let maxValue=parseInt(dataset.maxValue);if(!isNaN(maxValue)){if(maxValue<minValue){maxValue=minValue;minValue=parseInt(dataset.maxValue);}else if(maxValue===minValue){minValue<0?(maxValue=0,minValue=2*minValue):(minValue=0,maxValue=2*maxValue);}}else{const datasets=JSON.parse(dataset.data).datasets||[];const dataValue=datasets.map((el)=>{return el.data.map((data)=>{return!isNaN(parseInt(data))?parseInt(data):0;});}).flat();if(minValue>=Math.max(...dataValue)){maxValue=minValue;minValue=0;}}
this.$target.attr({'data-ticks-min':minValue,'data-ticks-max':maxValue,});},_reloadGraph:async function(){const jsonValue=this._matrixToChartData();if(this.$target[0].dataset.data!==jsonValue){this.$target[0].dataset.data=jsonValue;await this._refreshPublicWidgets();}},_matrixToChartData:function(){const data={labels:[],datasets:[],};this.tableEl.querySelectorAll('tr:first-child input').forEach(el=>{data.datasets.push({label:el.value||'',data:[],backgroundColor:this._isPieChart()?[]:el.dataset.backgroundColor||'',borderColor:this._isPieChart()?[]:el.dataset.borderColor||'',});});this.tableEl.querySelectorAll('tr:not(:first-child):not(:last-child)').forEach((el)=>{const title=el.querySelector('th input').value||'';data.labels.push(title);el.querySelectorAll('td input').forEach((el,i)=>{data.datasets[i].data.push(el.value||0);if(this._isPieChart()){data.datasets[i].backgroundColor.push(el.dataset.backgroundColor||'');data.datasets[i].borderColor.push(el.dataset.borderColor||'');}});});return JSON.stringify(data);},_makeDeleteButton:function(...classes){const rmbuttonEl=options.buildElement('we-button',null,{classes:['o_we_text_danger','o_we_link','fa','fa-fw','fa-minus',...classes],});rmbuttonEl.title=classes.includes('o_we_matrix_remove_col')?_t("Remove Serie"):_t("Remove Row");const newEl=document.createElement('td');newEl.appendChild(rmbuttonEl);return newEl;},_addColumn:function(title,values,heardeBackgroundColor,headerBorderColor,cellBackgroundColors=[],cellBorderColors=[]){const firstRow=this.tableEl.querySelector('tr:first-child');const headerInput=this._makeCell('th',title,heardeBackgroundColor,headerBorderColor);firstRow.insertBefore(headerInput,firstRow.lastElementChild);this.tableEl.querySelectorAll('tr:not(:first-child):not(:last-child)').forEach((el,i)=>{const newCell=this._makeCell('td',values?values[i]:null,cellBackgroundColors[i]||this._randomColor(),cellBorderColors[i-1]);el.insertBefore(newCell,el.lastElementChild);});const lastRow=this.tableEl.querySelector('tr:last-child');const removeButton=this._makeDeleteButton('o_we_matrix_remove_col');lastRow.appendChild(removeButton);},_addRow:function(tilte){const trEl=document.createElement('tr');trEl.appendChild(this._makeCell('th',tilte));this.tableEl.querySelectorAll('tr:first-child input').forEach(()=>{trEl.appendChild(this._makeCell('td',null,this._randomColor()));});trEl.appendChild(this._makeDeleteButton('o_we_matrix_remove_row'));const tbody=this.tableEl.querySelector('tbody');tbody.insertBefore(trEl,tbody.lastElementChild);},_makeCell:function(tag,value,backgroundColor,borderColor){const newEl=document.createElement(tag);const contentEl=document.createElement('input');contentEl.type='text';if(tag==='td'){contentEl.type='number';}
contentEl.value=value||'';if(backgroundColor){contentEl.dataset.backgroundColor=backgroundColor;}
if(borderColor){contentEl.dataset.borderColor=borderColor;}
newEl.appendChild(contentEl);return newEl;},_displayRemoveColButton:function(colIndex){if(this._getColumnCount()>1){this._displayRemoveButton(colIndex,'o_we_matrix_remove_col');}},_displayRemoveRowButton:function(rowIndex){const rowCount=this.tableEl.rows.length-2;if(rowCount>1){this._displayRemoveButton(rowIndex,'o_we_matrix_remove_row');}},_displayRemoveButton:function(tdIndex,btnClass){const removeBtn=this.tableEl.querySelectorAll(`td we-button.${btnClass}`);removeBtn.forEach(el=>el.style.display='');const index=tdIndex<removeBtn.length?tdIndex:removeBtn.length-1;removeBtn[index].style.display='inline-block';},_isPieChart:function(){return['pie','doughnut'].includes(this.$target[0].dataset.type);},_getColumnCount:function(){return this.tableEl.rows[0].cells.length-2;},_setDefaultSelectedInput:function(){this.lastEditableSelectedInput=this.tableEl.querySelector('td input');if(this._isPieChart()){this.colorPaletteSelectedInput=this.lastEditableSelectedInput;}else{this.colorPaletteSelectedInput=this.tableEl.querySelector('th input');}},_randomColor:function(){return'#'+('00000'+(Math.random()*(1<<24)|0).toString(16)).slice(-6).toUpperCase();},_onGetCustomColors:function(ev){const data=JSON.parse(this.$target[0].dataset.data||'');let customColors=[];data.datasets.forEach(el=>{if(this._isPieChart()){customColors=customColors.concat(el.backgroundColor).concat(el.borderColor);}else{customColors.push(el.backgroundColor);customColors.push(el.borderColor);}});customColors=customColors.filter((el,i,array)=>{return!weUtils.getCSSVariableValue(el,this.style)&&array.indexOf(el)===i&&el!=='';});ev.data.onSuccess(customColors);},_onAddColumnClick:function(){const usedColor=Array.from(this.tableEl.querySelectorAll('tr:first-child input')).map(el=>el.dataset.backgroundColor);const color=this.themeArray.filter(el=>!usedColor.includes(el))[0]||this._randomColor();this._addColumn(null,null,color,color);this._reloadGraph().then(()=>{this._displayRemoveColButton();this.updateUI();});},_onAddRowClick:function(){this._addRow();this._reloadGraph().then(()=>{this._displayRemoveRowButton();this.updateUI();});},_onRemoveColumnClick:function(ev){const cell=ev.currentTarget.parentElement;const cellIndex=cell.cellIndex;this.tableEl.querySelectorAll('tr').forEach((el)=>{el.children[cellIndex].remove();});this._displayRemoveColButton(cellIndex-1);this._reloadGraph().then(()=>{this.updateUI();});},_onRemoveRowClick:function(ev){const row=ev.currentTarget.parentElement.parentElement;const rowIndex=row.rowIndex;row.remove();this._displayRemoveRowButton(rowIndex-1);this._reloadGraph().then(()=>{this.updateUI();});},_onMatrixInputInput(){this._reloadGraph();},_onMatrixInputFocus:function(ev){this.lastEditableSelectedInput=ev.target;const col=ev.target.parentElement.cellIndex;const row=ev.target.parentElement.parentElement.rowIndex;if(this._isPieChart()){this.colorPaletteSelectedInput=ev.target.parentNode.tagName==='TD'?ev.target:null;}else{this.colorPaletteSelectedInput=this.tableEl.querySelector(`tr:first-child th:nth-of-type(${col + 1}) input`);}
if(col>0){this._displayRemoveColButton(col-1);}
if(row>0){this._displayRemoveRowButton(row-1);}
this.updateUI();},});return __exports;});;

/* /website/static/src/snippets/s_rating/options.js */
odoo.define('@website/snippets/s_rating/options',['@web_editor/components/media_dialog/media_dialog','@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const{MediaDialog}=require("@web_editor/components/media_dialog/media_dialog");const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];options.registry.Rating=options.Class.extend({start:function(){this.iconType=this.$target[0].dataset.icon;this.faClassActiveCustomIcons=this.$target[0].dataset.activeCustomIcon||'';this.faClassInactiveCustomIcons=this.$target[0].dataset.inactiveCustomIcon||'';return this._super.apply(this,arguments);},setIcons:function(previewMode,widgetValue,params){this.iconType=widgetValue;this._renderIcons();this.$target[0].dataset.icon=widgetValue;delete this.$target[0].dataset.activeCustomIcon;delete this.$target[0].dataset.inactiveCustomIcon;},customIcon:async function(previewMode,widgetValue,params){const media=document.createElement('i');media.className=params.customActiveIcon==='true'?this.faClassActiveCustomIcons:this.faClassInactiveCustomIcons;this.call("dialog","add",MediaDialog,{noImages:true,noDocuments:true,noVideos:true,media,save:icon=>{const customClass=icon.className;const $activeIcons=this.$target.find('.s_rating_active_icons > i');const $inactiveIcons=this.$target.find('.s_rating_inactive_icons > i');const $icons=params.customActiveIcon==='true'?$activeIcons:$inactiveIcons;$icons.removeClass().addClass(customClass);this.faClassActiveCustomIcons=$activeIcons.length>0?$activeIcons.attr('class'):customClass;this.faClassInactiveCustomIcons=$inactiveIcons.length>0?$inactiveIcons.attr('class'):customClass;this.$target[0].dataset.activeCustomIcon=this.faClassActiveCustomIcons;this.$target[0].dataset.inactiveCustomIcon=this.faClassInactiveCustomIcons;this.$target[0].dataset.icon='custom';this.iconType='custom';}});},activeIconsNumber:function(previewMode,widgetValue,params){this.nbActiveIcons=parseInt(widgetValue);this._createIcons();},totalIconsNumber:function(previewMode,widgetValue,params){this.nbTotalIcons=Math.max(parseInt(widgetValue),1);this._createIcons();},_computeWidgetState:function(methodName,params){switch(methodName){case'setIcons':{return this.$target[0].dataset.icon;}
case'activeIconsNumber':{this.nbActiveIcons=this.$target.find('.s_rating_active_icons > i').length;return this.nbActiveIcons;}
case'totalIconsNumber':{this.nbTotalIcons=this.$target.find('.s_rating_icons i').length;return this.nbTotalIcons;}}
return this._super(...arguments);},_createIcons:function(){const $activeIcons=this.$target.find('.s_rating_active_icons');const $inactiveIcons=this.$target.find('.s_rating_inactive_icons');this.$target.find('.s_rating_icons i').remove();for(let i=0;i<this.nbTotalIcons;i++){if(i<this.nbActiveIcons){$activeIcons.append('<i></i> ');}else{$inactiveIcons.append('<i></i> ');}}
this._renderIcons();},_renderIcons:function(){const icons={'fa-star':'fa-star-o','fa-thumbs-up':'fa-thumbs-o-up','fa-circle':'fa-circle-o','fa-square':'fa-square-o','fa-heart':'fa-heart-o'};const faClassActiveIcons=(this.iconType==="custom")?this.faClassActiveCustomIcons:'fa '+this.iconType;const faClassInactiveIcons=(this.iconType==="custom")?this.faClassInactiveCustomIcons:'fa '+icons[this.iconType];const $activeIcons=this.$target.find('.s_rating_active_icons > i');const $inactiveIcons=this.$target.find('.s_rating_inactive_icons > i');$activeIcons.removeClass().addClass(faClassActiveIcons);$inactiveIcons.removeClass().addClass(faClassInactiveIcons);},});return __exports;});;

/* /website/static/src/snippets/s_tabs/options.js */
odoo.define('@website/snippets/s_tabs/options',['@web/core/utils/functions','@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const{uniqueId}=require("@web/core/utils/functions");const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];options.registry.NavTabs=options.registry.MultipleItems.extend({isTopOption:true,start:function(){this._findLinksAndPanes();return this._super.apply(this,arguments);},onBuilt:function(){this._generateUniqueIDs();},onClone:function(){this._generateUniqueIDs();},async addItem(previewMode,widgetValue,params){params.item=".tab-content:first > .tab-pane.active";return this._super(...arguments);},async removeItem(previewMode,widgetValue,params){params.item=".tab-content:first > .tab-pane.active";return this._super(...arguments);},_computeWidgetVisibility:async function(widgetName,params){if(widgetName==='remove_tab_opt'){return(this.$tabPanes.length>2);}
return this._super(...arguments);},_findLinksAndPanes:function(){this.$navLinks=this.$target.find('.nav:first .nav-link');this.$tabPanes=this.$target.find(".tab-content:first > .tab-pane");},_generateUniqueIDs:function(){for(var i=0;i<this.$navLinks.length;i++){var id=uniqueId(new Date().getTime()+"_");var idLink='nav_tabs_link_'+id;var idContent='nav_tabs_content_'+id;this.$navLinks.eq(i).attr({'id':idLink,'href':'#'+idContent,'aria-controls':idContent,});this.$tabPanes.eq(i).attr({'id':idContent,'aria-labelledby':idLink,});}},_addItemCallback($target){$target.removeClass('active show');const $targetNavItem=this.$(`.nav-item a[href="#${$target.attr('id')}"]`).removeClass('active show').parent();const $navLink=$targetNavItem.clone().insertAfter($targetNavItem).find('.nav-link');this._findLinksAndPanes();this._generateUniqueIDs();$navLink.tab('show');},_removeItemCallback($target){const $targetNavLink=this.$(`.nav-item a[href="#${$target.attr('id')}"]`);const $navLinkToShow=this.$navLinks.eq((this.$navLinks.index($targetNavLink)+1)%this.$navLinks.length);$targetNavLink.parent().remove();this._findLinksAndPanes();$navLinkToShow.tab('show');},});options.registry.NavTabsStyle=options.Class.extend({setStyle:function(previewMode,widgetValue,params){const $nav=this.$target.find('.s_tabs_nav:first .nav');const isPills=widgetValue==='pills';$nav.toggleClass('nav-tabs card-header-tabs',!isPills);$nav.toggleClass('nav-pills',isPills);this.$target.find('.s_tabs_nav:first').toggleClass('card-header',!isPills).toggleClass('mb-3',isPills);this.$target.toggleClass('card',!isPills);this.$target.find('.s_tabs_content:first').toggleClass('card-body',!isPills);},setDirection:function(previewMode,widgetValue,params){const isVertical=widgetValue==='vertical';this.$target.toggleClass('row s_col_no_resize s_col_no_bgcolor',isVertical);this.$target.find('.s_tabs_nav:first .nav').toggleClass('flex-column',isVertical);this.$target.find('.s_tabs_nav:first > .nav-link').toggleClass('py-2',isVertical);this.$target.find('.s_tabs_nav:first').toggleClass('col-md-3',isVertical);this.$target.find('.s_tabs_content:first').toggleClass('col-md-9',isVertical);},_computeWidgetState:function(methodName,params){switch(methodName){case'setStyle':return this.$target.find('.s_tabs_nav:first .nav').hasClass('nav-pills')?'pills':'tabs';case'setDirection':return this.$target.find('.s_tabs_nav:first .nav').hasClass('flex-column')?'vertical':'horizontal';}
return this._super(...arguments);},});return __exports;});;

/* /website/static/src/snippets/s_progress_bar/options.js */
odoo.define('@website/snippets/s_progress_bar/options',['@web/core/l10n/translation','@web/core/utils/numbers','@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const{_t}=require("@web/core/l10n/translation");const{clamp}=require("@web/core/utils/numbers");const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];options.registry.progress=options.Class.extend({display:function(previewMode,widgetValue,params){if(this.$target.hasClass('progress')){this.$target.removeClass('progress');this.$target.find('.progress-bar').wrap($('<div/>',{class:'progress',}));this.$target.find('.progress-bar span').addClass('s_progress_bar_text');}
let $text=this.$target.find('.s_progress_bar_text');if(!$text.length){$text=$('<span/>').addClass('s_progress_bar_text').html(_t('80% Development'));}
if(widgetValue==='inline'){$text.appendTo(this.$target.find('.progress-bar'));}else{$text.insertBefore(this.$target.find('.progress'));}},progressBarValue:function(previewMode,widgetValue,params){let value=parseInt(widgetValue);value=clamp(value,0,100);const $progressBar=this.$target.find('.progress-bar');const $progressBarText=this.$target.find('.s_progress_bar_text');$progressBarText.text($progressBarText.text().replace(/[0-9]+%/,value+'%'));$progressBar.attr("aria-valuenow",value);$progressBar.css("width",value+"%");},_computeWidgetState:function(methodName,params){switch(methodName){case'display':{const isInline=this.$target.find('.s_progress_bar_text').parent('.progress-bar').length;return isInline?'inline':'below';}
case'progressBarValue':{return this.$target.find('.progress-bar').attr('aria-valuenow')+'%';}}
return this._super(...arguments);},});return __exports;});;

/* /website/static/src/snippets/s_blockquote/options.js */
odoo.define('@website/snippets/s_blockquote/options',['@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];options.registry.Blockquote=options.Class.extend({display:function(previewMode,widgetValue,params){this.$target.find('.s_blockquote_avatar').toggleClass('d-none',widgetValue!=='classic');const $blockquote=this.$target.find('.s_blockquote_content');if(widgetValue==='cover'){$blockquote.css({"background-image":"url('/web/image/website.s_blockquote_cover_default_image')"});$blockquote.addClass('oe_img_bg o_bg_img_center');if(!$blockquote.find('.o_we_bg_filter').length){const bgFilterEl=document.createElement('div');bgFilterEl.classList.add('o_we_bg_filter','bg-white-50');$blockquote.prepend(bgFilterEl);}}else{$blockquote.css({"background-image":""});$blockquote.css({"background-position":""});$blockquote.removeClass('oe_img_bg o_bg_img_center');$blockquote.find('.o_we_bg_filter').remove();$blockquote.find('.s_blockquote_filter').contents().unwrap();}
this.$target.find('.s_blockquote_icon').toggleClass('d-none',widgetValue==='minimalist');this.$target.find('footer').toggleClass('d-none',widgetValue==='minimalist');},});return __exports;});;

/* /website/static/src/snippets/s_showcase/options.js */
odoo.define('@website/snippets/s_showcase/options',['@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];options.registry.Showcase=options.Class.extend({onMove:function(){const $showcaseCol=this.$target.parent().closest('.row > div');const isLeftCol=$showcaseCol.index()<=0;const $title=this.$target.children('.s_showcase_title');$title.toggleClass('flex-lg-row-reverse',isLeftCol);$showcaseCol.find('.s_showcase_icon.ms-3').removeClass('ms-3').addClass('ms-lg-3');$title.find('.s_showcase_icon').toggleClass('me-lg-0 ms-lg-3',isLeftCol);},});return __exports;});;

/* /website/static/src/snippets/s_table_of_content/options.js */
odoo.define('@website/snippets/s_table_of_content/options',['@web/core/utils/functions','@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const{uniqueId}=require("@web/core/utils/functions");const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];options.registry.TableOfContent=options.Class.extend({start:function(){this.targetedElements='h1, h2';this.oldHeadingsEls=[];const $headings=this.$target.find(this.targetedElements);if($headings.length>0){this._generateNav();}
const targetNode=this.$target.find('.s_table_of_content_main')[0];const config={attributes:false,childList:true,subtree:true,characterData:true};this.observer=new MutationObserver(()=>this._generateNav());this.observer.observe(targetNode,config);this.$target.on('content_changed',()=>this._generateNav());return this._super(...arguments);},destroy:function(){this.observer.disconnect();this._super(...arguments);},onRemove(){this._disposeScrollSpy();const exception=(tocEl)=>tocEl===this.$target[0];this._activateScrollSpy(exception);},onClone:function(){this._generateNav();},_activateScrollSpy(exception){for(const tocEl of this.ownerDocument.querySelectorAll('#wrapwrap .s_table_of_content')){if(exception(tocEl)){continue;}
this.trigger_up('widgets_start_request',{$target:$(tocEl),editableMode:true,});}},_disposeScrollSpy(){const scrollingEl=$().getScrollingElement(this.ownerDocument)[0];const scrollSpyInstance=this.$target[0].ownerDocument.defaultView.ScrollSpy.getInstance(scrollingEl);if(scrollSpyInstance){scrollSpyInstance.dispose();}},_generateNav:function(ev){const blockTextContent=this.$target[0].textContent.replaceAll('\n','').trim();if(blockTextContent===''){this.observer.disconnect();this.trigger_up('remove_snippet',{$snippet:this.$target});return;}
this.options.wysiwyg&&this.options.wysiwyg.odooEditor.unbreakableStepUnactive();const navEl=this.$target[0].querySelector('.s_table_of_content_navbar');const headingsEls=this.$target.find(this.targetedElements).toArray().filter(el=>!el.closest('.o_snippet_desktop_invisible'));const areHeadingsEqual=this.oldHeadingsEls.length===headingsEls.length&&this.oldHeadingsEls.every((el,i)=>el.isEqualNode(headingsEls[i]));const areVisibilityIdsEqual=headingsEls.every((headingEl)=>{const visibilityId=headingEl.closest('section').getAttribute('data-visibility-id');const matchingLinkEl=navEl.querySelector(`a[href="#${headingEl.getAttribute('id')}"]`);const matchingLinkVisibilityId=matchingLinkEl?matchingLinkEl.getAttribute('data-visibility-id'):null;return visibilityId===matchingLinkVisibilityId;});if(areHeadingsEqual&&areVisibilityIdsEqual){return;}
this._disposeScrollSpy();navEl.innerHTML='';headingsEls.forEach((el)=>{const $el=$(el);const id=uniqueId("table_of_content_heading_"+new Date().getTime()+"_");const visibilityId=$el.closest('section').attr('data-visibility-id');$('<a>').attr({'href':"#"+id,'data-visibility-id':visibilityId}).addClass('table_of_content_link list-group-item list-group-item-action py-2 border-0 rounded-0').text($el.text()).appendTo(navEl);$el.attr('id',id);$el[0].dataset.anchor='true';});const exception=(tocEl)=>!tocEl.querySelector('.s_table_of_content_navbar a');this._activateScrollSpy(exception);this.oldHeadingsEls=[...headingsEls.map(el=>el.cloneNode(true))];},});options.registry.TableOfContentNavbar=options.Class.extend({navbarPosition:function(previewMode,widgetValue,params){const $navbar=this.$target;const $mainContent=this.$target.parent().find('.s_table_of_content_main');if(widgetValue==='top'||widgetValue==='left'){$navbar.prev().before($navbar);}
if(widgetValue==='left'||widgetValue==='right'){$navbar.removeClass('s_table_of_content_horizontal_navbar col-lg-12').addClass('s_table_of_content_vertical_navbar col-lg-3');$mainContent.removeClass('col-lg-12').addClass('col-lg-9');$navbar.find('.s_table_of_content_navbar').removeClass('list-group-horizontal-md');}
if(widgetValue==='right'){$navbar.next().after($navbar);}
if(widgetValue==='top'){$navbar.removeClass('s_table_of_content_vertical_navbar col-lg-3').addClass('s_table_of_content_horizontal_navbar col-lg-12');$navbar.find('.s_table_of_content_navbar').addClass('list-group-horizontal-md');$mainContent.removeClass('col-lg-9').addClass('col-lg-12');}},_computeWidgetState:function(methodName,params){switch(methodName){case'navbarPosition':{const $navbar=this.$target;if($navbar.hasClass('s_table_of_content_horizontal_navbar')){return'top';}else{const $mainContent=$navbar.parent().find('.s_table_of_content_main');return $navbar.prev().is($mainContent)===true?'right':'left';}}}
return this._super(...arguments);},});options.registry.TableOfContentMainColumns=options.Class.extend({forceNoDeleteButton:true,});return __exports;});;

/* /website/static/src/snippets/s_timeline/options.js */
odoo.define('@website/snippets/s_timeline/options',['@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];options.registry.Timeline=options.Class.extend({displayOverlayOptions:true,start:function(){var $buttons=this.$el.find('we-button.o_we_overlay_opt');var $overlayArea=this.$overlay.find('.o_overlay_options_wrap');$overlayArea.append($buttons);return this._super(...arguments);},timelineCard:function(previewMode,widgetValue,params){const $timelineRow=this.$target.closest('.s_timeline_row');$timelineRow.toggleClass('flex-row-reverse flex-row');},});return __exports;});;

/* /website/static/src/snippets/s_media_list/options.js */
odoo.define('@website/snippets/s_media_list/options',['@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];options.registry.MediaItemLayout=options.Class.extend({layout:function(previewMode,widgetValue,params){const $image=this.$target.find('.s_media_list_img_wrapper');const $content=this.$target.find('.s_media_list_body');for(const possibleValue of params.possibleValues){$image.removeClass(`col-lg-${possibleValue}`);$content.removeClass(`col-lg-${12 - possibleValue}`);}
$image.addClass(`col-lg-${widgetValue}`);$content.addClass(`col-lg-${12 - widgetValue}`);},_computeWidgetState(methodName,params){switch(methodName){case'layout':{const $image=this.$target.find('.s_media_list_img_wrapper');for(const possibleValue of params.possibleValues){if($image.hasClass(`col-lg-${possibleValue}`)){return possibleValue;}}}}
return this._super(...arguments);},});return __exports;});;

/* /website/static/src/snippets/s_google_map/options.js */
odoo.define('@website/snippets/s_google_map/options',['@web/core/l10n/translation','@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const{_t}=require("@web/core/l10n/translation");const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];options.registry.GoogleMap=options.Class.extend({resetMapColor(previewMode,widgetValue,params){this.$target[0].dataset.mapColor='';},setFormattedAddress(previewMode,widgetValue,params){this.$target[0].dataset.pinAddress=params.gmapPlace.formatted_address;},async showDescription(previewMode,widgetValue,params){const descriptionEl=this.$target[0].querySelector('.description');if(widgetValue&&!descriptionEl){this.$target.append($(`
                <div class="description">
                    <font>${_t('Visit us:')}</font>
                    <span>${_t('Our office is located in the northeast of Brussels. TEL (555) 432 2365')}</span>
                </div>`));}else if(!widgetValue&&descriptionEl){descriptionEl.remove();}},_computeWidgetState(methodName,params){if(methodName==='showDescription'){return this.$target[0].querySelector('.description')?'true':'';}
return this._super(...arguments);},});return __exports;});;

/* /website/static/src/snippets/s_map/options.js */
odoo.define('@website/snippets/s_map/options',['@web/core/l10n/translation','@web_editor/js/editor/snippets.options','@website/js/utils'],function(require){'use strict';let __exports={};const{_t}=require("@web/core/l10n/translation");const options=require('@web_editor/js/editor/snippets.options')[Symbol.for("default")];const{generateGMapIframe,generateGMapLink}=require('@website/js/utils');options.registry.Map=options.Class.extend({onBuilt(){if(!this.$target[0].querySelector('.s_map_embedded')){const iframeEl=generateGMapIframe();this.$target[0].querySelector('.s_map_color_filter').before(iframeEl);this._updateSource();}},async selectDataAttribute(previewMode,widgetValue,params){await this._super(...arguments);if(['mapAddress','mapType','mapZoom'].includes(params.attributeName)){this._updateSource();}},async showDescription(previewMode,widgetValue,params){const descriptionEl=this.$target[0].querySelector('.description');if(widgetValue&&!descriptionEl){this.$target.append($(`
                <div class="description">
                    <font>${_t('Visit us:')}</font>
                    <span>${_t('Our office is open Monday  Friday 8:30 a.m.  4:00 p.m.')}</span>
                </div>`));}else if(!widgetValue&&descriptionEl){descriptionEl.remove();}},_computeWidgetState(methodName,params){if(methodName==='showDescription'){return!!this.$target[0].querySelector('.description');}
return this._super(...arguments);},_updateSource(){const dataset=this.$target[0].dataset;const $embedded=this.$target.find('.s_map_embedded');const $info=this.$target.find('.missing_option_warning');if(dataset.mapAddress){const url=generateGMapLink(dataset);if(url!==$embedded.attr('src')){$embedded.attr('src',url);}
$embedded.removeClass('d-none');$info.addClass('d-none');}else{$embedded.attr('src','about:blank');$embedded.addClass('d-none');$info.removeClass('d-none');}},});__exports[Symbol.for("default")]={Map:options.registry.Map,};return __exports;});;

/* /website/static/src/snippets/s_dynamic_snippet/options.js */
odoo.define('@website/snippets/s_dynamic_snippet/options',['@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];const dynamicSnippetOptions=options.Class.extend({init:function(){this._super.apply(this,arguments);this.modelNameFilter=undefined;this.contextualFilterDomain=[];this.dynamicFilters={};this.currentModelName=undefined;this.dynamicFilterTemplates={};this.isOptionDefault={};this.rpc=this.bindService("rpc");},async willStart(){const _super=this._super.bind(this);await this._fetchDynamicFilters();await this._fetchDynamicFilterTemplates();return _super(...arguments);},async onBuilt(){await this._setOptionsDefaultValues();return this._refreshPublicWidgets();},selectDataAttribute:function(previewMode,widgetValue,params){this._super.apply(this,arguments);if(params.attributeName==='filterId'&&previewMode===false){const filter=this.dynamicFilters[parseInt(widgetValue)];this.$target.get(0).dataset.numberOfRecords=filter.limit;return this._filterUpdated(filter);}
if(params.attributeName==='templateKey'&&previewMode===false){this._templateUpdated(widgetValue,params.activeValue);}},async updateUI(){if(this.rerender){this.rerender=false;await this._rerenderXML();return;}
await this._super(...arguments);},_getCurrentTemplate:function(){return this.dynamicFilterTemplates[this.$target.get(0).dataset['templateKey']];},_getTemplateClass:function(templateKey){return templateKey.replace(/.*\.dynamic_filter_template_/,"s_");},_computeWidgetVisibility:function(widgetName,params){if(widgetName==='filter_opt'){return Object.keys(this.dynamicFilters).length!==1;}
if(widgetName==='number_of_records_opt'){const template=this._getCurrentTemplate();return template&&!template.numOfElFetch;}
return this._super.apply(this,arguments);},_refreshPublicWidgets:function(){return this._super.apply(this,arguments).then(()=>{const template=this._getCurrentTemplate();this.$target.find('.missing_option_warning').toggleClass('d-none',!!template);});},async _fetchDynamicFilters(){const dynamicFilters=await this.rpc('/website/snippet/options_filters',{model_name:this.modelNameFilter,search_domain:this.contextualFilterDomain,});if(!dynamicFilters.length){return;}
for(let index in dynamicFilters){this.dynamicFilters[dynamicFilters[index].id]=dynamicFilters[index];}
this._defaultFilterId=dynamicFilters[0].id;},async _fetchDynamicFilterTemplates(){const filter=this.dynamicFilters[this.$target.get(0).dataset['filterId']]||this.dynamicFilters[this._defaultFilterId];this.dynamicFilterTemplates={};if(!filter){return[];}
const dynamicFilterTemplates=await this.rpc('/website/snippet/filter_templates',{filter_name:filter.model_name.replaceAll('.','_'),});for(let index in dynamicFilterTemplates){this.dynamicFilterTemplates[dynamicFilterTemplates[index].key]=dynamicFilterTemplates[index];}
this._defaultTemplateKey=dynamicFilterTemplates[0].key;},_renderCustomXML:async function(uiFragment){await this._renderDynamicFiltersSelector(uiFragment);await this._renderDynamicFilterTemplatesSelector(uiFragment);},_renderDynamicFiltersSelector:async function(uiFragment){const filtersSelectorEl=uiFragment.querySelector('[data-name="filter_opt"]');return this._renderSelectUserValueWidgetButtons(filtersSelectorEl,this.dynamicFilters);},_renderSelectUserValueWidgetButtons:async function(selectUserValueWidgetElement,data){for(let id in data){const button=document.createElement('we-button');button.dataset.selectDataAttribute=id;if(data[id].thumb){button.dataset.img=data[id].thumb;}else{button.innerText=data[id].name;}
selectUserValueWidgetElement.appendChild(button);}},_renderDynamicFilterTemplatesSelector:async function(uiFragment){const templatesSelectorEl=uiFragment.querySelector('[data-name="template_opt"]');return this._renderSelectUserValueWidgetButtons(templatesSelectorEl,this.dynamicFilterTemplates);},async _setOptionsDefaultValues(){this.options.wysiwyg.odooEditor.observerUnactive();const filterKeys=this.$el.find("we-select[data-attribute-name='filterId'] we-selection-items we-button");if(filterKeys.length>0){this._setOptionValue('numberOfRecords',this.dynamicFilters[Object.keys(this.dynamicFilters)[0]].limit);}
let selectedFilterId=this.$target.get(0).dataset['filterId'];if(Object.keys(this.dynamicFilters).length>0){if(!this.dynamicFilters[selectedFilterId]){this.$target.get(0).dataset['filterId']=this._defaultFilterId;this.isOptionDefault['filterId']=true;selectedFilterId=this._defaultFilterId;}}
if(this.dynamicFilters[selectedFilterId]&&!this.dynamicFilterTemplates[this.$target.get(0).dataset['templateKey']]){this._setDefaultTemplate();}
this.options.wysiwyg.odooEditor.observerActive();},async _filterUpdated(filter){if(filter&&this.currentModelName!==filter.model_name){this.currentModelName=filter.model_name;await this._fetchDynamicFilterTemplates();if(Object.keys(this.dynamicFilterTemplates).length>0){const selectedTemplateId=this.$target.get(0).dataset['templateKey'];if(!this.dynamicFilterTemplates[selectedTemplateId]){this._setDefaultTemplate();}}
this.rerender=true;}},_setDefaultTemplate(){if(Object.keys(this.dynamicFilterTemplates).length){this.$target.get(0).dataset['templateKey']=this._defaultTemplateKey;this.isOptionDefault['templateKey']=true;this._templateUpdated(this._defaultTemplateKey);}},_templateUpdated(newTemplateKey,oldTemplateKey){if(oldTemplateKey){this.$target.removeClass(this._getTemplateClass(oldTemplateKey));}
this.$target.addClass(this._getTemplateClass(newTemplateKey));const template=this.dynamicFilterTemplates[newTemplateKey];if(template.numOfEl){this.$target[0].dataset.numberOfElements=template.numOfEl;}else{delete this.$target[0].dataset.numberOfElements;}
if(template.numOfElSm){this.$target[0].dataset.numberOfElementsSmallDevices=template.numOfElSm;}else{delete this.$target[0].dataset.numberOfElementsSmallDevices;}
if(template.numOfElFetch){this.$target[0].dataset.numberOfRecords=template.numOfElFetch;}
if(template.extraClasses){this.$target[0].dataset.extraClasses=template.extraClasses;}else{delete this.$target[0].dataset.extraClasses;}},_setOptionValue:function(optionName,value){const selectedTemplateId=this.$target.get(0).dataset['templateKey'];if(this.$target.get(0).dataset[optionName]===undefined||this.isOptionDefault[optionName]){this.$target.get(0).dataset[optionName]=value;this.isOptionDefault[optionName]=false;}
if(optionName==='templateKey'){this._templateUpdated(value,selectedTemplateId);}},});options.registry.dynamic_snippet=dynamicSnippetOptions;__exports[Symbol.for("default")]=dynamicSnippetOptions;return __exports;});;

/* /website/static/src/snippets/s_dynamic_snippet_carousel/options.js */
odoo.define('@website/snippets/s_dynamic_snippet_carousel/options',['@web_editor/js/editor/snippets.options','@website/snippets/s_dynamic_snippet/options'],function(require){'use strict';let __exports={};const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];const s_dynamic_snippet_options=require("@website/snippets/s_dynamic_snippet/options")[Symbol.for("default")];const dynamicSnippetCarouselOptions=s_dynamic_snippet_options.extend({_setOptionsDefaultValues:function(){this._super.apply(this,arguments);this._setOptionValue('carouselInterval','5000');},_templateUpdated(newTemplate,oldTemplate){this._super(...arguments);const template=this.dynamicFilterTemplates[newTemplate];if(template.rowPerSlide){this.$target[0].dataset.rowPerSlide=template.rowPerSlide;}else{delete this.$target[0].dataset.rowPerSlide;}
if(template.arrowPosition){this.$target[0].dataset.arrowPosition=template.arrowPosition;}else{delete this.$target[0].dataset.arrowPosition;}},});options.registry.dynamic_snippet_carousel=dynamicSnippetCarouselOptions;__exports[Symbol.for("default")]=dynamicSnippetCarouselOptions;return __exports;});;

/* /website/static/src/snippets/s_website_controller_page_listing_layout/options.js */
odoo.define('@website/snippets/s_website_controller_page_listing_layout/options',['@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];const mainObjectRe=/website\.controller\.page\(((\d+,?)*)\)/;options.registry.WebsiteControllerPageListingLayout=options.Class.extend({init(){this._super(...arguments);this.rpc=this.bindService("rpc");this.orm=this.bindService("orm");this.resModel="website.controller.page";},async willStart(){const _super=this._super.bind(this);const mainObjectRepr=this.$target[0].ownerDocument.documentElement.getAttribute("data-main-object");const match=mainObjectRe.exec(mainObjectRepr);if(match&&match[1]){this.resIds=match[1].split(",").flatMap(e=>{if(!e){return[];}
const id=parseInt(e);return id?[id]:[];});}
const results=await this.orm.read(this.resModel,this.resIds,["default_layout"]);this.layout=results[0]["default_layout"];return _super(...arguments);},async setLayout(previewMode,widgetValue){const params={layout_mode:widgetValue,view_id:this.$target[0].getAttribute("data-view-id"),};await Promise.all([this.orm.write(this.resModel,this.resIds,{default_layout:widgetValue}),this.rpc("/website/save_session_layout_mode",params),]);},_computeWidgetState(methodName){switch(methodName){case'setLayout':{return this.layout;}}
return this._super(...arguments);},});return __exports;});;

/* /website/static/src/snippets/s_website_form/options.js */
odoo.define('@website/snippets/s_website_form/options',['@website/js/form_editor_registry','@web_editor/js/editor/snippets.options','@web/core/confirmation_dialog/confirmation_dialog','@web_editor/js/common/utils','@website/js/editor/snippets.options','@web/core/utils/arrays','@web/core/l10n/translation','@web/core/utils/render','@web/core/l10n/dates','@website/js/utils'],function(require){'use strict';let __exports={};const FormEditorRegistry=require("@website/js/form_editor_registry")[Symbol.for("default")];const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];const{ConfirmationDialog}=require("@web/core/confirmation_dialog/confirmation_dialog");const weUtils=require("@web_editor/js/common/utils")[Symbol.for("default")];require("@website/js/editor/snippets.options");const{unique}=require("@web/core/utils/arrays");const{_t}=require("@web/core/l10n/translation");const{renderToElement}=require("@web/core/utils/render");const{formatDate,formatDateTime}=require("@web/core/l10n/dates");const wUtils=require('@website/js/utils')[Symbol.for("default")];let currentActionName;const allFormsInfo=new Map();const clearAllFormsInfo=()=>{allFormsInfo.clear();};function _getDomain(formEl,name,type,relation){if(!allFormsInfo.get(formEl)||!name||!type||!relation){return false;}
const field=allFormsInfo.get(formEl).fields.find(el=>el.name===name&&el.type===type&&el.relation===relation);return field&&field.domain;}
const FormEditor=options.Class.extend({init(){this._super(...arguments);this.orm=this.bindService("orm");},_fetchFieldRecords:async function(field){field.required=field.required?1:null;if(field.records){return field.records;}
if(field.type==='selection'){field.records=field.selection.map(el=>({id:el[0],display_name:el[1],}));}else if(field.relation&&field.relation!=='ir.attachment'){field.records=await this.orm.searchRead(field.relation,field.domain||[],["display_name"]);}
return field.records;},_getCustomField:function(type,name){return{name:name,string:name,custom:true,type:type,records:[{id:_t('Option 1'),display_name:_t('Option 1'),},{id:_t('Option 2'),display_name:_t('Option 2'),},{id:_t('Option 3'),display_name:_t('Option 3'),}],};},_getDefaultFormat:function(){return{labelWidth:this.$target[0].querySelector('.s_website_form_label').style.width,labelPosition:'left',multiPosition:'horizontal',requiredMark:this._isRequiredMark(),optionalMark:this._isOptionalMark(),mark:this._getMark(),};},_getMark:function(){return this.$target[0].dataset.mark;},_getQuotesEncodedName(name){return name.replaceAll(/"/g,character=>`&quot;`).replaceAll(/'/g,character=>`&apos;`).replaceAll(/`/g,character=>`&lsquo;`).replaceAll("\\",character=>`&bsol;`);},_isOptionalMark:function(){return this.$target[0].classList.contains('o_mark_optional');},_isRequiredMark:function(){return this.$target[0].classList.contains('o_mark_required');},_renderField:function(field,resetId=false){if(!field.id){field.id=weUtils.generateHTMLId();}
const params={field:{...field}};if(["url","email","tel"].includes(field.type)){params.field.inputType=field.type;}
if(["boolean","selection","binary"].includes(field.type)){params.field.isCheck=true;}
if(field.type==="one2many"&&field.relation!=="ir.attachment"){params.field.isCheck=true;}
if(field.custom&&!field.string){params.field.string=field.name;}
if(field.description){params.default_description=_t("Describe your field here.");}else if(["email_cc","email_to"].includes(field.name)){params.default_description=_t("Separate email addresses with a comma.");}
const template=document.createElement('template');template.content.append(renderToElement("website.form_field_"+field.type,params));if(field.description&&field.description!==true){$(template.content.querySelector('.s_website_form_field_description')).replaceWith(field.description);}
template.content.querySelectorAll('input.datetimepicker-input').forEach(el=>el.value=field.propertyValue);template.content.querySelectorAll("[name]").forEach(el=>{el.name=this._getQuotesEncodedName(el.name);});template.content.querySelectorAll("[data-name]").forEach(el=>{el.dataset.name=this._getQuotesEncodedName(el.dataset.name);});return template.content.firstElementChild;},});const FieldEditor=FormEditor.extend({VISIBILITY_DATASET:['visibilityDependency','visibilityCondition','visibilityComparator','visibilityBetween'],init:function(){this._super.apply(this,arguments);this.formEl=this.$target[0].closest('form');},_getActiveField:function(noRecords){let field;const labelText=this.$target.find('.s_website_form_label_content').text();if(this._isFieldCustom()){field=this._getCustomField(this.$target[0].dataset.type,labelText);}else{field=Object.assign({},this.fields[this._getFieldName()]);field.string=labelText;field.type=this._getFieldType();}
if(!noRecords){field.records=this._getListItems();}
this._setActiveProperties(field);return field;},_getFieldFormat:function(){let requiredMark,optionalMark;const mark=this.$target[0].querySelector('.s_website_form_mark');if(mark){requiredMark=this._isFieldRequired();optionalMark=!requiredMark;}
const multipleInput=this._getMultipleInputs();const format={labelPosition:this._getLabelPosition(),labelWidth:this.$target[0].querySelector('.s_website_form_label').style.width,multiPosition:multipleInput&&multipleInput.dataset.display||'horizontal',col:[...this.$target[0].classList].filter(el=>el.match(/^col-/g)).join(' '),requiredMark:requiredMark,optionalMark:optionalMark,mark:mark&&mark.textContent,};return format;},_getFieldName:function(fieldEl=this.$target[0]){const multipleName=fieldEl.querySelector('.s_website_form_multiple');return multipleName?multipleName.dataset.name:fieldEl.querySelector('.s_website_form_input').name;},_getFieldType:function(){return this.$target[0].dataset.type;},_getLabelPosition:function(){const label=this.$target[0].querySelector('.s_website_form_label');if(this.$target[0].querySelector('.row:not(.s_website_form_multiple)')){return label.classList.contains('text-end')?'right':'left';}else{return label.classList.contains('d-none')?'none':'top';}},_getMultipleInputs:function(){return this.$target[0].querySelector('.s_website_form_multiple');},_isFieldCustom:function(){return!!this.$target[0].classList.contains('s_website_form_custom');},_isFieldRequired:function(){const classList=this.$target[0].classList;return classList.contains('s_website_form_required')||classList.contains('s_website_form_model_required');},_setActiveProperties(field){const classList=this.$target[0].classList;const textarea=this.$target[0].querySelector('textarea');const input=this.$target[0].querySelector('input[type="text"], input[type="email"], input[type="number"], input[type="tel"], input[type="url"], textarea');const fileInputEl=this.$target[0].querySelector("input[type=file]");const description=this.$target[0].querySelector('.s_website_form_field_description');field.placeholder=input&&input.placeholder;if(input){field.value=input.getAttribute('value')||input.value;}else if(field.type==='boolean'){field.value=!!this.$target[0].querySelector('input[type="checkbox"][checked]');}else if(fileInputEl){field.maxFilesNumber=fileInputEl.dataset.maxFilesNumber;field.maxFileSize=fileInputEl.dataset.maxFileSize;}
field.propertyValue=input&&input.value;field.description=description&&description.outerHTML;field.rows=textarea&&textarea.rows;field.required=classList.contains('s_website_form_required');field.modelRequired=classList.contains('s_website_form_model_required');field.hidden=classList.contains('s_website_form_field_hidden');field.formatInfo=this._getFieldFormat();},});options.registry.WebsiteFormEditor=FormEditor.extend({events:Object.assign({},options.Class.prototype.events||{},{'click .toggle-edit-message':'_onToggleEndMessageClick',}),init(){this._super(...arguments);this.notification=this.bindService("notification");this.dialog=this.bindService("dialog");},willStart:async function(){const _super=this._super.bind(this);this.modelCantChange=this.$target.attr('hide-change-model')!==undefined;if(this.modelCantChange){return _super(...arguments);}
this.models=await this.orm.call("ir.model","get_compatible_form_models");const targetModelName=this.$target[0].dataset.model_name||'mail.mail';this.activeForm=this.models.find(m=>m.model===targetModelName);currentActionName=this.activeForm.website_form_label;this.selectActionEl=document.createElement('we-select');this.selectActionEl.setAttribute('string','Action');this.selectActionEl.dataset.noPreview='true';this.models.forEach(el=>{const option=document.createElement('we-button');option.textContent=el.website_form_label;option.dataset.selectAction=el.id;this.selectActionEl.append(option);});return _super(...arguments);},start:function(){const proms=[this._super(...arguments)];this.$target.attr('contentEditable',false);this.$target.find('.s_website_form_send, .s_website_form_field_description, .s_website_form_recaptcha').attr('contentEditable',true);this.$message=this.$target.parent().find('.s_website_form_end_message');this.showEndMessage=false;if(!this.$target[0].dataset.model_name){proms.push(this._applyFormModel());}
const formId=this.$target[0].id;const dataForValues=wUtils.getParsedDataFor(formId,this.$target[0].ownerDocument);if(dataForValues){this.dataForEmailTo=dataForValues['email_to'];}
this.defaultEmailToValue="info@yourcompany.example.com";return Promise.all(proms);},cleanForSave:function(){const model=this.$target[0].dataset.model_name;if(model){const fields=[...this.$target[0].querySelectorAll('.s_website_form_field:not(.s_website_form_custom) .s_website_form_input')].map(el=>el.name);if(fields.length){this.orm.call("ir.model.fields","formbuilder_whitelist",[model,unique(fields)]);}}
if(this.$message.length){this.$target.removeClass('d-none');this.$message.addClass("d-none");}},updateUI:async function(){if(this.rerender){this.rerender=false;await this._rerenderXML();return;}
await this._super.apply(this,arguments);this.updateUIEndMessage();},updateUIEndMessage:function(){this.$target.toggleClass("d-none",this.showEndMessage);this.$message.toggleClass("d-none",!this.showEndMessage);this.$el.find(".toggle-edit-message").toggleClass('text-primary',this.showEndMessage);},notify:function(name,data){this._super(...arguments);if(name==='field_mark'){this._setLabelsMark();}else if(name==='add_field'){const field=this._getCustomField('char','Custom Text');field.formatInfo=data.formatInfo;field.formatInfo.requiredMark=this._isRequiredMark();field.formatInfo.optionalMark=this._isOptionalMark();field.formatInfo.mark=this._getMark();const fieldEl=this._renderField(field);data.$target.after(fieldEl);this.trigger_up('activate_snippet',{$snippet:$(fieldEl),});}},addActionField:function(previewMode,value,params){const fieldName=params.fieldName;if(params.isSelect==='true'){value=parseInt(value);}
this._addHiddenField(value,fieldName);},promptSaveRedirect:function(name,value,widgetValue){return new Promise((resolve,reject)=>{const message=_t("Would you like to save before being redirected? Unsaved changes will be discarded.");this.dialog.add(ConfirmationDialog,{body:message,confirmLabel:_t("Save"),confirm:()=>{this.trigger_up('request_save',{reload:false,onSuccess:()=>{this._redirectToAction(value);},onFailure:()=>{this.notification.add(_t("Something went wrong."),{type:'danger',sticky:true,});reject();},});},cancel:()=>resolve(),});});},onSuccess:function(previewMode,value,params){this.$target[0].dataset.successMode=value;if(value==='message'){if(!this.$message.length){this.$message=$(renderToElement('website.s_website_form_end_message'));}
this.$target.after(this.$message);}else{this.showEndMessage=false;this.$message.remove();}},selectAction:async function(previewMode,value,params){if(this.modelCantChange){return;}
await this._applyFormModel(parseInt(value));this.rerender=true;},selectClass:function(previewMode,value,params){this._super(...arguments);if(params.name==='field_mark_select'){this._setLabelsMark();}},setMark:function(previewMode,value,params){this.$target[0].dataset.mark=value.trim();this._setLabelsMark();},toggleRecaptchaLegal:function(previewMode,value,params){const recaptchaLegalEl=this.$target[0].querySelector('.s_website_form_recaptcha');if(recaptchaLegalEl){recaptchaLegalEl.remove();}else{const labelWidth=this.$target[0].querySelector('.s_website_form_label').style.width;const legal=renderToElement("website.s_website_form_recaptcha_legal",{labelWidth:labelWidth,});legal.setAttribute('contentEditable',true);this.$target.find('.s_website_form_submit').before(legal);}},_computeWidgetState:function(methodName,params){switch(methodName){case'selectAction':return this.activeForm.id;case'addActionField':{const value=this.$target.find(`.s_website_form_dnone input[name="${params.fieldName}"]`).val();if(params.fieldName==='email_to'){if(value&&value!==this.defaultEmailToValue){return value;}
return this.dataForEmailTo||this.defaultEmailToValue;}
if(value){return value;}else{return params.isSelect?'0':'';}}
case'onSuccess':return this.$target[0].dataset.successMode;case'setMark':return this._getMark();case'toggleRecaptchaLegal':return!this.$target[0].querySelector('.s_website_form_recaptcha')||'';}
return this._super(...arguments);},_renderCustomXML:function(uiFragment){if(this.modelCantChange){return;}
const firstOption=uiFragment.childNodes[0];uiFragment.insertBefore(this.selectActionEl.cloneNode(true),firstOption);const formKey=this.activeForm.website_form_key;const formInfo=FormEditorRegistry.get(formKey,null);if(!formInfo||!formInfo.fields){return;}
allFormsInfo.set(this.$target[0],formInfo);const proms=formInfo.fields.map(field=>this._fetchFieldRecords(field));return Promise.all(proms).then(()=>{formInfo.fields.forEach(field=>{let option;switch(field.type){case'many2one':option=this._buildSelect(field);break;case'char':option=this._buildInput(field);break;}
if(field.required){const currentValue=this.$target.find(`.s_website_form_dnone input[name="${field.name}"]`).val();const defaultValue=field.defaultValue||field.records[0].id;this._addHiddenField(currentValue||defaultValue,field.name);}
uiFragment.insertBefore(option,firstOption);});});},_addHiddenField:function(value,fieldName){this.$target.find(`.s_website_form_dnone:has(input[name="${fieldName}"])`).remove();if(fieldName==='email_to'&&!value&&!this.dataForEmailTo){value=this.defaultEmailToValue;}
if(value||fieldName==='email_to'){const hiddenField=renderToElement('website.form_field_hidden',{field:{name:fieldName,value:value,dnone:true,formatInfo:{},},});this.$target.find('.s_website_form_submit').before(hiddenField);}},_buildInput:function(field){const inputEl=document.createElement('we-input');inputEl.dataset.noPreview='true';inputEl.dataset.fieldName=field.name;inputEl.dataset.addActionField='';inputEl.setAttribute('string',field.string);inputEl.classList.add('o_we_large');return inputEl;},_buildSelect:function(field){const selectEl=document.createElement('we-select');selectEl.dataset.noPreview='true';selectEl.dataset.fieldName=field.name;selectEl.dataset.isSelect='true';selectEl.setAttribute('string',field.string);if(!field.required){const noneButton=document.createElement('we-button');noneButton.textContent='None';noneButton.dataset.addActionField=0;selectEl.append(noneButton);}
field.records.forEach(el=>{const button=document.createElement('we-button');button.textContent=el.display_name;button.dataset.addActionField=el.id;selectEl.append(button);});if(field.createAction){return this._addCreateButton(selectEl,field.createAction);}
return selectEl;},_addCreateButton:function(element,action){const linkButtonEl=document.createElement('we-button');linkButtonEl.title=_t("Create new");linkButtonEl.dataset.noPreview='true';linkButtonEl.dataset.promptSaveRedirect=action;linkButtonEl.classList.add('fa','fa-fw','fa-plus');const projectRowEl=document.createElement('we-row');projectRowEl.append(element);projectRowEl.append(linkButtonEl);return projectRowEl;},_applyFormModel:async function(modelId){let oldFormInfo;if(modelId){const oldFormKey=this.activeForm.website_form_key;if(oldFormKey){oldFormInfo=FormEditorRegistry.get(oldFormKey,null);}
this.$target.find('.s_website_form_field').remove();this.activeForm=this.models.find(model=>model.id===modelId);currentActionName=this.activeForm.website_form_label;}
const formKey=this.activeForm.website_form_key;const formInfo=FormEditorRegistry.get(formKey,null);if(!this.$target[0].dataset.successMode){this.$target[0].dataset.successMode='redirect';}
if(this.$target[0].dataset.successMode==='redirect'){const currentSuccessPage=this.$target[0].dataset.successPage;if(formInfo&&formInfo.successPage){this.$target[0].dataset.successPage=formInfo.successPage;}else if(!oldFormInfo||(oldFormInfo!==formInfo&&oldFormInfo.successPage&&currentSuccessPage===oldFormInfo.successPage)){this.$target[0].dataset.successPage='/contactus-thank-you';}}
this.$target[0].dataset.model_name=this.activeForm.model;if(formInfo){const formatInfo=this._getDefaultFormat();await formInfo.formFields.forEach(async field=>{field.formatInfo=formatInfo;await this._fetchFieldRecords(field);this.$target.find('.s_website_form_submit, .s_website_form_recaptcha').first().before(this._renderField(field));});}},_setLabelsMark:function(){this.$target[0].querySelectorAll('.s_website_form_mark').forEach(el=>el.remove());const mark=this._getMark();if(!mark){return;}
let fieldsToMark=[];const requiredSelector='.s_website_form_model_required, .s_website_form_required';const fields=Array.from(this.$target[0].querySelectorAll('.s_website_form_field'));if(this._isRequiredMark()){fieldsToMark=fields.filter(el=>el.matches(requiredSelector));}else if(this._isOptionalMark()){fieldsToMark=fields.filter(el=>!el.matches(requiredSelector));}
fieldsToMark.forEach(field=>{let span=document.createElement('span');span.classList.add('s_website_form_mark');span.textContent=` ${mark}`;field.querySelector('.s_website_form_label').appendChild(span);});},_redirectToAction:function(action){window.location.replace(`/web#action=${encodeURIComponent(action)}`);},_onToggleEndMessageClick:function(){this.showEndMessage=!this.showEndMessage;this.updateUIEndMessage();this.trigger_up('activate_snippet',{$snippet:this.showEndMessage?this.$message:this.$target,});},});const authorizedFieldsCache={};options.registry.WebsiteFieldEditor=FieldEditor.extend({init:function(){this._super.apply(this,arguments);this.rerender=true;},willStart:async function(){const _super=this._super.bind(this);const model=this.formEl.dataset.model_name;let getFields;if(model in authorizedFieldsCache){getFields=authorizedFieldsCache[model];}else{getFields=this.orm.call("ir.model","get_authorized_fields",[model]);authorizedFieldsCache[model]=getFields;}
this.existingFields=await getFields.then((fields)=>{this.fields={};for(const[fieldName,field]of Object.entries(fields)){field.name=fieldName;const fieldDomain=_getDomain(this.formEl,field.name,field.type,field.relation);field.domain=fieldDomain||field.domain||[];this.fields[fieldName]=field;}
return Object.keys(fields).map(key=>{const field=fields[key];const button=document.createElement('we-button');button.textContent=field.string;button.dataset.existingField=field.name;return button;}).sort((a,b)=>(a.textContent>b.textContent)?1:(a.textContent<b.textContent)?-1:0);});return _super(...arguments);},start:async function(){const _super=this._super.bind(this);const select=this._getSelect();if(select){const field=this._getActiveField();await this._replaceField(field);}
return _super(...arguments);},cleanForSave:function(){this.$target[0].querySelectorAll('#editable_select').forEach(el=>el.remove());const select=this._getSelect();if(select){select.style.display='';}},updateUI:async function(){if(this.rerender){this.rerender=false;await this._rerenderXML();return;}
await this._super.apply(this,arguments);},onFocus:function(){this.rerender=true;},onClone(){const field=this._getActiveField();delete field.id;const fieldEl=this._renderField(field);this._replaceFieldElement(fieldEl);},onRemove(){const fieldName=this.$target[0].querySelector('.s_website_form_input').name;const isMultipleField=this.formEl.querySelectorAll(`.s_website_form_input[name="${fieldName}"]`).length>1;if(isMultipleField){return;}
const dependentFieldContainerEl=this.formEl.querySelectorAll(`[data-visibility-dependency="${fieldName}"]`);for(const fieldContainerEl of dependentFieldContainerEl){this._deleteConditionalVisibility(fieldContainerEl);}},toggleDescription:async function(previewMode,value,params){const field=this._getActiveField();field.description=!!value;await this._replaceField(field);},customField:async function(previewMode,value,params){if(!value){return;}
const oldLabelText=this.$target[0].querySelector('.s_website_form_label_content').textContent;const field=this._getCustomField(value,oldLabelText);this._setActiveProperties(field);await this._replaceField(field);this.rerender=true;},existingField:async function(previewMode,value,params){if(!value){return;}
const field=Object.assign({},this.fields[value]);this._setActiveProperties(field);await this._replaceField(field);this.rerender=true;},setLabelText:function(previewMode,value,params){this.$target.find('.s_website_form_label_content').text(value);if(this._isFieldCustom()){value=this._getQuotesEncodedName(value);const multiple=this.$target[0].querySelector('.s_website_form_multiple');if(multiple){multiple.dataset.name=value;}
const inputEls=this.$target[0].querySelectorAll('.s_website_form_input');const previousInputName=inputEls[0].name;inputEls.forEach(el=>el.name=value);const dependentEls=this.formEl.querySelectorAll(`.s_website_form_field[data-visibility-dependency="${previousInputName}"]`);for(const dependentEl of dependentEls){if(!previewMode&&this._findCircular(this.$target[0],dependentEl)){this._deleteConditionalVisibility(dependentEl);}else{dependentEl.dataset.visibilityDependency=value;}}
if(!previewMode){this.rerender=true;}}},selectLabelPosition:async function(previewMode,value,params){const field=this._getActiveField();field.formatInfo.labelPosition=value;await this._replaceField(field);},selectType:async function(previewMode,value,params){const field=this._getActiveField();field.type=value;await this._replaceField(field);},selectTextareaValue:function(previewMode,value,params){this.$target[0].textContent=value;this.$target[0].value=value;},selectValueProperty:function(previewMode,value,params){const[target]=this.$target;const field=target.closest(".s_website_form_date, .s_website_form_datetime");const format=field.matches(".s_website_form_date")?formatDate:formatDateTime;target.value=value?format(luxon.DateTime.fromSeconds(parseInt(value))):"";},multiCheckboxDisplay:function(previewMode,value,params){const target=this._getMultipleInputs();target.querySelectorAll('.checkbox, .radio').forEach(el=>{if(value==='horizontal'){el.classList.add('col-lg-4','col-md-6');}else{el.classList.remove('col-lg-4','col-md-6');}});target.dataset.display=value;},toggleRequired:function(previewMode,value,params){const isRequired=this.$target[0].classList.contains(params.activeValue);this.$target[0].classList.toggle(params.activeValue,!isRequired);this.$target[0].querySelectorAll('input, select, textarea').forEach(el=>el.toggleAttribute('required',!isRequired));this.trigger_up('option_update',{optionName:'WebsiteFormEditor',name:'field_mark',});},renderListItems:async function(previewMode,value,params){const valueList=JSON.parse(value);const newValuesText=valueList.map(value=>value.name);const inputEls=this.$target[0].querySelectorAll('.s_website_form_input, option');const inputName=this.$target[0].querySelector('.s_website_form_input').name;for(let i=0;i<inputEls.length;i++){const input=inputEls[i];if(newValuesText[i]&&input.value&&!newValuesText.includes(input.value)){for(const dependentEl of this.formEl.querySelectorAll(`[data-visibility-condition="${input.value}"][data-visibility-dependency="${inputName}"]`)){dependentEl.dataset.visibilityCondition=newValuesText[i];}
break;}}
const field=this._getActiveField(true);field.records=valueList;await this._replaceField(field);},setVisibility(previewMode,widgetValue,params){if(widgetValue==='conditional'){const widget=this.findWidget('hidden_condition_opt');const firstValue=widget.getMethodsParams('setVisibilityDependency').possibleValues.find(el=>el!=='');if(firstValue){this._setVisibilityDependency(firstValue);return;}
this.dialog.add(ConfirmationDialog,{body:_t("There is no field available for this option."),});}
this._deleteConditionalVisibility(this.$target[0]);},setVisibilityDependency(previewMode,widgetValue,params){this._setVisibilityDependency(widgetValue);},async selectDataAttribute(previewMode,widgetValue,params){await this._super(...arguments);if(params.attributeName==="maxFilesNumber"){const allowMultipleFiles=params.activeValue>1;this.$target[0].toggleAttribute("multiple",allowMultipleFiles);}},_computeWidgetState:function(methodName,params){switch(methodName){case'toggleDescription':{const description=this.$target[0].querySelector('.s_website_form_field_description');return!!description;}
case'customField':return this._isFieldCustom()?this._getFieldType():'';case'existingField':return this._isFieldCustom()?'':this._getFieldName();case'setLabelText':return this.$target.find('.s_website_form_label_content').text();case'selectLabelPosition':return this._getLabelPosition();case'selectType':return this._getFieldType();case'selectTextareaValue':return this.$target[0].textContent;case'selectValueProperty':return this.$target[0].getAttribute('value')||'';case'multiCheckboxDisplay':{const target=this._getMultipleInputs();return target?target.dataset.display:'';}
case'toggleRequired':return this.$target[0].classList.contains(params.activeValue)?params.activeValue:'false';case'renderListItems':return JSON.stringify(this._getListItems());case'setVisibilityDependency':return this.$target[0].dataset.visibilityDependency||'';}
return this._super(...arguments);},_computeWidgetVisibility:function(widgetName,params){const dependencyEl=this._getDependencyEl();switch(widgetName){case'hidden_condition_time_comparators_opt':return dependencyEl?.classList.contains("datetimepicker-input");case'hidden_condition_date_between':return dependencyEl?.closest(".s_website_form_date")&&['between','!between'].includes(this.$target[0].getAttribute('data-visibility-comparator'));case'hidden_condition_datetime_between':return dependencyEl?.closest(".s_website_form_datetime")&&['between','!between'].includes(this.$target[0].dataset.visibilityComparator);case'hidden_condition_additional_datetime':return dependencyEl?.closest(".s_website_form_datetime")&&!['set','!set'].includes(this.$target[0].dataset.visibilityComparator);case'hidden_condition_additional_date':return dependencyEl&&dependencyEl?.closest(".s_website_form_date")&&!['set','!set'].includes(this.$target[0].dataset.visibilityComparator);case'hidden_condition_additional_text':if(!this.$target[0].classList.contains('s_website_form_field_hidden_if')||(dependencyEl&&(['checkbox','radio'].includes(dependencyEl.type)||dependencyEl.nodeName==='SELECT'))){return false;}
if(!dependencyEl){return true;}
if(dependencyEl?.classList.contains("datetimepicker-input")){return false;}
return(['text','email','tel','url','search','password','number'].includes(dependencyEl.type)||dependencyEl.nodeName==='TEXTAREA')&&!['set','!set'].includes(this.$target[0].dataset.visibilityComparator);case'hidden_condition_no_text_opt':return dependencyEl&&(dependencyEl.type==='checkbox'||dependencyEl.type==='radio'||dependencyEl.nodeName==='SELECT');case'hidden_condition_num_opt':return dependencyEl&&dependencyEl.type==='number';case'hidden_condition_text_opt':if(!this.$target[0].classList.contains('s_website_form_field_hidden_if')||(dependencyEl?.classList.contains("datetimepicker-input"))){return false;}
return!dependencyEl||(['text','email','tel','url','search','password'].includes(dependencyEl.type)||dependencyEl.nodeName==='TEXTAREA');case'hidden_condition_date_opt':return dependencyEl?.closest(".s_website_form_date");case'hidden_condition_datetime_opt':return dependencyEl?.closest(".s_website_form_datetime");case'hidden_condition_file_opt':return dependencyEl&&dependencyEl.type==='file';case'hidden_condition_opt':return this.$target[0].classList.contains('s_website_form_field_hidden_if');case'char_input_type_opt':return!this.$target[0].classList.contains('s_website_form_custom')&&['char','email','tel','url'].includes(this.$target[0].dataset.type)&&!this.$target[0].classList.contains('s_website_form_model_required');case'multi_check_display_opt':return!!this._getMultipleInputs();case'required_opt':case'hidden_opt':case'type_opt':return!this.$target[0].classList.contains('s_website_form_model_required');case"max_files_number_opt":{const fieldEl=this.$target[0].closest(".s_website_form_field");return fieldEl.classList.contains("s_website_form_custom")||["one2many","many2many"].includes(fieldEl.dataset.type);}}
return this._super(...arguments);},_deleteConditionalVisibility(fieldEl){for(const name of this.VISIBILITY_DATASET){delete fieldEl.dataset[name];}
fieldEl.classList.remove('s_website_form_field_hidden_if','d-none');},_getDependencyEl(fieldEl=this.$target[0]){const dependencyName=fieldEl.dataset.visibilityDependency;return this.formEl.querySelector(`.s_website_form_input[name="${dependencyName}"]`);},_findCircular(dependentFieldEl,targetFieldEl=this.$target[0]){const visitedFields=new Set();const recursiveFindCircular=(dependentFieldEl,targetFieldEl)=>{const dependentFieldName=this._getFieldName(dependentFieldEl);let dependentFieldEls=Array.from(this.formEl.querySelectorAll(`.s_website_form_input[name="${dependentFieldName}"]`)).map((el)=>el.closest(".s_website_form_field"));dependentFieldEls=new Set(dependentFieldEls);const fieldName=this._getFieldName(targetFieldEl);for(const dependentFieldEl of dependentFieldEls){if(!(visitedFields.has(dependentFieldEl))){visitedFields.add(dependentFieldEl);if(dependentFieldEl.dataset.visibilityDependency===fieldName){return true;}
const dependencyInputEl=this._getDependencyEl(dependentFieldEl);if(dependencyInputEl&&recursiveFindCircular(dependencyInputEl.closest(".s_website_form_field"),targetFieldEl)){return true;}}}
return false;};return recursiveFindCircular(dependentFieldEl,targetFieldEl);},_renderCustomXML:async function(uiFragment){const selectDependencyEl=uiFragment.querySelector('we-select[data-name="hidden_condition_opt"]');const existingDependencyNames=[];for(const el of this.formEl.querySelectorAll('.s_website_form_field:not(.s_website_form_dnone)')){const inputEl=el.querySelector('.s_website_form_input');if(el.querySelector('.s_website_form_label_content')&&inputEl&&inputEl.name&&inputEl.name!==this.$target[0].querySelector('.s_website_form_input').name&&!existingDependencyNames.includes(inputEl.name)&&!this._findCircular(el)){const button=document.createElement('we-button');button.textContent=el.querySelector('.s_website_form_label_content').textContent;button.dataset.setVisibilityDependency=inputEl.name;selectDependencyEl.append(button);existingDependencyNames.push(inputEl.name);}}
const comparator=this.$target[0].dataset.visibilityComparator;const dependencyEl=this._getDependencyEl();if(dependencyEl){if((['radio','checkbox'].includes(dependencyEl.type)||dependencyEl.nodeName==='SELECT')){const selectOptEl=uiFragment.querySelectorAll('we-select[data-name="hidden_condition_no_text_opt"]')[1];const inputContainerEl=this.$target[0];const dependencyEl=this._getDependencyEl();if(dependencyEl.nodeName==='SELECT'){for(const option of dependencyEl.querySelectorAll('option')){const button=document.createElement('we-button');button.textContent=option.textContent||`<${_t("no value")}>`;button.dataset.selectDataAttribute=option.value;selectOptEl.append(button);}
if(!inputContainerEl.dataset.visibilityCondition){inputContainerEl.dataset.visibilityCondition=dependencyEl.querySelector('option').value;}}else{const dependencyContainerEl=dependencyEl.closest('.s_website_form_field');const inputsInDependencyContainer=dependencyContainerEl.querySelectorAll('.s_website_form_input');for(const el of inputsInDependencyContainer){const button=document.createElement('we-button');button.textContent=el.value;button.dataset.selectDataAttribute=el.value;selectOptEl.append(button);}
if(!inputContainerEl.dataset.visibilityCondition){inputContainerEl.dataset.visibilityCondition=inputsInDependencyContainer[0].value;}}
if(!inputContainerEl.dataset.visibilityComparator){inputContainerEl.dataset.visibilityComparator='selected';}
this.rerender=comparator?this.rerender:true;}
if(!comparator){if(dependencyEl.dataset.target){this.$target[0].dataset.visibilityComparator='after';}else if(['text','email','tel','url','search','password','number'].includes(dependencyEl.type)||dependencyEl.nodeName==='TEXTAREA'){this.$target[0].dataset.visibilityComparator='equal';}else if(dependencyEl.type==='file'){this.$target[0].dataset.visibilityComparator='fileSet';}}}
const selectEl=uiFragment.querySelector('we-select[data-name="type_opt"]');const currentFieldName=this._getFieldName();const fieldsInForm=Array.from(this.formEl.querySelectorAll('.s_website_form_field:not(.s_website_form_custom) .s_website_form_input')).map(el=>el.name).filter(el=>el!==currentFieldName);const availableFields=this.existingFields.filter(el=>!fieldsInForm.includes(el.dataset.existingField));if(availableFields.length){const title=document.createElement('we-title');title.textContent='Existing fields';availableFields.unshift(title);availableFields.forEach(option=>selectEl.append(option.cloneNode(true)));}
const select=this._getSelect();const multipleInputs=this._getMultipleInputs();if(!select&&!multipleInputs){return;}
const field=Object.assign({},this.fields[this._getFieldName()]);const type=this._getFieldType();const list=document.createElement('we-list');const optionText=select?'Option':type==='selection'?'Radio':'Checkbox';list.setAttribute('string',`${optionText} List`);list.dataset.addItemTitle=_t("Add new %s",optionText);list.dataset.renderListItems='';list.dataset.hasDefault=['one2many','many2many'].includes(type)?'multiple':'unique';const defaults=[...this.$target[0].querySelectorAll('[checked], [selected]')].map(el=>{return/^-?[0-9]{1,15}$/.test(el.value)?parseInt(el.value):el.value;});list.dataset.defaults=JSON.stringify(defaults);if(!this._isFieldCustom()){await this._fetchFieldRecords(field);list.dataset.availableRecords=JSON.stringify(field.records);}
uiFragment.insertBefore(list,uiFragment.querySelector('we-select[string="Visibility"]'));},_replaceField:async function(field){await this._fetchFieldRecords(field);const activeField=this._getActiveField();if(activeField.type!==field.type){field.value='';}
const fieldEl=this._renderField(field);this._replaceFieldElement(fieldEl);},_replaceFieldElement(fieldEl){const inputEl=this.$target[0].querySelector('input');const dataFillWith=inputEl?inputEl.dataset.fillWith:undefined;const hasConditionalVisibility=this.$target[0].classList.contains('s_website_form_field_hidden_if');const previousInputEl=this.$target[0].querySelector('.s_website_form_input');const previousName=previousInputEl.name;const previousType=previousInputEl.type;[...this.$target[0].childNodes].forEach(node=>node.remove());[...fieldEl.childNodes].forEach(node=>this.$target[0].appendChild(node));[...fieldEl.attributes].forEach(el=>this.$target[0].removeAttribute(el.nodeName));[...fieldEl.attributes].forEach(el=>this.$target[0].setAttribute(el.nodeName,el.nodeValue));if(hasConditionalVisibility){this.$target[0].classList.add('s_website_form_field_hidden_if','d-none');}
const dependentFieldEls=this.formEl.querySelectorAll(`.s_website_form_field[data-visibility-dependency="${previousName}"]`);const newFormInputEl=this.$target[0].querySelector('.s_website_form_input');const newName=newFormInputEl.name;const newType=newFormInputEl.type;if((previousName!==newName||previousType!==newType)&&dependentFieldEls){for(const fieldEl of dependentFieldEls){this._deleteConditionalVisibility(fieldEl);}}
const newInputEl=this.$target[0].querySelector('input');if(newInputEl){newInputEl.dataset.fillWith=dataFillWith;}},_setVisibilityDependency(value){delete this.$target[0].dataset.visibilityCondition;delete this.$target[0].dataset.visibilityComparator;this.rerender=true;this.$target[0].dataset.visibilityDependency=value;},_getListItems:function(){const select=this._getSelect();const multipleInputs=this._getMultipleInputs();let options=[];if(select){options=[...select.querySelectorAll('option')];}else if(multipleInputs){options=[...multipleInputs.querySelectorAll('.checkbox input, .radio input')];}
return options.map(opt=>{const name=select?opt:opt.nextElementSibling;return{id:/^-?[0-9]{1,15}$/.test(opt.value)?parseInt(opt.value):opt.value,display_name:name.textContent.trim(),selected:select?opt.selected:opt.checked,};});},_getSelect:function(){return this.$target[0].querySelector('select');},});options.registry.AddFieldForm=FormEditor.extend({isTopOption:true,isTopFirstOption:true,addField:async function(previewMode,value,params){const field=this._getCustomField('char','Custom Text');field.formatInfo=this._getDefaultFormat();const fieldEl=this._renderField(field);this.$target.find('.s_website_form_submit, .s_website_form_recaptcha').first().before(fieldEl);this.trigger_up('activate_snippet',{$snippet:$(fieldEl),});},});options.registry.AddField=FieldEditor.extend({isTopOption:true,isTopFirstOption:true,addField:async function(previewMode,value,params){this.trigger_up('option_update',{optionName:'WebsiteFormEditor',name:'add_field',data:{formatInfo:this._getFieldFormat(),$target:this.$target,},});},});const DisableOverlayButtonOption=options.Class.extend({disableButton:function(buttonName,message){const className='oe_snippet_'+buttonName;this.$overlay.add(this.$overlay.data('$optionsSection')).on('click','.'+className,this.preventButton);const $buttons=this.$overlay.add(this.$overlay.data('$optionsSection')).find('.'+className);for(const buttonEl of $buttons){buttonEl.classList.add('o_disabled');const spanEl=buttonEl.ownerDocument.createElement('span');spanEl.setAttribute('tabindex',0);spanEl.setAttribute('title',message);buttonEl.replaceWith(spanEl);spanEl.appendChild(buttonEl);Tooltip.getOrCreateInstance(spanEl,{delay:0});}},preventButton:function(event){event.preventDefault();event.stopImmediatePropagation();}});options.registry.WebsiteFormFieldModel=DisableOverlayButtonOption.extend({start:function(){this.disableButton('clone',_t('You cannot duplicate this field.'));return this._super.apply(this,arguments);}});options.registry.WebsiteFormFieldRequired=DisableOverlayButtonOption.extend({start:function(){this.disableButton("remove",_t("This field is mandatory for this action. You cannot remove it. Try hiding it with the"
+" 'Visibility' option instead and add it a default value."));return this._super.apply(this,arguments);},async _renderCustomXML(uiFragment){const fieldName=this.$target[0].querySelector("input.s_website_form_input").getAttribute("name");const spanEl=document.createElement("span");spanEl.innerText=_t("The field '%s' is mandatory for the action '%s'.",fieldName,currentActionName);uiFragment.querySelector("we-alert").appendChild(spanEl);},});options.registry.WebsiteFormSubmitRequired=DisableOverlayButtonOption.extend({start:function(){this.disableButton('remove',_t('You can\'t remove the submit button of the form'));this.disableButton('clone',_t('You can\'t duplicate the submit button of the form.'));return this._super.apply(this,arguments);}});options.registry.DeviceVisibility.include({async _computeVisibility(){return await this._super(...arguments)&&!this.$target.hasClass('s_website_form_field_hidden');},});__exports[Symbol.for("default")]={clearAllFormsInfo,};return __exports;});;

/* /website/static/src/js/form_editor_registry.js */
odoo.define('@website/js/form_editor_registry',['@web/core/registry'],function(require){'use strict';let __exports={};const{Registry}=require("@web/core/registry");__exports[Symbol.for("default")]=new Registry();return __exports;});;

/* /website/static/src/js/send_mail_form.js */
odoo.define('@website/js/send_mail_form',['@web/core/l10n/translation','@website/js/form_editor_registry'],function(require){'use strict';let __exports={};const{_t}=require("@web/core/l10n/translation");const FormEditorRegistry=require("@website/js/form_editor_registry")[Symbol.for("default")];FormEditorRegistry.add('send_mail',{formFields:[{type:'char',custom:true,required:true,fillWith:'name',name:'name',string:_t('Your Name'),},{type:'tel',custom:true,fillWith:'phone',name:'phone',string:_t('Phone Number'),},{type:'email',modelRequired:true,fillWith:'email',name:'email_from',string:_t('Your Email'),},{type:'char',custom:true,fillWith:'commercial_company_name',name:'company',string:_t('Your Company'),},{type:'char',modelRequired:true,name:'subject',string:_t('Subject'),},{type:'text',custom:true,required:true,name:'description',string:_t('Your Question'),}],fields:[{name:'email_to',type:'char',required:true,string:_t('Recipient Email'),defaultValue:'info@yourcompany.example.com',}],});return __exports;});;

/* /website/static/src/snippets/s_searchbar/options.js */
odoo.define('@website/snippets/s_searchbar/options',['@web/core/l10n/translation','@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const{_t}=require("@web/core/l10n/translation");const options=require('@web_editor/js/editor/snippets.options')[Symbol.for("default")];options.registry.SearchBar=options.Class.extend({start(){this.searchInputEl=this.$target[0].querySelector(".oe_search_box");this.searchButtonEl=this.$target[0].querySelector(".oe_search_button");return this._super(...arguments);},onBuilt(){if(!this.$target[0].closest(".s_custom_snippet")){this._setSearchbarStyleLight(false);}},setSearchType:function(previewMode,widgetValue,params){const form=this.$target.parents('form');form.attr('action',params.formAction);if(!previewMode){this.trigger_up('snippet_edition_request',{exec:()=>{const widget=this._requestUserValueWidgets('order_opt')[0];const orderBy=widget.getValue("selectDataAttribute");const order=widget.$el.find("we-button[data-select-data-attribute='"+orderBy+"']")[0];if(order.classList.contains("d-none")){const defaultOrder=widget.$el.find("we-button[data-name='order_name_asc_opt']")[0];defaultOrder.click();defaultOrder.click();}}});const displayOptions=new Set();for(const optionEl of this.$el[0].querySelectorAll('[data-dependencies="limit_opt"] [data-attribute-name^="display"]')){displayOptions.add(optionEl.dataset.attributeName);}
const scopeName=this.$el[0].querySelector(`[data-set-search-type="${widgetValue}"]`).dataset.name;for(const displayOption of displayOptions){this.$target[0].dataset[displayOption]=this.$el[0].querySelector(`[data-attribute-name="${displayOption}"][data-dependencies="${scopeName}"]`)?'true':'';}}},setOrderBy:function(previewMode,widgetValue,params){const form=this.$target.parents('form');form.find(".o_search_order_by").attr("value",widgetValue);},setSearchbarStyle(previewMode,widgetValue,params){this._setSearchbarStyleLight(widgetValue==="light");},_computeWidgetState(methodName,params){if(methodName==="setSearchbarStyle"){const searchInputIsLight=this.searchInputEl.matches(".border-0.bg-light");const searchButtonIsLight=this.searchButtonEl.matches(".btn-light");return searchInputIsLight&&searchButtonIsLight?"light":"default";}
return this._super(...arguments);},async _renderCustomXML(uiFragment){const weSelectEl=document.createElement("we-select");weSelectEl.setAttribute("string",_t("Style"));const defaultBtnEl=document.createElement("we-button");defaultBtnEl.dataset.setSearchbarStyle="default";defaultBtnEl.textContent=_t("Default Input Style");const lightBtnEl=document.createElement("we-button");lightBtnEl.dataset.setSearchbarStyle="light";lightBtnEl.textContent=_t("Light");weSelectEl.appendChild(defaultBtnEl);weSelectEl.appendChild(lightBtnEl);uiFragment.appendChild(weSelectEl);},_setSearchbarStyleLight(light){this.searchInputEl.classList.toggle("border-0",light);this.searchInputEl.classList.toggle("bg-light",light);this.searchButtonEl.classList.toggle("btn-light",light);this.searchButtonEl.classList.toggle("btn-primary",!light);},});__exports[Symbol.for("default")]={SearchBar:options.registry.SearchBar,};return __exports;});;

/* /website/static/src/snippets/s_social_media/options.js */
odoo.define('@website/snippets/s_social_media/options',['@web_editor/js/wysiwyg/fonts','@web_editor/js/common/utils','@web_editor/js/editor/snippets.options','@web/core/l10n/translation','@web_editor/js/editor/odoo-editor/src/utils/utils'],function(require){'use strict';let __exports={};const fonts=require('@web_editor/js/wysiwyg/fonts')[Symbol.for("default")];const weUtils=require('@web_editor/js/common/utils')[Symbol.for("default")];const options=require('@web_editor/js/editor/snippets.options')[Symbol.for("default")];const{_t}=require("@web/core/l10n/translation");const{ICON_SELECTOR}=require("@web_editor/js/editor/odoo-editor/src/utils/utils");let dbSocialValues;let dbSocialValuesProm;const clearDbSocialValuesCache=()=>{dbSocialValuesProm=undefined;dbSocialValues=undefined;};const getDbSocialValuesCache=()=>{return dbSocialValues;};options.registry.SocialMedia=options.Class.extend({init(){this._super(...arguments);this.orm=this.bindService("orm");},start(){this.__onSetupBannerClick=this._onSetupBannerClick.bind(this);this.$target[0].addEventListener('click',this.__onSetupBannerClick);this.entriesNotInDom=[];return this._super(...arguments);},async onBuilt(){await this._fetchSocialMedia();for(const anchorEl of this.$target[0].querySelectorAll(':scope > a')){const mediaName=anchorEl.href.split('/website/social/').pop();if(mediaName&&!dbSocialValues[`social_${mediaName}`]){anchorEl.remove();}}
this._handleNoMediaAlert();},async cleanForSave(){if(!dbSocialValues){return;}
let websiteId;this.trigger_up('context_get',{callback:function(ctx){websiteId=ctx['website_id'];},});await this.orm.write("website",[websiteId],dbSocialValues);},destroy(){this._super(...arguments);this.$target[0].removeEventListener('click',this.__onSetupBannerClick);},async renderListItems(previewMode,widgetValue,params){const ariaLabelsOfSocialNetworks={"facebook":_t("Facebook"),"twitter":_t("Twitter"),"linkedin":_t("LinkedIn"),"youtube":_t("YouTube"),"instagram":_t("Instagram"),"github":_t("GitHub"),"tiktok":_t("TikTok"),};const setAriaLabelOfSocialNetwork=(el,name,url)=>{let ariaLabel=ariaLabelsOfSocialNetworks[name];if(!ariaLabel){try{ariaLabel=new URL(url).hostname.split('.').slice(-2)[0];}catch{ariaLabel=_t("Other social network");}}
el.setAttribute("aria-label",ariaLabel);};const anchorEls=this.$target[0].querySelectorAll(':scope > a');let entries=JSON.parse(widgetValue);const anchorsToRemoveEls=[];for(let i=0;i<anchorEls.length;i++){if(!entries.find(entry=>parseInt(entry.domPosition)===i)){anchorsToRemoveEls.push(anchorEls[i]);}}
for(const el of anchorsToRemoveEls){el.remove();}
this.entriesNotInDom=[];for(let listPosition=0;listPosition<entries.length;listPosition++){const entry=entries[listPosition];const url=entry.display_name;if(url&&!/^(([a-zA-Z]+):|\/)/.test(url)){entry.display_name=`https://${url}`;}
const isDbField=Boolean(entry.media);if(isDbField){dbSocialValues[`social_${entry.media}`]=entry.display_name;}
let anchorEl=anchorEls[entry.domPosition];if(entry.selected){if(!anchorEl){if(anchorEls.length===0){anchorEl=document.createElement('a');anchorEl.setAttribute('target','_blank');const iEl=document.createElement('i');iEl.classList.add('fa','rounded-circle','shadow-sm','o_editable_media');anchorEl.appendChild(iEl);}else{anchorEl=this.$target[0].querySelector(':scope > a').cloneNode(true);this._removeSocialMediaClasses(anchorEl);}
const iEl=anchorEl.querySelector(ICON_SELECTOR);if(iEl){const faIcon=isDbField?`fa-${entry.media}`:'fa-pencil';iEl.classList.add(faIcon);}
if(isDbField){anchorEl.href=`/website/social/${encodeURIComponent(entry.media)}`;anchorEl.classList.add(`s_social_media_${entry.media}`);}
setAriaLabelOfSocialNetwork(anchorEl,entry.media,entry.display_name);}}else{if(anchorEl){delete entry.domPosition;anchorEl.remove();}
entry.listPosition=listPosition;this.entriesNotInDom.push(entry);continue;}
if(!isDbField){const href=anchorEl.getAttribute('href');if(href!==entry.display_name){let socialMedia=null;if(this._isValidURL(entry.display_name)){socialMedia=this._findRelevantSocialMedia(entry.display_name);if(socialMedia){const iEl=anchorEl.querySelector(ICON_SELECTOR);this._removeSocialMediaClasses(anchorEl);anchorEl.classList.add(`s_social_media_${socialMedia}`);if(iEl){iEl.classList.add(`fa-${socialMedia}`);}}}
anchorEl.setAttribute('href',entry.display_name);setAriaLabelOfSocialNetwork(anchorEl,socialMedia,entry.display_name);}}
this.$target[0].appendChild(anchorEl);}
this.$target[0].normalize();const finalLinkEls=this.$target[0].querySelectorAll(':scope > a');if(finalLinkEls.length){finalLinkEls[0].previousSibling.textContent='\n';for(const linkEl of finalLinkEls){linkEl.after(document.createTextNode('\n'));}}
this._handleNoMediaAlert();},async _computeWidgetState(methodName,params){if(methodName!=='renderListItems'){return this._super(methodName,params);}
await this._fetchSocialMedia();let listPosition=0;let domPosition=0;let entries=[...this.$target[0].querySelectorAll(':scope > a')].map(el=>{const media=el.href.split('/website/social/')[1];while(this.entriesNotInDom.find(entry=>entry.listPosition===listPosition)){listPosition++;}
return{id:weUtils.generateHTMLId(),display_name:media?dbSocialValues[`social_${media}`]:el.getAttribute('href'),placeholder:`https://${encodeURIComponent(media) || 'example'}.com/yourPage`,undeletable:!!media,notToggleable:!media,selected:true,listPosition:listPosition++,domPosition:domPosition++,media:media,};});for(let[media,link]of Object.entries(dbSocialValues)){media=media.split('social_').pop();if(!this.$target[0].querySelector(`:scope > a[href="/website/social/${encodeURIComponent(media)}"]`)){const entryNotInDom=this.entriesNotInDom.find(entry=>entry.media===media);if(!entryNotInDom){this.entriesNotInDom.push({id:weUtils.generateHTMLId(),display_name:link,placeholder:`https://${encodeURIComponent(media)}.com/yourPage`,undeletable:true,selected:false,listPosition:listPosition++,media:media,notToggleable:false,});}else{entryNotInDom.display_name=link;entryNotInDom.undeletable=true;entryNotInDom.notToggleable=false;}}}
entries=entries.concat(this.entriesNotInDom);entries.sort((a,b)=>{return a.listPosition-b.listPosition;});return JSON.stringify(entries);},async _fetchSocialMedia(){if(!dbSocialValuesProm){let websiteId;this.trigger_up('context_get',{callback:function(ctx){websiteId=ctx['website_id'];},});dbSocialValuesProm=this.orm.read("website",[websiteId],["social_facebook","social_twitter","social_linkedin","social_youtube","social_instagram","social_github","social_tiktok",]).then(function(values){[dbSocialValues]=values;delete dbSocialValues.id;});}
await dbSocialValuesProm;},_findRelevantSocialMedia(url){const supportedSocialMedia=[['facebook',/^(https?:\/\/)(www\.)?(facebook|fb|m\.facebook)\.(com|me).*$/],['youtube',/^(https?:\/\/)(www\.)?(youtube.com|youtu.be).*$/],['instagram',/^(https?:\/\/)(www\.)?(instagram.com|instagr.am|instagr.com).*$/],];for(const[socialMedia,regex]of supportedSocialMedia){if(regex.test(url)){return socialMedia;}}
try{const domain=new URL(url).hostname.split('.').slice(-2)[0];fonts.computeFonts();const iconNames=fonts.fontIcons[0].alias;const exactIcon=iconNames.find(el=>el===`fa-${domain}`);return(exactIcon||iconNames.find(el=>el.includes(domain))).split('fa-').pop();}catch{return false;}},_handleNoMediaAlert(){const alertEl=this.$target[0].querySelector('div.css_non_editable_mode_hidden');if(this.$target[0].querySelector(':scope > a:not(.d-none)')){if(alertEl){alertEl.remove();}}else{if(!alertEl){const divEl=document.createElement('div');const classes=['alert','alert-info','css_non_editable_mode_hidden','text-center'];divEl.classList.add(...classes);const spanEl=document.createElement('span');spanEl.textContent=_t("Click here to setup your social networks");this.$target[0].appendChild(divEl).append(spanEl);}}},_isValidURL(str){let url;try{url=new URL(str);}catch{return false;}
return url.protocol.startsWith('http');},_removeSocialMediaClasses(anchorEl){let regx=new RegExp('\\b'+'s_social_media_'+'[^1-9][^ ]*[ ]?\\b');anchorEl.className=anchorEl.className.replace(regx,'');const iEl=anchorEl.querySelector(ICON_SELECTOR);if(iEl){regx=new RegExp('\\b'+'fa-'+'[^1-9][^ ]*[ ]?\\b');iEl.className=iEl.className.replace(regx,'');}},_onSetupBannerClick(ev){if(ev.target.closest('div.css_non_editable_mode_hidden')){this._requestUserValueWidgets('social_media_list')[0].focus();}},});__exports[Symbol.for("default")]={SocialMedia:options.registry.SocialMedia,clearDbSocialValuesCache,getDbSocialValuesCache,};return __exports;});;

/* /website/static/src/snippets/s_process_steps/options.js */
odoo.define('@website/snippets/s_process_steps/options',['@web_editor/js/editor/snippets.options','@web_editor/js/common/utils'],function(require){'use strict';let __exports={};const options=require('@web_editor/js/editor/snippets.options')[Symbol.for("default")];const weUtils=require('@web_editor/js/common/utils')[Symbol.for("default")];options.registry.StepsConnector=options.Class.extend({start(){this.$target.on('content_changed.StepsConnector',()=>this._reloadConnectors());return this._super(...arguments);},destroy(){this._super(...arguments);this.$target.off('.StepsConnector');},selectClass:function(previewMode,value,params){this._super(...arguments);if(params.name==='connector_type'){this._reloadConnectors();let markerEnd='';if(['s_process_steps_connector_arrow','s_process_steps_connector_curved_arrow'].includes(value)){const arrowHeadEl=this.$target[0].querySelector('.s_process_steps_arrow_head');if(!arrowHeadEl.id){arrowHeadEl.id='s_process_steps_arrow_head'+Date.now();}
markerEnd=`url(#${arrowHeadEl.id})`;}
this.$target[0].querySelectorAll('.s_process_step_connector path').forEach(path=>path.setAttribute('marker-end',markerEnd));}},changeColor(previewMode,widgetValue,params){const htmlPropColor=weUtils.getCSSVariableValue(widgetValue);const arrowHeadEl=this.$target[0].closest('.s_process_steps').querySelector('.s_process_steps_arrow_head');arrowHeadEl.querySelector('path').style.fill=htmlPropColor||widgetValue;},notify(name){if(['change_column_size','change_container_width','change_columns','move_snippet'].includes(name)){this._reloadConnectors();}else{this._super(...arguments);}},_computeVisibility(){const isMobileView=weUtils.isMobileView(this.$target[0]);return!isMobileView&&this._super(...arguments);},_reloadConnectors(){const possibleTypes=this._requestUserValueWidgets('connector_type')[0].getMethodsParams().optionsPossibleValues.selectClass;const type=possibleTypes.find(possibleType=>possibleType&&this.$target[0].classList.contains(possibleType))||'';const stepsEls=this.$target[0].querySelectorAll('.s_process_step:not(.o_snippet_desktop_invisible)');const nbBootstrapCols=12;let colsInRow=0;for(let i=0;i<stepsEls.length-1;i++){const connectorEl=stepsEls[i].querySelector('.s_process_step_connector');const stepMainElementRect=this._getStepMainElementRect(stepsEls[i]);const nextStepMainElementRect=this._getStepMainElementRect(stepsEls[i+1]);const stepSize=this._getClassSuffixedInteger(stepsEls[i],'col-lg-');const nextStepSize=this._getClassSuffixedInteger(stepsEls[i+1],'col-lg-');const stepOffset=this._getClassSuffixedInteger(stepsEls[i],'offset-lg-');const nextStepOffset=this._getClassSuffixedInteger(stepsEls[i+1],'offset-lg-');const stepPaddingTop=this._getClassSuffixedInteger(stepsEls[i],'pt');const nextStepPaddingTop=this._getClassSuffixedInteger(stepsEls[i+1],'pt');connectorEl.style.left=`calc(50% + ${stepMainElementRect.width / 2}px)`;connectorEl.style.height=`${stepMainElementRect.height}px`;connectorEl.style.width=`calc(${100 * (stepSize / 2 + nextStepOffset + nextStepSize / 2) / stepSize}% - ${stepMainElementRect.width / 2}px - ${nextStepMainElementRect.width / 2}px)`;const isTheLastColOfRow=nbBootstrapCols<colsInRow+stepSize+stepOffset+nextStepSize+nextStepOffset;const isNextStepTooLow=stepMainElementRect.height+stepPaddingTop<nextStepPaddingTop;connectorEl.classList.toggle('d-none',isTheLastColOfRow||isNextStepTooLow);colsInRow=isTheLastColOfRow?0:colsInRow+stepSize+stepOffset;connectorEl.style.display='block';const{height,width}=connectorEl.getBoundingClientRect();connectorEl.style.removeProperty('display');connectorEl.setAttribute('viewBox',`0 0 ${width} ${height}`);connectorEl.querySelector('path').setAttribute('d',this._getPath(type,width,height));}},_getClassSuffixedInteger(el,classNamePrefix){const className=[...el.classList].find(cl=>cl.startsWith(classNamePrefix));return className?parseInt(className.replace(classNamePrefix,'')):0;},_getStepMainElementRect(stepEl){const iconEl=stepEl.querySelector('i');if(iconEl){return iconEl.getBoundingClientRect();}
const contentEls=stepEl.querySelectorAll('.s_process_step_content > *');if(contentEls.length){const contentRects=[...contentEls].map(contentEl=>{const range=document.createRange();range.selectNodeContents(contentEl);return range.getBoundingClientRect();});return contentRects.reduce((previous,current)=>{return current.width>previous.width?current:previous;});}
return{};},_getPath(type,width,height){const hHeight=height/2;switch(type){case's_process_steps_connector_line':{return`M 0 ${hHeight} L ${width} ${hHeight}`;}
case's_process_steps_connector_arrow':{return`M ${0.05 * width} ${hHeight} L ${0.95 * width - 6} ${hHeight}`;}
case's_process_steps_connector_curved_arrow':{return`M ${0.05 * width} ${hHeight * 1.2} Q ${width / 2} ${hHeight * 1.8}, ${0.95 * width - 6} ${hHeight * 1.2}`;}}
return'';},});return __exports;});;

/* /website/static/src/js/editor/widget_link.js */
odoo.define('@website/js/editor/widget_link',['@web_editor/js/wysiwyg/widgets/link_tools','@web/core/utils/patch','@odoo/owl','@website/js/utils','@web/core/utils/timing'],function(require){'use strict';let __exports={};const{LinkTools}=require('@web_editor/js/wysiwyg/widgets/link_tools');const{patch}=require("@web/core/utils/patch");const{onWillStart,status,useEffect}=require('@odoo/owl');const wUtils=require("@website/js/utils")[Symbol.for("default")];const{debounce}=require("@web/core/utils/timing");const LINK_DEBOUNCE=1000;patch(LinkTools.prototype,{async start(){var def=await super.start(...arguments);this._adaptPageAnchor();return def;},setup(){super.setup();onWillStart(()=>{this._adaptPageAnchor=debounce(this._adaptPageAnchor,LINK_DEBOUNCE);});useEffect((container)=>{const input=container?.querySelector(`input[name="url"]`);if(!input){return;}
const options={classes:{"ui-autocomplete":'o_website_ui_autocomplete'},body:this.$editable[0].ownerDocument.body,urlChosen:this._onAutocompleteClose.bind(this),isDestroyed:()=>status(this)==='destroyed',};const unmountAutocompleteWithPages=wUtils.autocompleteWithPages(input,options);return()=>unmountAutocompleteWithPages();},()=>[this.linkComponentWrapperRef.el]);},_adaptPageAnchor(){const urlInputValue=this.$el.find('input[name="url"]').val();const $pageAnchor=this.$el.find('.o_link_dialog_page_anchor');const showAnchorSelector=urlInputValue[0]==='/';const $selectMenu=this.$el.find('we-selection-items[name="link_anchor"]');if($selectMenu.data("anchor-for")!==urlInputValue){$pageAnchor.toggleClass('d-none',!showAnchorSelector);$selectMenu.empty();if(showAnchorSelector){const always=()=>{const anchor=`#${urlInputValue.split('#')[1]}`;let weTogglerText='\u00A0';if(anchor){const weButtonEls=$selectMenu[0].querySelectorAll('we-button');if(Array.from(weButtonEls).some(el=>el.textContent===anchor)){weTogglerText=anchor;}}
$pageAnchor[0].querySelector('we-toggler').textContent=weTogglerText;};const urlWithoutHash=urlInputValue.split("#")[0];wUtils.loadAnchors(urlWithoutHash,this.$editable[0].ownerDocument.body).then(anchors=>{for(const anchor of anchors){const $option=$('<we-button class="dropdown-item">');$option.text(anchor);$option.data('value',anchor);$selectMenu.append($option);}}).finally(always);}}
$selectMenu.data("anchor-for",urlInputValue);},_onAutocompleteClose(){this.__onURLInput();},_onURLInput(){super._onURLInput(...arguments);this._adaptPageAnchor();},_onPickSelectOption(ev){if(ev.currentTarget.closest('[name="link_anchor"]')){const anchorValue=$(ev.currentTarget).data('value');const $urlInput=this.$el.find('[name="url"]');let urlInputValue=$urlInput.val();if(urlInputValue.indexOf('#')>-1){urlInputValue=urlInputValue.substr(0,urlInputValue.indexOf('#'));}
$urlInput.val(urlInputValue+anchorValue);this.__onURLInput();}
super._onPickSelectOption(...arguments);},});return __exports;});;

/* /website/static/src/js/widgets/link_popover_widget.js */
odoo.define('@website/js/widgets/link_popover_widget',['@web/core/l10n/translation','@web/core/browser/browser','@web/core/utils/patch','@web_editor/js/wysiwyg/widgets/link_popover_widget'],function(require){'use strict';let __exports={};const{_t}=require("@web/core/l10n/translation");const{browser}=require("@web/core/browser/browser");const{patch}=require("@web/core/utils/patch");const{LinkPopoverWidget}=require('@web_editor/js/wysiwyg/widgets/link_popover_widget');patch(LinkPopoverWidget.prototype,{start(){if(this.target.closest('.o_mega_menu')){let timeoutID=undefined;this.$target.on('keydown.link_popover',()=>{this.$target.popover('hide');clearTimeout(timeoutID);timeoutID=setTimeout(()=>this.$target.popover('show'),1500);});}
this.$el.on('click','.o_we_full_url, .o_we_url_link',this._onPreviewLinkClick.bind(this));return super.start(...arguments);},async _onPreviewLinkClick(ev){if(this.target.href){const currentUrl=new URL(this.target.href);if(window.location.hostname===currentUrl.hostname&&!currentUrl.pathname.startsWith('/@/')){ev.preventDefault();currentUrl.pathname=`/@${currentUrl.pathname}`;browser.open(currentUrl);}}}});const NavbarLinkPopoverWidget=__exports.NavbarLinkPopoverWidget=class NavbarLinkPopoverWidget extends LinkPopoverWidget{constructor(params){super(...arguments);this.checkIsWebsiteDesigner=params.checkIsWebsiteDesigner;this.onEditLinkClick=params.onEditLinkClick;this.onEditMenuClick=params.onEditMenuClick;}
async start(){this.isWebsiteDesigner=await this.checkIsWebsiteDesigner();const $removeLink=this.$el.find('.o_we_remove_link');if(this.isWebsiteDesigner){const $anchor=$('<a/>',{href:'#',class:'ms-2 js_edit_menu',title:_t('Edit Menu'),'data-bs-placement':'top','data-bs-toggle':'tooltip',}).append($('<i/>',{class:'fa fa-sitemap'}));$removeLink.replaceWith($anchor);$anchor.on('click',()=>this.onEditMenuClick(this));}else{this.$el.find('.o_we_edit_link').remove();$removeLink.remove();}
return super.start(...arguments);}
_onEditLinkClick(ev){this.onEditLinkClick(this);}}
return __exports;});;

/* /website/static/src/js/editor/commands_overridden.js */
odoo.define('@website/js/editor/commands_overridden',['@web_editor/js/editor/odoo-editor/src/utils/sanitize'],function(require){'use strict';let __exports={};const{UNMERGEABLE_SELECTORS}=require("@web_editor/js/editor/odoo-editor/src/utils/sanitize");UNMERGEABLE_SELECTORS.push("o_text_highlight_item");HTMLElement.prototype.oDeleteBackwardOdooEditor=HTMLElement.prototype.oDeleteBackward;HTMLElement.prototype.oDeleteBackward=function(offset,alreadyMoved=false,offsetLimit){const leftNode=this.childNodes[offset-1];if(offset&&leftNode){if(leftNode.classList&&leftNode.classList.contains("o_text_highlight_svg")){return;}}
this.oDeleteBackwardOdooEditor(...arguments);};return __exports;});;

/* /website/static/src/js/editor/odoo_editor.js */
odoo.define('@website/js/editor/odoo_editor',['@web_editor/js/editor/odoo-editor/src/OdooEditor','@web/core/utils/patch','@website/js/text_processing'],function(require){'use strict';let __exports={};const{OdooEditor}=require("@web_editor/js/editor/odoo-editor/src/OdooEditor");const{patch}=require("@web/core/utils/patch");const{removeTextHighlight}=require("@website/js/text_processing");patch(OdooEditor.prototype,{_onClipboardCopy(e){super._onClipboardCopy(e);const selection=this.document.getSelection();const range=selection.getRangeAt(0);let rangeContent=range.cloneContents();const firstChild=rangeContent.firstChild;if(firstChild&&firstChild.className&&firstChild.className.includes("o_text_highlight_item")){const textHighlightEl=range.commonAncestorContainer.cloneNode();textHighlightEl.replaceChildren(...rangeContent.childNodes);removeTextHighlight(textHighlightEl);rangeContent=textHighlightEl;const data=document.createElement("data");data.append(rangeContent);const html=data.innerHTML;e.clipboardData.setData("text/plain",selection.toString());e.clipboardData.setData("text/html",html);e.clipboardData.setData("text/odoo-editor",html);}},});return __exports;});;

/* /website_event/static/src/snippets/s_events/options.js */
odoo.define('@website_event/snippets/s_events/options',['@web_editor/js/editor/snippets.options','@website/snippets/s_dynamic_snippet/options'],function(require){'use strict';let __exports={};const options=require('@web_editor/js/editor/snippets.options')[Symbol.for("default")];const dynamicSnippetOptions=require('@website/snippets/s_dynamic_snippet/options')[Symbol.for("default")];const dynamicSnippetEventOptions=dynamicSnippetOptions.extend({init(){this._super.apply(this,arguments);this.modelNameFilter='event.event';},_setOptionsDefaultValues(){this._setOptionValue('numberOfRecords',4);this._super.apply(this,arguments);},});options.registry.event_upcoming_snippet=dynamicSnippetEventOptions;return __exports;});;

/* /website_event/static/src/snippets/options.js */
odoo.define('@website_event/snippets/options',['@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const options=require('@web_editor/js/editor/snippets.options')[Symbol.for("default")];options.registry.WebsiteEvent=options.Class.extend({init(){this._super(...arguments);this.orm=this.bindService("orm");},async start(){const res=await this._super(...arguments);this.currentWebsiteUrl=this.ownerDocument.location.pathname;this.eventId=this._getEventObjectId();const rpcData=await this.orm.read("event.event",[this.eventId],["website_menu","website_url"]);this.data.reload=this.currentWebsiteUrl;this.websiteMenu=rpcData[0]['website_menu'];this.data.reload=rpcData[0]['website_url'];return res;},displaySubmenu(previewMode,widgetValue,params){return this.orm.call("event.event","toggle_website_menu",[[this.eventId],widgetValue]);},_computeWidgetState(methodName,params){switch(methodName){case'displaySubmenu':{return this.websiteMenu;}}
return this._super(...arguments);},_getEventObjectId(){const objectIds=this.currentWebsiteUrl.match(/\d+(?![-\w])/);return parseInt(objectIds[0])|0;},});return __exports;});;

/* /website_hr_recruitment/static/src/js/website_hr_recruitment_editor.js */
odoo.define('@website_hr_recruitment/js/website_hr_recruitment_editor',['@web/core/l10n/translation','@website/js/form_editor_registry'],function(require){'use strict';let __exports={};const{_t}=require("@web/core/l10n/translation");const FormEditorRegistry=require("@website/js/form_editor_registry")[Symbol.for("default")];FormEditorRegistry.add('apply_job',{formFields:[{type:'char',modelRequired:true,name:'partner_name',fillWith:'name',string:_t('Your Name'),},{type:'email',required:true,fillWith:'email',name:'email_from',string:_t('Your Email'),},{type:'char',required:true,fillWith:'phone',name:'partner_mobile',string:_t('Phone Number'),},{type:'char',name:'linkedin_profile',string:_t('LinkedIn Profile'),},{type:'text',name:'description',string:_t('Short Introduction'),},{type:'binary',custom:true,name:'Resume',}],fields:[{name:'job_id',type:'many2one',relation:'hr.job',string:_t('Applied Job'),},{name:'department_id',type:'many2one',relation:'hr.department',string:_t('Department'),}],successPage:'/job-thank-you',});return __exports;});;

/* /website_crm/static/src/js/website_crm_editor.js */
odoo.define('@website_crm/js/website_crm_editor',['@web/core/l10n/translation','@website/js/form_editor_registry'],function(require){'use strict';let __exports={};const{_t}=require("@web/core/l10n/translation");const FormEditorRegistry=require("@website/js/form_editor_registry")[Symbol.for("default")];FormEditorRegistry.add('create_lead',{formFields:[{type:'char',required:true,name:'contact_name',fillWith:'name',string:_t('Your Name'),},{type:'tel',name:'phone',fillWith:'phone',string:_t('Phone Number'),},{type:'email',required:true,fillWith:'email',name:'email_from',string:_t('Your Email'),},{type:'char',required:true,fillWith:'commercial_company_name',name:'partner_name',string:_t('Your Company'),},{type:'char',modelRequired:true,name:'name',string:_t('Subject'),},{type:'text',required:true,name:'description',string:_t('Your Question'),}],fields:[{name:'team_id',type:'many2one',relation:'crm.team',domain:[['use_opportunities','=',true]],string:_t('Sales Team'),title:_t('Assign leads/opportunities to a sales team.'),},{name:'user_id',type:'many2one',relation:'res.users',domain:[['share','=',false]],string:_t('Salesperson'),title:_t('Assign leads/opportunities to a salesperson.'),}],});return __exports;});;

/* /website_mass_mailing/static/src/js/website_mass_mailing.editor.js */
odoo.define('@website_mass_mailing/js/website_mass_mailing.editor',['@web/core/confirmation_dialog/confirmation_dialog','@web/core/l10n/translation','@web/core/utils/render','@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const{ConfirmationDialog}=require("@web/core/confirmation_dialog/confirmation_dialog");const{_t}=require("@web/core/l10n/translation");const{renderToElement}=require("@web/core/utils/render");const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];options.registry.mailing_list_subscribe=options.Class.extend({init(){this._super(...arguments);this.orm=this.bindService("orm");},onBuilt(){this._super(...arguments);if(this.mailingLists.length){this.$target.attr("data-list-id",this.mailingLists[0][0]);}else{this.call("dialog","add",ConfirmationDialog,{body:_t("No mailing list found, do you want to create a new one? This will save all your changes, are you sure you want to proceed?"),confirm:()=>{this.trigger_up("request_save",{reload:false,onSuccess:()=>{window.location.href="/web#action=mass_mailing.action_view_mass_mailing_lists";},});},cancel:()=>{this.trigger_up("remove_snippet",{$snippet:this.$target,});},});}},cleanForSave(){const previewClasses=['o_disable_preview','o_enable_preview'];const toCleanElsSelector=".js_subscribe_btn, .js_subscribed_btn, #newsletter_form, .s_website_form_end_message";const toCleanEls=this.$target[0].querySelectorAll(toCleanElsSelector);toCleanEls.forEach(element=>{element.classList.remove(...previewClasses);});},toggleThanksButton(previewMode,widgetValue,params){const toSubscribeEl=this.$target[0].querySelector(".js_subscribe_btn, #newsletter_form");const thanksMessageEl=this.$target[0].querySelector(".js_subscribed_btn, .s_website_form_end_message");thanksMessageEl.classList.toggle("o_disable_preview",!widgetValue);thanksMessageEl.classList.toggle("o_enable_preview",widgetValue);toSubscribeEl.classList.toggle("o_enable_preview",!widgetValue);toSubscribeEl.classList.toggle("o_disable_preview",widgetValue);},_computeWidgetState(methodName,params){if(methodName!=='toggleThanksButton'){return this._super(...arguments);}
const toSubscribeElSelector=".js_subscribe_btn.o_disable_preview, #newsletter_form.o_disable_preview";return this.$target[0].querySelector(toSubscribeElSelector)?"true":"";},async _renderCustomXML(uiFragment){this.mailingLists=await this.orm.call("mailing.list","name_search",["",[["is_public","=",true]]],{context:this.options.recordInfo.context});if(this.mailingLists.length){const selectEl=uiFragment.querySelector('we-select[data-attribute-name="listId"]');for(const mailingList of this.mailingLists){const button=document.createElement('we-button');button.dataset.selectDataAttribute=mailingList[0];button.textContent=mailingList[1];selectEl.appendChild(button);}}
const checkboxEl=document.createElement('we-checkbox');checkboxEl.setAttribute('string',_t("Display Thanks Button"));checkboxEl.dataset.toggleThanksButton='true';checkboxEl.dataset.noPreview='true';checkboxEl.dataset.dependencies="!form_opt";uiFragment.appendChild(checkboxEl);},});options.registry.recaptchaSubscribe=options.Class.extend({toggleRecaptchaLegal:function(previewMode,value,params){const recaptchaLegalEl=this.$target[0].querySelector('.o_recaptcha_legal_terms');if(recaptchaLegalEl){recaptchaLegalEl.remove();}else{const template=document.createElement('template');template.content.append(renderToElement("google_recaptcha.recaptcha_legal_terms"));this.$target[0].appendChild(template.content.firstElementChild);}},_computeWidgetState:function(methodName,params){switch(methodName){case'toggleRecaptchaLegal':return!this.$target[0].querySelector('.o_recaptcha_legal_terms')||'';}
return this._super(...arguments);},});return __exports;});;

/* /website_mass_mailing/static/src/js/mass_mailing_form_editor.js */
odoo.define('@website_mass_mailing/js/mass_mailing_form_editor',['@web/core/l10n/translation','@website/js/form_editor_registry'],function(require){'use strict';let __exports={};const{_t}=require("@web/core/l10n/translation");const FormEditorRegistry=require("@website/js/form_editor_registry")[Symbol.for("default")];FormEditorRegistry.add('create_mailing_contact',{formFields:[{name:'name',required:true,string:_t('Your Name'),type:'char',},{name:'email',required:true,string:_t('Your Email'),type:'email',},{name:'list_ids',relation:'mailing.list',required:true,string:_t('Subscribe to'),type:'many2many',}],});return __exports;});;

/* /website_mass_mailing/static/src/snippets/s_popup/options.js */
odoo.define('@website_mass_mailing/snippets/s_popup/options',['@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const options=require('@web_editor/js/editor/snippets.options')[Symbol.for("default")];options.registry.NewsletterLayout=options.registry.SelectTemplate.extend({init(){this._super(...arguments);this.containerSelector='> .container, > .container-fluid, > .o_container_small';this.selectTemplateWidgetName='newsletter_template_opt';},});return __exports;});;

/* /website_blog/static/src/js/options.js */
odoo.define('@website_blog/js/options',['@web/core/l10n/translation','@web_editor/js/editor/snippets.options','@website/js/editor/snippets.options','@web/core/utils/functions'],function(require){'use strict';let __exports={};const{_t}=require("@web/core/l10n/translation");const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];require("@website/js/editor/snippets.options");const{uniqueId}=require("@web/core/utils/functions");const NEW_TAG_PREFIX='new-blog-tag-';options.registry.many2one.include({_selectRecord:function($opt){var self=this;this._super.apply(this,arguments);if(this.$target.data('oe-field')==='author_id'){var $nodes=$('[data-oe-model="blog.post"][data-oe-id="'+this.$target.data('oe-id')+'"][data-oe-field="author_avatar"]');$nodes.each(function(){var $img=$(this).find('img');var css=window.getComputedStyle($img[0]);$img.css({width:css.width,height:css.height});$img.attr('src','/web/image/res.partner/'+self.ID+'/avatar_1024');});setTimeout(function(){$nodes.removeClass('o_dirty');},0);}}});options.registry.CoverProperties.include({updateUI:async function(){const isBlogCover=this.$target[0].classList.contains('o_wblog_post_page_cover');if(!isBlogCover){return this._super(...arguments);}
var isRegularCover=this.$target.is('.o_wblog_post_page_cover_regular');var $coverFull=this.$el.find('[data-select-class*="o_full_screen_height"]');var $coverMid=this.$el.find('[data-select-class*="o_half_screen_height"]');var $coverAuto=this.$el.find('[data-select-class*="cover_auto"]');this._coverFullOriginalLabel=this._coverFullOriginalLabel||$coverFull.text();this._coverMidOriginalLabel=this._coverMidOriginalLabel||$coverMid.text();this._coverAutoOriginalLabel=this._coverAutoOriginalLabel||$coverAuto.text();$coverFull.children('div').text(isRegularCover?_t("Large"):this._coverFullOriginalLabel);$coverMid.children('div').text(isRegularCover?_t("Medium"):this._coverMidOriginalLabel);$coverAuto.children('div').text(isRegularCover?_t("Tiny"):this._coverAutoOriginalLabel);return this._super(...arguments);},});options.registry.BlogPostTagSelection=options.Class.extend({init(){this._super(...arguments);this.orm=this.bindService("orm");this.notification=this.bindService("notification");},async willStart(){const _super=this._super.bind(this);this.blogPostID=parseInt(this.$target[0].dataset.blogId);this.isEditingTags=false;const tags=await this.orm.searchRead("blog.tag",[],["id","name","display_name","post_ids"]);this.allTagsByID={};this.tagIDs=[];for(const tag of tags){this.allTagsByID[tag.id]=tag;if(tag['post_ids'].includes(this.blogPostID)){this.tagIDs.push(tag.id);}}
return _super(...arguments);},cleanForSave(){this._notifyUpdatedTags();},setTags(previewMode,widgetValue,params){if(this._preventNextSetTagsCall){this._preventNextSetTagsCall=false;return;}
this.tagIDs=JSON.parse(widgetValue).map(tag=>tag.id);},createTag(previewMode,widgetValue,params){if(!widgetValue){return;}
const existing=Object.values(this.allTagsByID).some(tag=>{return tag.name.toLowerCase()===widgetValue.toLowerCase()&&(typeof(tag.id)==='number'||this.tagIDs.includes(tag.id));});if(existing){return this.notification.add(_t("This tag already exists"),{type:'warning',});}
const newTagID=uniqueId(NEW_TAG_PREFIX);this.allTagsByID[newTagID]={'id':newTagID,'name':widgetValue,'display_name':widgetValue,};this.tagIDs.push(newTagID);this._preventNextSetTagsCall=true;},async updateUI(){if(this.rerender){this.rerender=false;await this._rerenderXML();return;}
return this._super(...arguments);},async _computeWidgetState(methodName,params){if(methodName==='setTags'){return JSON.stringify(this.tagIDs.map(id=>this.allTagsByID[id]));}
return this._super(...arguments);},_notifyUpdatedTags(){this.trigger_up('set_blog_post_updated_tags',{blogPostID:this.blogPostID,tags:this.tagIDs.map(tagID=>this.allTagsByID[tagID]),});},async _renderCustomXML(uiFragment){uiFragment.querySelector('we-many2many').dataset.recordId=this.blogPostID;},});return __exports;});;

/* /website_blog/static/src/snippets/s_blog_posts/options.js */
odoo.define('@website_blog/snippets/s_blog_posts/options',['@web_editor/js/editor/snippets.options','@website/snippets/s_dynamic_snippet/options','@website/js/utils'],function(require){'use strict';let __exports={};const options=require("@web_editor/js/editor/snippets.options")[Symbol.for("default")];const dynamicSnippetOptions=require("@website/snippets/s_dynamic_snippet/options")[Symbol.for("default")];const wUtils=require("@website/js/utils")[Symbol.for("default")];const dynamicSnippetBlogPostsOptions=dynamicSnippetOptions.extend({init:function(){this._super.apply(this,arguments);this.modelNameFilter='blog.post';this.blogs={};},_computeWidgetVisibility:function(widgetName,params){if(widgetName==='hover_effect_opt'){return this.$target.get(0).dataset.templateKey==='website_blog.dynamic_filter_template_blog_post_big_picture';}
return this._super.apply(this,arguments);},_fetchBlogs:function(){return this.orm.searchRead("blog.blog",wUtils.websiteDomain(this),["id","name"]);},_renderCustomXML:async function(uiFragment){await this._super.apply(this,arguments);await this._renderBlogSelector(uiFragment);},_renderBlogSelector:async function(uiFragment){if(!Object.keys(this.blogs).length){const blogsList=await this._fetchBlogs();this.blogs={};for(let index in blogsList){this.blogs[blogsList[index].id]=blogsList[index];}}
const blogSelectorEl=uiFragment.querySelector('[data-name="blog_opt"]');return this._renderSelectUserValueWidgetButtons(blogSelectorEl,this.blogs);},_setOptionsDefaultValues:function(){this._setOptionValue('filterByBlogId',-1);this._super.apply(this,arguments);},});options.registry.dynamic_snippet_blog_posts=dynamicSnippetBlogPostsOptions;__exports[Symbol.for("default")]=dynamicSnippetBlogPostsOptions;return __exports;});;

/* /website_appointment/static/src/snippets/s_online_appointment/options.js */
odoo.define('@website_appointment/snippets/s_online_appointment/options',['@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const options=require('@web_editor/js/editor/snippets.options')[Symbol.for("default")];options.registry.OnlineAppointmentOptions=options.Class.extend({allAppointmentTypesById:{},init(){this._super(...arguments);this.rpc=this.bindService("rpc");},async willStart(){await this._super(...arguments);this.allAppointmentTypesById=await this.rpc('/appointment/get_snippet_data');if(!Object.keys(this.allAppointmentTypesById).length){this._setDatasetProperty('targetTypes','all');}else if(this._getDatasetProperty('targetTypes')!=='all'){const selectedAppointmentTypesIds=this._getDatasetProperty('appointmentTypes',true);const appointmentTypeIdsToKeep=selectedAppointmentTypesIds.filter(apptId=>{return Object.prototype.hasOwnProperty.call(this.allAppointmentTypesById,apptId);});if(!appointmentTypeIdsToKeep.length){this._setDatasetProperty('targetTypes','all');}else if(appointmentTypeIdsToKeep.length!==selectedAppointmentTypesIds.length){this._setDatasetProperty('appointmentTypes',appointmentTypeIdsToKeep);}else{if(this._getDatasetProperty('targetUsers')!=='all'){const selectedUserIds=this._getDatasetProperty('staffUsers',true);const availableUserIds=this.allAppointmentTypesById[selectedAppointmentTypesIds[0]].staff_users.map(u=>u.id);const userIdsToKeep=selectedUserIds.filter(uid=>availableUserIds.includes(uid));if(!userIdsToKeep.length){this._setDatasetProperty('targetUsers','all');}else if(userIdsToKeep.length!==selectedUserIds.length){this._setDatasetProperty('staffUsers',userIdsToKeep);}}}}},async selectDataAttribute(previewMode,widgetValue,params){if(params.attributeName in['targetTypes','appointmentTypes','targetUsers','staffUsers']){this._setDatasetProperty(params.attributeName,widgetValue);}
return this._super(...arguments);},async updateUI(){this._super(...arguments);const selectedAppointmentTypesIds=this._getDatasetProperty('appointmentTypes',true);if(selectedAppointmentTypesIds.length){const[staffUsersWidget]=this._requestUserValueWidgets('staff_users_opt');return staffUsersWidget.setFilterInDomainIds(selectedAppointmentTypesIds);}},setAppTypes(previewMode,widgetValue,params){this._setDatasetProperty('appointmentTypes',JSON.parse(widgetValue).map(appType=>appType.id));this._syncAppointmentTypesData();},setStaffUsers(previewMode,widgetValue,params){this._setDatasetProperty('staffUsers',JSON.parse(widgetValue).map(user=>user.id));const selectedAppointmentTypesIds=this._getDatasetProperty('appointmentTypes',true);this._syncAppointmentTypesData(selectedAppointmentTypesIds[0]);},async _computeWidgetState(methodName,params){if(methodName==='setAppTypes'){const selectedAppointmentTypes=this._getDatasetProperty('appointmentTypes',true);const appointmentTypesDetails=selectedAppointmentTypes.map(id=>{const appointmentType=this.allAppointmentTypesById[id];return{id:appointmentType.id,name:appointmentType.name,display_name:appointmentType.name};});return JSON.stringify(appointmentTypesDetails);}
if(methodName==='setStaffUsers'){const selectedAppointmentTypes=this._getDatasetProperty('appointmentTypes',true);if(selectedAppointmentTypes.length!==1||this._getDatasetProperty('targetUsers')==='all'){return'[]';}
const appointmentTypeData=this.allAppointmentTypesById[selectedAppointmentTypes[0]];const selectedUserIds=this._getDatasetProperty('staffUsers',true);const staffUsersDetails=appointmentTypeData.staff_users.filter(user=>selectedUserIds.includes(user.id)).map(({id,name})=>({id,name,display_name:name}));return JSON.stringify(staffUsersDetails);}
return this._super(...arguments);},async _computeWidgetVisibility(widgetName,params){if(params.attributeName==='targetTypes'){if(!Object.keys(this.allAppointmentTypesById).length){return false;}}else if(params.attributeName==='targetUsers'){if(this._getDatasetProperty('targetTypes')==='all'||this._getDatasetProperty('appointmentTypes',true).length!==1){return false;}}else if(params.attributeName==='appointmentTypes'){if(this._getDatasetProperty('targetTypes')==='all'){return false;}}else if(params.attributeName==='staffUsers'){if(this._getDatasetProperty('targetUsers')==='all'||this._getDatasetProperty('appointmentTypes',true).length!==1){return false;}}
return this._super(...arguments);},_getDatasetProperty(property,parsed=false){let value=this.$target[0].dataset[property];return parsed?JSON.parse(value):value;},_setDatasetProperty(property,value){if(property==='targetTypes'){if(this._getDatasetProperty('targetTypes')!==value){this.$target[0].dataset.targetTypes=value;if(this._getDatasetProperty('appointmentTypes',true).length){this._setDatasetProperty('appointmentTypes',[]);}}
this._setDatasetProperty('targetUsers','all');}else if(property==='appointmentTypes'){this.$target[0].dataset.appointmentTypes=JSON.stringify(value);if(!value.length){this._setDatasetProperty('targetTypes','all');}
this._setDatasetProperty('targetUsers','all');}else if(property==='targetUsers'){this.$target[0].dataset.targetUsers=value;if(value!=='specify'||this._getDatasetProperty('appointmentTypes',true).length!==1){this._setDatasetProperty('staffUsers',[]);}}else if(property==='staffUsers'){this.$target[0].dataset.staffUsers=JSON.stringify(value);if(!value.length&&this._getDatasetProperty('targetUsers')!=='all'){this._setDatasetProperty('targetUsers','all');}}},async _syncAppointmentTypesData(apptId){if(apptId){const record=await this.rpc('/appointment/get_snippet_data',{appointment_type_id:apptId,});if(Object.keys(record).length){this.allAppointmentTypesById[apptId]=record[apptId];}else{this.allAppointmentTypesById.remove(apptId);}}else{this.allAppointmentTypesById=await this.rpc('/appointment/get_snippet_data');}},});return __exports;});;

/* /website_event_meet/static/src/js/snippets/options.js */
odoo.define('@website_event_meet/js/snippets/options',['@web_editor/js/editor/snippets.options'],function(require){'use strict';let __exports={};const options=require('@web_editor/js/editor/snippets.options')[Symbol.for("default")];options.registry.WebsiteEvent.include({async start(){const res=await this._super(...arguments);const rpcData=await this.orm.read("event.event",[this.eventId],["meeting_room_allow_creation"]);this.meetingRoomAllowCreation=rpcData[0]['meeting_room_allow_creation'];return res;},allowRoomCreation(previewMode,widgetValue,params){return this.orm.write("event.event",[this.eventId],{meeting_room_allow_creation:widgetValue,}).then(()=>this.trigger_up('request_save',{reload:true,optionSelector:this.data.selector}));},async _computeWidgetState(methodName,params){switch(methodName){case'allowRoomCreation':{return this.meetingRoomAllowCreation;}}
return this._super(...arguments);},});return __exports;});

                    /*******************************************
                    *  Templates                               *
                    *******************************************/

                    odoo.define('website.assets_wysiwyg.bundle.xml', ['@web/core/registry'], function(require){
                        'use strict';
                        const { registry } = require('@web/core/registry');
                        registry.category(`xml_templates`).add(`website.assets_wysiwyg`, `<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
<t t-name="website.gallery.slideshow">
        <div t-attf-id="#{id}" class="carousel slide" data-bs-ride="carousel" t-attf-data-bs-interval="#{interval}" style="margin: 0 12px;">
            <div class="carousel-inner" style="padding: 0;">
                 <t t-foreach="images" t-as="image" t-key="image_index">
                    <div t-attf-class="carousel-item #{image_index == index and 'active' or None}">
                        <img t-attf-class="#{attrClass || 'img img-fluid d-block'}" t-att-src="image.src" t-att-style="attrStyle" t-att-alt="image.alt" data-name="Image" data-o-main-image="true"/>
                    </div>
                 </t>
            </div>

            <ul class="carousel-indicators">
                <li class="o_indicators_left text-center d-none" aria-label="Previous" title="Previous">
                    <i class="oi oi-chevron-left"/>
                </li>
                <t t-foreach="images" t-as="image" t-key="image_index">
                    <li t-attf-data-bs-target="##{id}" t-att-data-bs-slide-to="image_index" t-att-class="image_index == index and 'active' or None" t-attf-style="background-image: url(#{image.src})"/>
                </t>
                <li class="o_indicators_right text-center d-none" aria-label="Next" title="Next">
                    <i class="oi oi-chevron-right"/>
                </li>
            </ul>

            <a class="carousel-control-prev o_we_no_overlay o_not_editable" t-attf-href="##{id}" data-bs-slide="prev" aria-label="Previous" title="Previous">
                <span class="oi oi-chevron-left fa-2x text-white"/>
                <span class="visually-hidden">Previous</span>
            </a>
            <a class="carousel-control-next o_we_no_overlay o_not_editable" t-attf-href="##{id}" data-bs-slide="next" aria-label="Next" title="Next">
                <span class="oi oi-chevron-right fa-2x text-white"/>
                <span class="visually-hidden">Next</span>
            </a>
        </div>
    </t>


    <t t-name="website.gallery.slideshow.lightbox">
        <div role="dialog" class="modal o_technical_modal fade s_gallery_lightbox p-0" aria-label="Image Gallery Dialog" tabindex="-1">
            <div class="modal-dialog m-0" role="Picture Gallery" t-attf-style="">
                <div class="modal-content bg-transparent modal-fullscreen">
                    <main class="modal-body o_slideshow bg-transparent">
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close" style="position: absolute; right: 10px; top: 10px;"/>
                        <t t-call="website.gallery.slideshow"/>
                    </main>
                </div>
            </div>
        </div>
    </t>
<t t-name="website.s_countdown.end_message">
    <div class="s_countdown_end_message d-none">
        <div class="oe_structure">
            <section class="s_picture pt48 pb24" data-snippet="s_picture">
                <div class="container">
                    <h2 style="text-align: center;">Happy Odoo Anniversary!</h2>
                    <p style="text-align: center;">As promised, we will offer 4 free tickets to our next summit.<br/>Visit our Facebook page to know if you are one of the lucky winners.</p>
                    <p><br/></p>
                    <div class="row s_nb_column_fixed">
                        <div class="col-lg-12 pb24">
                            <figure class="figure">
                                <img src="/web/image/website.library_image_18" class="figure-img img-thumbnail mx-auto padding-large" style="width: 50%;" alt="Countdown is over - Firework"/>
                            </figure>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</t>

<t t-name="website.s_website_form_status_success">
        <span id="s_website_form_result" class="text-success ml8">
            <i class="fa fa-check mr4" role="img" aria-label="Success" title="Success"/>The form has been sent successfully.
        </span>
    </t>


    <t t-name="website.s_website_form_status_error">
        <span id="s_website_form_result" class="text-danger ml8">
            <i class="fa fa-close mr4" role="img" aria-label="Error" title="Error"/>
            <t t-esc="message"/>
        </span>
    </t>


    <t t-name="website.file_block">
        <div class="o_file_block col-4">
            <div class="o_file_wrap mb-1 px-2 py-1">
                <div class="o_file_name d-inline-block w-75 pt-1" t-att-title="fileName" t-out="fileName"/>
                <i class="o_file_delete fa fa-times mt-1 float-end"/>
            </div>
        </div>
    </t>
<t t-name="website.dialog.anchorName">
        <Dialog title="this.title" size="'lg'" modalRef="this.modalRef">
            <div class="mb-3 row">
                <label class="col-form-label col-md-3" for="anchorName">Choose an anchor name</label>
                <div class="col-md-9">
                    <input type="text" class="form-control o_input_anchor_name" id="anchorName" t-attf-value="#{props.currentAnchor}" placeholder="Anchor name"/>
                    <div class="invalid-feedback">
                        <p class="d-none o_anchor_already_exists">The chosen name already exists</p>
                    </div>
                </div>
            </div>
            <t t-set-slot="footer">
                <button class="btn btn-primary" t-on-click="onClickConfirm">Save &amp; copy</button>
                <button class="btn btn-secondary" t-on-click="onClickDiscard">Discard</button>
                <button t-if="props.delete" class="btn btn-link ms-auto" t-on-click="onClickDelete"><i class="fa fa-icon fa-trash"/>
                    Remove
                </button>
            </t>
        </Dialog>
    </t>


    <t t-name="website.dialog.addGoogleFont">
        <Dialog title="this.props.title">
            <div class="mb-3 row">
                <label class="col-form-label col-md-3" for="google_font_html">Google Font address</label>
                <div class="col-md-9">
                    <textarea id="google_font_html" class="form-control o_input_google_font" t-ref="fontInput" placeholder="https://fonts.google.com/specimen/Roboto" style="height: 100px;"/>
                    <span class="float-end text-muted">
                        Select one font on <a target="_blank" href="https://fonts.google.com">fonts.google.com</a> and copy paste the address of the font page here.
                    </span>
                </div>
                <label class="col-form-label col-md-3" for="google_font_serve">Serve font from Google servers</label>
                <label class="o_switch col-form-label col-md-9" for="google_font_serve">
                    <input type="checkbox" checked="checked" id="google_font_serve" t-model="state.googleServe"/>
                    <span/>
                </label>
            </div>
            <t t-set-slot="footer">
                <button class="btn btn-primary" t-att-disabled="state.loading" t-on-click="onClickSave">
                    <t t-if="this.state.loading">
                        <i class="fa fa-icon fa-icon"/>
                    </t>
                    Save and Reload
                </button>
                <button class="btn btn-secondary" t-on-click="onClickCancel">Cancel</button>
            </t>
        </Dialog>
    </t>
    <t t-name="website.delete_google_font_btn">
        <i t-if="!local" role="button" class="text-info me-2 fa fa-cloud" title="This font is hosted and served to your visitors by Google servers"/>
        <t t-set="delete_font_title">Delete this font</t>
        <i role="button" class="text-danger fa fa-trash-o o_we_delete_google_font_btn" t-att-aria-label="delete_font_title" t-att-title="delete_font_title" t-att-data-local-font="local" t-att-data-font-index="index"/>
    </t>
    <t t-name="website.add_google_font_btn">
        <we-button href="#" class="o_we_add_google_font_btn" t-att-data-variable="variable">
            Add a Google Font
        </we-button>
    </t>

    <t t-name="website.color_combination_edition">
        <we-colorpicker string="Background" data-customize-website-color="null" t-attf-data-color="o-cc#{number}-bg"/>
        <we-colorpicker string="Text" data-customize-website-color="null" t-attf-data-color="o-cc#{number}-text"/>
        <we-collapse>
            <we-colorpicker string="Headings" data-customize-website-color="null" t-attf-data-color="o-cc#{number}-headings"/>
            <we-colorpicker string="Headings 2" data-customize-website-color="null" t-attf-data-color="o-cc#{number}-h2"/>
            <we-colorpicker string="Headings 3" data-customize-website-color="null" t-attf-data-color="o-cc#{number}-h3"/>
            <we-colorpicker string="Headings 4" data-customize-website-color="null" t-attf-data-color="o-cc#{number}-h4"/>
            <we-colorpicker string="Headings 5" data-customize-website-color="null" t-attf-data-color="o-cc#{number}-h5"/>
            <we-colorpicker string="Headings 6" data-customize-website-color="null" t-attf-data-color="o-cc#{number}-h6"/>
        </we-collapse>
        <we-colorpicker string="Links" data-customize-website-color="null" t-attf-data-color="o-cc#{number}-link"/>
        <we-row string="Primary Buttons">
            <we-colorpicker title="Background" data-customize-website-color="null" t-attf-data-color="o-cc#{number}-btn-primary"/>
            <we-colorpicker title="Border" data-customize-website-color="null" t-attf-data-color="o-cc#{number}-btn-primary-border"/>
        </we-row>
        <we-row string="Secondary Buttons">
            <we-colorpicker title="Background" data-customize-website-color="null" t-attf-data-color="o-cc#{number}-btn-secondary"/>
            <we-colorpicker title="Border" data-customize-website-color="null" t-attf-data-color="o-cc#{number}-btn-secondary-border"/>
        </we-row>
    </t>
    <t t-name="website.s_google_map_modal">
        <Dialog title="props.title" size="'md'" modalRef="modalRef">
            <p>Use Google Map on your website (Contact Us page, snippets, etc).</p>
            <div class="row mb-0">
                <label class="col-sm-2 col-form-label" for="pin_address">API Key</label>
                <div class="col">
                    <div class="input-group">
                        <div class="input-group-text"><i class="fa fa-key"/></div>
                        <input type="text" class="form-control" id="api_key_input" t-model="this.state.apiKey" placeholder="BSgzTvR5L1GB9jriT451iTN4huVPxHmltG6T6eo"/>
                    </div>
                    <small id="api_key_help" class="text-danger">
                    </small>
                    <div class="small form-text text-muted">
                        Hint: How to use Google Map on your website (Contact Us page and as a snippet)
                        <br/>
                        <a target="_blank" href="https://console.developers.google.com/flows/enableapi?apiid=maps_backend,static_maps_backend&amp;keyType=CLIENT_SIDE&amp;reusekey=true">
                            <i class="oi oi-arrow-right"/>
                            Create a Google Project and Get a Key
                        </a>
                        <br/>
                        <a target="_blank" href="https://cloud.google.com/maps-platform/pricing">
                            <i class="oi oi-arrow-right"/>
                            Enable billing on your Google Project
                        </a>
                    </div>
                    <div class="alert alert-info mb-0 mt-3">
                        Make sure your settings are properly configured:
                        <ul class="mb-0">
                            <li>
                                Enable the right google map APIs in your google account
                                <ul>
                                    <li>Maps Static API</li>
                                    <li>Maps JavaScript API</li>
                                    <li>Places API</li>
                                </ul>
                            </li>
                            <li>
                                Make sure billing is enabled
                            </li>
                            <li>
                                Make sure to wait if errors keep being shown: sometimes enabling an API allows to use it immediately but Google keeps triggering errors for a while
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <t t-set-slot="footer">
                <button t-on-click="onClickSave" class="btn btn-primary">Save</button>
                <button class="btn" t-on-click="() =&gt; this.props.close()">Cancel</button>
            </t>
        </Dialog>
    </t>


    <t t-name="website.s_embed_code_dialog">
        <Dialog title="props.title">
            <p class="h5">Do not copy/paste code you do not understand, this could put your data at risk.</p>
            <p>
                <button class="btn btn-link ps-0" t-on-click="onInjectHeadOrBody">
                    If you need to add analytics or marketing tags, inject code in your &lt;head&gt; or &lt;body&gt; instead.
                </button>
            </p>
            <CodeEditor mode="props.mode" class="'o_website_code_editor_field'" theme="'monokai'" onChange.bind="onCodeChange" value="this.state.value"/>
            <t t-set-slot="footer">
                <button class="btn btn-primary" t-on-click="onConfirm">Save</button>
                <button class="btn" t-on-click="this.props.close">Discard</button>
            </t>
        </Dialog>
    </t>
<t t-name="website.s_website_form_end_message">
        <div class="s_website_form_end_message d-none">
            <div class="oe_structure">
                <section class="s_text_block pt64 pb64 o_colored_level o_cc o_cc2" data-snippet="s_text_block">
                    <div class="container">
                        <h2 class="text-center">
                            <span class="fa fa-check-circle"/>
                                Thank You For Your Feedback
                        </h2>
                        <p class="text-center">
                            Our team will message you back as soon as possible.<br/>
                            In the meantime we invite you to visit our <a href="/">website</a>.<br/>
                        </p>
                    </div>
                </section>
            </div>
        </div>
    </t>

    <t t-name="website.s_website_form_recaptcha_legal">
        <div class="col-12 s_website_form_recaptcha" data-name="Recaptcha Legal">
            <div t-attf-style="width: #{labelWidth or '200px'}" class="s_website_form_label"/>
            <div class="col-sm">
                <t t-call="google_recaptcha.recaptcha_legal_terms"/>
            </div>
        </div>
    </t>



    <t t-name="website.form_field">
        <div t-attf-class="s_website_form_field mb-3 #{field.formatInfo.col or 'col-12'} #{field.custom and 's_website_form_custom' or ''} #{(field.required and 's_website_form_required' or '') or (field.modelRequired and 's_website_form_model_required' or '')} #{field.hidden and 's_website_form_field_hidden' or ''} #{field.dnone and 's_website_form_dnone' or ''}" t-att-data-type="field.type" data-name="Field">
            <div t-if="field.formatInfo.labelPosition != 'none' and field.formatInfo.labelPosition != 'top'" class="row s_col_no_resize s_col_no_bgcolor">
                <label t-attf-class="#{!field.isCheck and 'col-form-label' or ''} col-sm-auto s_website_form_label #{field.formatInfo.labelPosition == 'right' and 'text-end' or ''}" t-attf-style="width: #{field.formatInfo.labelWidth or '200px'}" t-att-for="field.id">
                     <t t-call="website.form_label_content"/>
                </label>
                <div class="col-sm">
                    <t t-out="0"/>
                    <t t-call="website.form_field_description"/>
                </div>
            </div>
            <t t-else="">
                <label t-attf-class="s_website_form_label #{field.formatInfo.labelPosition == 'none' and 'd-none' or ''}" t-attf-style="width: #{field.formatInfo.labelWidth or '200px'}" t-att-for="field.id">
                     <t t-call="website.form_label_content"/>
                </label>
                <t t-out="0"/>
                <t t-call="website.form_field_description"/>
            </t>
        </div>
    </t>

    <t t-name="website.form_label_content">
        <span class="s_website_form_label_content" t-esc="field.string"/>
        <t t-if="field.required or field.modelRequired">
            <span class="s_website_form_mark" t-if="field.formatInfo.requiredMark" t-esc="' ' + field.formatInfo.mark"/>
        </t>
        <t t-else="">
            <span class="s_website_form_mark" t-if="field.formatInfo.optionalMark" t-esc="' ' + field.formatInfo.mark"/>
        </t>
    </t>

    <t t-name="website.form_field_description">



        <div t-if="default_description" class="s_website_form_field_description small form-text text-muted" contenteditable="true">
            <t t-esc="default_description"/>
        </div>
    </t>


    <t t-name="website.form_field_hidden">
        <t t-call="website.form_field">
            <input type="hidden" class="form-control s_website_form_input" t-att-name="field.name" t-att-value="field.value" t-att-id="field.id"/>
        </t>
    </t>


    <t t-name="website.form_field_char">
        <t t-call="website.form_field">
            <input t-att-type="field.inputType || 'text'" class="form-control s_website_form_input" t-att-name="field.name" t-att-required="field.required || field.modelRequired || None" t-att-value="field.value" t-att-data-fill-with="field.fillWith" t-att-placeholder="field.placeholder" t-att-id="field.id"/>
        </t>
    </t>


    <t t-name="website.form_field_email">
        <t t-call="website.form_field_char"/>
    </t>


    <t t-name="website.form_field_tel">
        <t t-call="website.form_field_char"/>
    </t>


    <t t-name="website.form_field_url">
        <t t-call="website.form_field_char"/>
    </t>


    <t t-name="website.form_field_text">
        <t t-call="website.form_field">
            <textarea class="form-control s_website_form_input" t-att-name="field.name" t-att-required="field.required || field.modelRequired || None" t-att-placeholder="field.placeholder" t-att-id="field.id" t-att-rows="field.rows || 3" t-esc="field.value"/>
        </t>
    </t>


    <t t-name="website.form_field_html">

        <t t-call="website.form_field_text"/>
    </t>


    <t t-name="website.form_field_integer">
        <t t-call="website.form_field">
            <input type="number" class="form-control s_website_form_input" t-att-name="field.name" step="1" t-att-required="field.required || field.modelRequired || None" t-att-value="field.value" t-att-placeholder="field.placeholder" t-att-id="field.id"/>
        </t>
    </t>


    <t t-name="website.form_field_float">
        <t t-call="website.form_field">
            <input type="number" class="form-control s_website_form_input" t-att-name="field.name" step="any" t-att-required="field.required || field.modelRequired || None" t-att-value="field.value" t-att-placeholder="field.placeholder" t-att-id="field.id"/>
        </t>
    </t>


    <t t-name="website.form_field_date">
        <t t-call="website.form_field">
            <div class="s_website_form_date input-group date">
                <input type="text" class="form-control datetimepicker-input s_website_form_input" t-att-name="field.name" t-att-required="field.required || field.modelRequired || None" t-att-value="field.value" t-att-placeholder="field.placeholder" t-att-id="field.id"/>
                <div class="input-group-text pe-none"><i class="fa fa-calendar"/></div>
            </div>
        </t>
    </t>


    <t t-name="website.form_field_datetime">
        <t t-call="website.form_field">
            <div class="s_website_form_datetime input-group date">
                <input type="text" class="form-control datetimepicker-input s_website_form_input" t-att-name="field.name" t-att-required="field.required || field.modelRequired || None" t-att-value="field.value" t-att-placeholder="field.placeholder" t-att-id="field.id"/>
                <div class="input-group-text pe-none"><i class="fa fa-calendar"/></div>
            </div>
        </t>
    </t>


    <t t-name="website.form_field_boolean">
        <t t-call="website.form_field">
            <div class="form-check">
                <input type="checkbox" value="Yes" class="s_website_form_input form-check-input" t-att-name="field.name" t-att="{checked: field.value and 'checked' or None}" t-att-required="field.required || field.modelRequired || None" t-att-id="field.id"/>
            </div>
        </t>
    </t>


    <t t-name="website.form_field_selection">
        <t t-call="website.form_field">
            <t t-if="!field.records">
                <input class="s_website_form_input" t-att-name="field.name" t-att-value="undefined" t-att-required="field.required || field.modelRequired || None" placeholder="No matching record!" disabled=""/>
            </t>
            <div class="row s_col_no_resize s_col_no_bgcolor s_website_form_multiple" t-att-data-name="field.name" t-att-data-display="field.formatInfo.multiPosition">
                <t t-foreach="field.records" t-as="record" t-key="record_index">
                    <t t-call="website.form_radio"/>
                </t>
            </div>
        </t>
    </t>


    <t t-name="website.form_radio">
        <t t-set="recordId" t-value="field.id + record_index"/>
        <div t-attf-class="radio col-12 #{field.formatInfo.multiPosition === 'horizontal' and 'col-lg-4 col-md-6' or ''}">
            <div class="form-check">
                <input type="radio" class="s_website_form_input form-check-input" t-att-id="recordId" t-att-name="field.name" t-att="{checked: record.selected and 'checked' or None}" t-att-value="record.id" t-att-required="field.required || field.modelRequired || None"/>
                <label class="form-check-label s_website_form_check_label" t-att-for="recordId">
                    <t t-esc="record.display_name"/>
                </label>
            </div>
        </div>
    </t>


    <t t-name="website.form_field_many2one">

        <t t-if="field.relation == 'ir.attachment'">
            <t t-call="website.form_field_binary"/>
        </t>

        <t t-if="field.relation != 'ir.attachment'">
            <t t-call="website.form_field">
                <select class="form-select s_website_form_input" t-att-name="field.name" t-att-required="field.required || field.modelRequired || None" t-att-id="field.id" style="display: none">
                    <t t-foreach="field.records" t-as="record" t-key="record_index">
                        <option t-esc="record.display_name" t-att-value="record.id" t-att="{selected: record.selected and 'selected' or None}"/>
                    </t>
                </select>
                <div id="editable_select" class="form-control s_website_form_input">
                    <t t-foreach="field.records" t-as="record" t-key="record_index">
                        <t t-set="noValueLabel">no value</t>
                        <div t-esc="record.display_name" t-attf-data-empty-value="&lt;#{noValueLabel}&gt;" t-att-id="record.id" t-attf-class="s_website_form_select_item #{record.selected and 'selected' or ''}"/>
                    </t>
                </div>
            </t>
        </t>
    </t>


    <t t-name="website.form_field_one2many">

        <t t-if="field.relation == 'ir.attachment'">
            <t t-call="website.form_field_binary">
                <t t-set="multiple" t-value="1"/>
            </t>
        </t>

        <t t-if="field.relation != 'ir.attachment'">
            <t t-call="website.form_field">
                <t t-if="!field.records || field.records.length == 0">
                    <input class="form-control s_website_form_input" t-att-name="field.name" t-att-value="undefined" t-att-required="field.required || field.modelRequired || None" placeholder="No matching record!" disabled=""/>
                </t>
                <div class="row s_col_no_resize s_col_no_bgcolor s_website_form_multiple" t-att-data-name="field.name" t-att-data-display="field.formatInfo.multiPosition">
                    <t t-foreach="field.records" t-as="record" t-key="record_index">
                        <t t-call="website.form_checkbox"/>
                    </t>
                </div>
            </t>
        </t>
    </t>


    <t t-name="website.form_checkbox">
        <t t-set="recordId" t-value="field.id + record_index"/>
        <div t-attf-class="checkbox col-12 #{field.formatInfo.multiPosition === 'horizontal' and 'col-lg-4 col-md-6' or ''}">
            <div class="form-check">
                <input type="checkbox" class="s_website_form_input form-check-input" t-att-id="recordId" t-att-name="field.name" t-att="{checked: record.selected and 'checked' or None}" t-att-value="record.id" t-att-required="field.required || field.modelRequired || None"/>
                <label class="form-check-label s_website_form_check_label" t-att-for="recordId">
                    <t t-esc="record.display_name"/>
                </label>
            </div>
        </div>
    </t>


    <t t-name="website.form_field_many2many">
        <t t-call="website.form_field_one2many"/>
    </t>


    <t t-name="website.form_field_binary">
        <t t-call="website.form_field">
            <input type="file" class="form-control s_website_form_input" t-att-name="field.name" t-att-required="field.required || field.modelRequired || None" t-att="field.maxFilesNumber &gt; 1 and {'multiple': ''} or {}" t-att-id="field.id" t-att-data-max-files-number="field.maxFilesNumber or '1'" t-att-data-max-file-size="field.maxFileSize or '1'"/>
        </t>
    </t>


    <t t-name="website.form_field_monetary">
        <t t-call="website.form_field_float"/>
    </t>
<t t-name="website.cookies_bar.text_title">
        <h3 class="o_cookies_bar_text_title">
            Respecting your privacy is our priority.
        </h3>
    </t>
    <t t-name="website.cookies_bar.text_primary">
        <p class="o_cookies_bar_text_primary">
            Allow the use of cookies from this website on this browser?
        </p>
    </t>
    <t t-name="website.cookies_bar.text_secondary">
        <p class="o_cookies_bar_text_secondary">
            We use cookies to provide improved experience on this website. You can learn more about our cookies and how we use them in our <a href="/cookie-policy" class="o_cookies_bar_text_policy">Cookie Policy</a>.
        </p>
    </t>
    <t t-name="website.cookies_bar.text_button_all">
        <a href="#" id="cookies-consent-all" role="button" class="js_close_popup o_cookies_bar_accept_all o_cookies_bar_text_button btn btn-outline-primary rounded-circle mb-1 px-2 py-1">Allow all cookies</a>
    </t>
    <t t-name="website.cookies_bar.text_button_essential">
        <a href="#" id="cookies-consent-essential" role="button" class="js_close_popup o_cookies_bar_accept_essential o_cookies_bar_text_button_essential btn btn-outline-primary rounded-circle mt-1 mb-2 px-2 py-1">Only allow essential cookies</a>
    </t>
    <t t-name="website.cookies_bar.discrete">

        <section class="o_colored_level o_cc o_cc1">
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 pt16">
                        <p>
                            <span class="pe-1">We use cookies to provide you a better user experience on this website.</span>
                            <a href="/cookie-policy" class="o_cookies_bar_text_policy btn btn-link btn-sm px-0">Cookie Policy</a>
                        </p>
                    </div>
                    <div class="col-lg-4 text-end pt16 pb16">
                        <a href="#" id="cookies-consent-essential" role="button" class="js_close_popup btn btn-outline-primary rounded-circle btn-sm px-2">Only essentials</a>
                        <a href="#" id="cookies-consent-all" role="button" class="js_close_popup btn btn-outline-primary rounded-circle btn-sm">I agree</a>
                    </div>
                </div>
            </div>
        </section>
    </t>
    <t t-name="website.cookies_bar.classic">
        <section class="o_colored_level o_cc o_cc1 pt32 pb16">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6">
                        <t t-call="website.cookies_bar.text_title"/>
                        <t t-call="website.cookies_bar.text_primary"/>
                        <t t-call="website.cookies_bar.text_secondary"/>
                    </div>
                    <div class="col-lg-3 d-flex align-items-center">
                        <div class="row">
                            <div class="col-lg-12 d-flex align-items-center">
                                <t t-call="website.cookies_bar.text_button_all"/>
                            </div>
                            <div class="col-lg-12 d-flex align-items-center">
                                <t t-call="website.cookies_bar.text_button_essential"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </t>
    <t t-name="website.cookies_bar.popup">
        <section class="o_colored_level o_cc o_cc1 p-5">
            <div class="container text-center">
                <div class="row">
                    <div class="col-lg-12">
                        <img t-attf-src="/web/image/website/#{websiteId}/logo/250x250" class="img img-fluid mb-4" alt="Website Logo"/>
                        <t t-call="website.cookies_bar.text_title"/>
                        <t t-call="website.cookies_bar.text_primary"/>
                        <t t-call="website.cookies_bar.text_secondary"/>
                        <t t-call="website.cookies_bar.text_button_all"/>
                        <t t-call="website.cookies_bar.text_button_essential"/>
                    </div>
                </div>
            </div>
        </section>
    </t>

</templates>`);
                    });